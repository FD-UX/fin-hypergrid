<!--
The OpenFin Hypergrid is a high performant canvas based general grid control.  It is implemented as a Polymer HTML5 web-component. See [Polymer](https://www.polymer-project.org/) and [Web Components](http://www.w3.org/TR/components-intro/).
<br>
### Openfin polymerized hypergrid Demo
To see the "pink" demo
- see the [github pages hosted deplyment](http://openfin.github.io/fin-hypergrid/components/fin-hypergrid/demo.html) or
- run the [openfin installer](https://dl.openfin.co/services/download?fileName=hypergrid-demo-installer&config=http://openfin.github.io/fin-hypergrid/components/fin-hypergrid/demo.json)
### The Hypergrid is dependent on several other OpenFin projects
- [fin-canvas](http://stevewirts.github.io/fin-canvas/components/fin-canvas/): a wrapper to provide a simpler interface to the HTML5 canvas component
- [fin-rectangle](http://stevewirts.github.io/fin-rectangle/components/fin-rectangle/): a small library providing Point and Rectangle objects
- [fin-vampire-bar](http://datamadic.github.io/fin-vampire-bar/components/fin-vampire-bar/): a web-component based general scroll bar control
### Pluggable Grid Behaviors
The Hypergrid design makes no assumptions about the data you wish to view which allows for external data sources and external manipulation and analytics.  Manipulations such as sorting, aggregation, and grouping can be achieved using best of breed high-performant real time tools designed for such purposes. All the code that impacts these operations has been factored into an Object called [PluggableGridBehavior](index.html#fin-hypergrid-behavior-default).  A PluggableGridBehavior can be thought of as a traditional tablemodel but with a little more responsibility.  There are Three example PluggableGridBehaviors provided, the base or DefaultGridBehavior, a QGridBehavior, and an InMemoryGridBehavior.
@group OpenFin hypergrid
@element fin-hypergrid
@homepage http://github.com/openfin/fin-hypergrid
--><html><head><script>(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){(function(process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){var lookup="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";(function(exports){"use strict";var Arr=typeof Uint8Array!=="undefined"?Uint8Array:Array;var PLUS="+".charCodeAt(0);var SLASH="/".charCodeAt(0);var NUMBER="0".charCodeAt(0);var LOWER="a".charCodeAt(0);var UPPER="A".charCodeAt(0);var PLUS_URL_SAFE="-".charCodeAt(0);var SLASH_URL_SAFE="_".charCodeAt(0);function decode(elt){var code=elt.charCodeAt(0);if(code===PLUS||code===PLUS_URL_SAFE)return 62;if(code===SLASH||code===SLASH_URL_SAFE)return 63;if(code<NUMBER)return-1;if(code<NUMBER+10)return code-NUMBER+26+26;if(code<UPPER+26)return code-UPPER;if(code<LOWER+26)return code-LOWER+26}function b64ToByteArray(b64){var i,j,l,tmp,placeHolders,arr;if(b64.length%4>0){throw new Error("Invalid string. Length must be a multiple of 4")}var len=b64.length;placeHolders="="===b64.charAt(len-2)?2:"="===b64.charAt(len-1)?1:0;arr=new Arr(b64.length*3/4-placeHolders);l=placeHolders>0?b64.length-4:b64.length;var L=0;function push(v){arr[L++]=v}for(i=0,j=0;i<l;i+=4,j+=3){tmp=decode(b64.charAt(i))<<18|decode(b64.charAt(i+1))<<12|decode(b64.charAt(i+2))<<6|decode(b64.charAt(i+3));push((tmp&16711680)>>16);push((tmp&65280)>>8);push(tmp&255)}if(placeHolders===2){tmp=decode(b64.charAt(i))<<2|decode(b64.charAt(i+1))>>4;push(tmp&255)}else if(placeHolders===1){tmp=decode(b64.charAt(i))<<10|decode(b64.charAt(i+1))<<4|decode(b64.charAt(i+2))>>2;push(tmp>>8&255);push(tmp&255)}return arr}function uint8ToBase64(uint8){var i,extraBytes=uint8.length%3,output="",temp,length;function encode(num){return lookup.charAt(num)}function tripletToBase64(num){return encode(num>>18&63)+encode(num>>12&63)+encode(num>>6&63)+encode(num&63)}for(i=0,length=uint8.length-extraBytes;i<length;i+=3){temp=(uint8[i]<<16)+(uint8[i+1]<<8)+uint8[i+2];output+=tripletToBase64(temp)}switch(extraBytes){case 1:temp=uint8[uint8.length-1];output+=encode(temp>>2);output+=encode(temp<<4&63);output+="==";break;case 2:temp=(uint8[uint8.length-2]<<8)+uint8[uint8.length-1];output+=encode(temp>>10);output+=encode(temp>>4&63);output+=encode(temp<<2&63);output+="=";break}return output}exports.toByteArray=b64ToByteArray;exports.fromByteArray=uint8ToBase64})(typeof exports==="undefined"?this.base64js={}:exports)}).call(this,require("rH1JPG"),typeof self!=="undefined"?self:typeof window!=="undefined"?window:{},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/../../node_modules/base64-js/lib/b64.js","/../../node_modules/base64-js/lib")},{buffer:2,rH1JPG:4}],2:[function(require,module,exports){(function(process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){var base64=require("base64-js");var ieee754=require("ieee754");exports.Buffer=Buffer;exports.SlowBuffer=Buffer;exports.INSPECT_MAX_BYTES=50;Buffer.poolSize=8192;Buffer._useTypedArrays=function(){try{var buf=new ArrayBuffer(0);var arr=new Uint8Array(buf);arr.foo=function(){return 42};return 42===arr.foo()&&typeof arr.subarray==="function"}catch(e){return false}}();function Buffer(subject,encoding,noZero){if(!(this instanceof Buffer))return new Buffer(subject,encoding,noZero);var type=typeof subject;if(encoding==="base64"&&type==="string"){subject=stringtrim(subject);while(subject.length%4!==0){subject=subject+"="}}var length;if(type==="number")length=coerce(subject);else if(type==="string")length=Buffer.byteLength(subject,encoding);else if(type==="object")length=coerce(subject.length);else throw new Error("First argument needs to be a number, array or string.");var buf;if(Buffer._useTypedArrays){buf=Buffer._augment(new Uint8Array(length))}else{buf=this;buf.length=length;buf._isBuffer=true}var i;if(Buffer._useTypedArrays&&typeof subject.byteLength==="number"){buf._set(subject)}else if(isArrayish(subject)){for(i=0;i<length;i++){if(Buffer.isBuffer(subject))buf[i]=subject.readUInt8(i);else buf[i]=subject[i]}}else if(type==="string"){buf.write(subject,0,encoding)}else if(type==="number"&&!Buffer._useTypedArrays&&!noZero){for(i=0;i<length;i++){buf[i]=0}}return buf}Buffer.isEncoding=function(encoding){switch(String(encoding).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return true;default:return false}};Buffer.isBuffer=function(b){return!!(b!==null&&b!==undefined&&b._isBuffer)};Buffer.byteLength=function(str,encoding){var ret;str=str+"";switch(encoding||"utf8"){case"hex":ret=str.length/2;break;case"utf8":case"utf-8":ret=utf8ToBytes(str).length;break;case"ascii":case"binary":case"raw":ret=str.length;break;case"base64":ret=base64ToBytes(str).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":ret=str.length*2;break;default:throw new Error("Unknown encoding")}return ret};Buffer.concat=function(list,totalLength){assert(isArray(list),"Usage: Buffer.concat(list, [totalLength])\n"+"list should be an Array.");if(list.length===0){return new Buffer(0)}else if(list.length===1){return list[0]}var i;if(typeof totalLength!=="number"){totalLength=0;for(i=0;i<list.length;i++){totalLength+=list[i].length}}var buf=new Buffer(totalLength);var pos=0;for(i=0;i<list.length;i++){var item=list[i];item.copy(buf,pos);pos+=item.length}return buf};function _hexWrite(buf,string,offset,length){offset=Number(offset)||0;var remaining=buf.length-offset;if(!length){length=remaining}else{length=Number(length);if(length>remaining){length=remaining}}var strLen=string.length;assert(strLen%2===0,"Invalid hex string");if(length>strLen/2){length=strLen/2}for(var i=0;i<length;i++){var byte=parseInt(string.substr(i*2,2),16);assert(!isNaN(byte),"Invalid hex string");buf[offset+i]=byte}Buffer._charsWritten=i*2;return i}function _utf8Write(buf,string,offset,length){var charsWritten=Buffer._charsWritten=blitBuffer(utf8ToBytes(string),buf,offset,length);return charsWritten}function _asciiWrite(buf,string,offset,length){var charsWritten=Buffer._charsWritten=blitBuffer(asciiToBytes(string),buf,offset,length);return charsWritten}function _binaryWrite(buf,string,offset,length){return _asciiWrite(buf,string,offset,length)}function _base64Write(buf,string,offset,length){var charsWritten=Buffer._charsWritten=blitBuffer(base64ToBytes(string),buf,offset,length);return charsWritten}function _utf16leWrite(buf,string,offset,length){var charsWritten=Buffer._charsWritten=blitBuffer(utf16leToBytes(string),buf,offset,length);return charsWritten}Buffer.prototype.write=function(string,offset,length,encoding){if(isFinite(offset)){if(!isFinite(length)){encoding=length;length=undefined}}else{var swap=encoding;encoding=offset;offset=length;length=swap}offset=Number(offset)||0;var remaining=this.length-offset;if(!length){length=remaining}else{length=Number(length);if(length>remaining){length=remaining}}encoding=String(encoding||"utf8").toLowerCase();var ret;switch(encoding){case"hex":ret=_hexWrite(this,string,offset,length);break;case"utf8":case"utf-8":ret=_utf8Write(this,string,offset,length);break;case"ascii":ret=_asciiWrite(this,string,offset,length);break;case"binary":ret=_binaryWrite(this,string,offset,length);break;case"base64":ret=_base64Write(this,string,offset,length);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":ret=_utf16leWrite(this,string,offset,length);break;default:throw new Error("Unknown encoding")}return ret};Buffer.prototype.toString=function(encoding,start,end){var self=this;encoding=String(encoding||"utf8").toLowerCase();start=Number(start)||0;end=end!==undefined?Number(end):end=self.length;if(end===start)return"";var ret;switch(encoding){case"hex":ret=_hexSlice(self,start,end);break;case"utf8":case"utf-8":ret=_utf8Slice(self,start,end);break;case"ascii":ret=_asciiSlice(self,start,end);break;case"binary":ret=_binarySlice(self,start,end);break;case"base64":ret=_base64Slice(self,start,end);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":ret=_utf16leSlice(self,start,end);break;default:throw new Error("Unknown encoding")}return ret};Buffer.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};Buffer.prototype.copy=function(target,target_start,start,end){var source=this;if(!start)start=0;if(!end&&end!==0)end=this.length;if(!target_start)target_start=0;if(end===start)return;if(target.length===0||source.length===0)return;assert(end>=start,"sourceEnd < sourceStart");assert(target_start>=0&&target_start<target.length,"targetStart out of bounds");assert(start>=0&&start<source.length,"sourceStart out of bounds");assert(end>=0&&end<=source.length,"sourceEnd out of bounds");if(end>this.length)end=this.length;if(target.length-target_start<end-start)end=target.length-target_start+start;var len=end-start;if(len<100||!Buffer._useTypedArrays){for(var i=0;i<len;i++)target[i+target_start]=this[i+start]}else{target._set(this.subarray(start,start+len),target_start)}};function _base64Slice(buf,start,end){if(start===0&&end===buf.length){return base64.fromByteArray(buf)}else{return base64.fromByteArray(buf.slice(start,end))}}function _utf8Slice(buf,start,end){var res="";var tmp="";end=Math.min(buf.length,end);for(var i=start;i<end;i++){if(buf[i]<=127){res+=decodeUtf8Char(tmp)+String.fromCharCode(buf[i]);tmp=""}else{tmp+="%"+buf[i].toString(16)}}return res+decodeUtf8Char(tmp)}function _asciiSlice(buf,start,end){var ret="";end=Math.min(buf.length,end);for(var i=start;i<end;i++)ret+=String.fromCharCode(buf[i]);return ret}function _binarySlice(buf,start,end){return _asciiSlice(buf,start,end)}function _hexSlice(buf,start,end){var len=buf.length;if(!start||start<0)start=0;if(!end||end<0||end>len)end=len;var out="";for(var i=start;i<end;i++){out+=toHex(buf[i])}return out}function _utf16leSlice(buf,start,end){var bytes=buf.slice(start,end);var res="";for(var i=0;i<bytes.length;i+=2){res+=String.fromCharCode(bytes[i]+bytes[i+1]*256)}return res}Buffer.prototype.slice=function(start,end){var len=this.length;start=clamp(start,len,0);end=clamp(end,len,len);if(Buffer._useTypedArrays){return Buffer._augment(this.subarray(start,end))}else{var sliceLen=end-start;var newBuf=new Buffer(sliceLen,undefined,true);for(var i=0;i<sliceLen;i++){newBuf[i]=this[i+start]}return newBuf}};Buffer.prototype.get=function(offset){console.log(".get() is deprecated. Access using array indexes instead.");return this.readUInt8(offset)};Buffer.prototype.set=function(v,offset){console.log(".set() is deprecated. Access using array indexes instead.");return this.writeUInt8(v,offset)};Buffer.prototype.readUInt8=function(offset,noAssert){if(!noAssert){assert(offset!==undefined&&offset!==null,"missing offset");assert(offset<this.length,"Trying to read beyond buffer length")}if(offset>=this.length)return;return this[offset]};function _readUInt16(buf,offset,littleEndian,noAssert){if(!noAssert){assert(typeof littleEndian==="boolean","missing or invalid endian");assert(offset!==undefined&&offset!==null,"missing offset");assert(offset+1<buf.length,"Trying to read beyond buffer length")}var len=buf.length;if(offset>=len)return;var val;if(littleEndian){val=buf[offset];if(offset+1<len)val|=buf[offset+1]<<8}else{val=buf[offset]<<8;if(offset+1<len)val|=buf[offset+1]}return val}Buffer.prototype.readUInt16LE=function(offset,noAssert){return _readUInt16(this,offset,true,noAssert)};Buffer.prototype.readUInt16BE=function(offset,noAssert){return _readUInt16(this,offset,false,noAssert)};function _readUInt32(buf,offset,littleEndian,noAssert){if(!noAssert){assert(typeof littleEndian==="boolean","missing or invalid endian");assert(offset!==undefined&&offset!==null,"missing offset");assert(offset+3<buf.length,"Trying to read beyond buffer length")}var len=buf.length;if(offset>=len)return;var val;if(littleEndian){if(offset+2<len)val=buf[offset+2]<<16;if(offset+1<len)val|=buf[offset+1]<<8;val|=buf[offset];if(offset+3<len)val=val+(buf[offset+3]<<24>>>0)}else{if(offset+1<len)val=buf[offset+1]<<16;if(offset+2<len)val|=buf[offset+2]<<8;if(offset+3<len)val|=buf[offset+3];val=val+(buf[offset]<<24>>>0)}return val}Buffer.prototype.readUInt32LE=function(offset,noAssert){return _readUInt32(this,offset,true,noAssert)};Buffer.prototype.readUInt32BE=function(offset,noAssert){return _readUInt32(this,offset,false,noAssert)};Buffer.prototype.readInt8=function(offset,noAssert){if(!noAssert){assert(offset!==undefined&&offset!==null,"missing offset");assert(offset<this.length,"Trying to read beyond buffer length")}if(offset>=this.length)return;var neg=this[offset]&128;if(neg)return(255-this[offset]+1)*-1;else return this[offset]};function _readInt16(buf,offset,littleEndian,noAssert){if(!noAssert){assert(typeof littleEndian==="boolean","missing or invalid endian");assert(offset!==undefined&&offset!==null,"missing offset");assert(offset+1<buf.length,"Trying to read beyond buffer length")}var len=buf.length;if(offset>=len)return;var val=_readUInt16(buf,offset,littleEndian,true);var neg=val&32768;if(neg)return(65535-val+1)*-1;else return val}Buffer.prototype.readInt16LE=function(offset,noAssert){return _readInt16(this,offset,true,noAssert)};Buffer.prototype.readInt16BE=function(offset,noAssert){return _readInt16(this,offset,false,noAssert)};function _readInt32(buf,offset,littleEndian,noAssert){if(!noAssert){assert(typeof littleEndian==="boolean","missing or invalid endian");assert(offset!==undefined&&offset!==null,"missing offset");assert(offset+3<buf.length,"Trying to read beyond buffer length")}var len=buf.length;if(offset>=len)return;var val=_readUInt32(buf,offset,littleEndian,true);var neg=val&2147483648;if(neg)return(4294967295-val+1)*-1;else return val}Buffer.prototype.readInt32LE=function(offset,noAssert){return _readInt32(this,offset,true,noAssert)};Buffer.prototype.readInt32BE=function(offset,noAssert){return _readInt32(this,offset,false,noAssert)};function _readFloat(buf,offset,littleEndian,noAssert){if(!noAssert){assert(typeof littleEndian==="boolean","missing or invalid endian");assert(offset+3<buf.length,"Trying to read beyond buffer length")}return ieee754.read(buf,offset,littleEndian,23,4)}Buffer.prototype.readFloatLE=function(offset,noAssert){return _readFloat(this,offset,true,noAssert)};Buffer.prototype.readFloatBE=function(offset,noAssert){return _readFloat(this,offset,false,noAssert)};function _readDouble(buf,offset,littleEndian,noAssert){if(!noAssert){assert(typeof littleEndian==="boolean","missing or invalid endian");assert(offset+7<buf.length,"Trying to read beyond buffer length")}return ieee754.read(buf,offset,littleEndian,52,8)}Buffer.prototype.readDoubleLE=function(offset,noAssert){return _readDouble(this,offset,true,noAssert)};Buffer.prototype.readDoubleBE=function(offset,noAssert){return _readDouble(this,offset,false,noAssert)};Buffer.prototype.writeUInt8=function(value,offset,noAssert){if(!noAssert){assert(value!==undefined&&value!==null,"missing value");assert(offset!==undefined&&offset!==null,"missing offset");assert(offset<this.length,"trying to write beyond buffer length");verifuint(value,255)}if(offset>=this.length)return;this[offset]=value};function _writeUInt16(buf,value,offset,littleEndian,noAssert){if(!noAssert){assert(value!==undefined&&value!==null,"missing value");assert(typeof littleEndian==="boolean","missing or invalid endian");assert(offset!==undefined&&offset!==null,"missing offset");assert(offset+1<buf.length,"trying to write beyond buffer length");verifuint(value,65535)}var len=buf.length;if(offset>=len)return;for(var i=0,j=Math.min(len-offset,2);i<j;i++){buf[offset+i]=(value&255<<8*(littleEndian?i:1-i))>>>(littleEndian?i:1-i)*8}}Buffer.prototype.writeUInt16LE=function(value,offset,noAssert){_writeUInt16(this,value,offset,true,noAssert)};Buffer.prototype.writeUInt16BE=function(value,offset,noAssert){_writeUInt16(this,value,offset,false,noAssert)};function _writeUInt32(buf,value,offset,littleEndian,noAssert){if(!noAssert){assert(value!==undefined&&value!==null,"missing value");assert(typeof littleEndian==="boolean","missing or invalid endian");assert(offset!==undefined&&offset!==null,"missing offset");assert(offset+3<buf.length,"trying to write beyond buffer length");verifuint(value,4294967295)}var len=buf.length;if(offset>=len)return;for(var i=0,j=Math.min(len-offset,4);i<j;i++){buf[offset+i]=value>>>(littleEndian?i:3-i)*8&255}}Buffer.prototype.writeUInt32LE=function(value,offset,noAssert){_writeUInt32(this,value,offset,true,noAssert)};Buffer.prototype.writeUInt32BE=function(value,offset,noAssert){_writeUInt32(this,value,offset,false,noAssert)};Buffer.prototype.writeInt8=function(value,offset,noAssert){if(!noAssert){assert(value!==undefined&&value!==null,"missing value");assert(offset!==undefined&&offset!==null,"missing offset");assert(offset<this.length,"Trying to write beyond buffer length");verifsint(value,127,-128)}if(offset>=this.length)return;if(value>=0)this.writeUInt8(value,offset,noAssert);else this.writeUInt8(255+value+1,offset,noAssert)};function _writeInt16(buf,value,offset,littleEndian,noAssert){if(!noAssert){assert(value!==undefined&&value!==null,"missing value");assert(typeof littleEndian==="boolean","missing or invalid endian");assert(offset!==undefined&&offset!==null,"missing offset");assert(offset+1<buf.length,"Trying to write beyond buffer length");verifsint(value,32767,-32768)}var len=buf.length;if(offset>=len)return;if(value>=0)_writeUInt16(buf,value,offset,littleEndian,noAssert);else _writeUInt16(buf,65535+value+1,offset,littleEndian,noAssert)}Buffer.prototype.writeInt16LE=function(value,offset,noAssert){_writeInt16(this,value,offset,true,noAssert)};Buffer.prototype.writeInt16BE=function(value,offset,noAssert){_writeInt16(this,value,offset,false,noAssert)};function _writeInt32(buf,value,offset,littleEndian,noAssert){if(!noAssert){assert(value!==undefined&&value!==null,"missing value");assert(typeof littleEndian==="boolean","missing or invalid endian");assert(offset!==undefined&&offset!==null,"missing offset");assert(offset+3<buf.length,"Trying to write beyond buffer length");verifsint(value,2147483647,-2147483648)}var len=buf.length;if(offset>=len)return;if(value>=0)_writeUInt32(buf,value,offset,littleEndian,noAssert);else _writeUInt32(buf,4294967295+value+1,offset,littleEndian,noAssert)}Buffer.prototype.writeInt32LE=function(value,offset,noAssert){_writeInt32(this,value,offset,true,noAssert)};Buffer.prototype.writeInt32BE=function(value,offset,noAssert){_writeInt32(this,value,offset,false,noAssert)};function _writeFloat(buf,value,offset,littleEndian,noAssert){if(!noAssert){assert(value!==undefined&&value!==null,"missing value");assert(typeof littleEndian==="boolean","missing or invalid endian");assert(offset!==undefined&&offset!==null,"missing offset");assert(offset+3<buf.length,"Trying to write beyond buffer length");verifIEEE754(value,3.4028234663852886e38,-3.4028234663852886e38)}var len=buf.length;if(offset>=len)return;ieee754.write(buf,value,offset,littleEndian,23,4)}Buffer.prototype.writeFloatLE=function(value,offset,noAssert){_writeFloat(this,value,offset,true,noAssert)};Buffer.prototype.writeFloatBE=function(value,offset,noAssert){_writeFloat(this,value,offset,false,noAssert)};function _writeDouble(buf,value,offset,littleEndian,noAssert){if(!noAssert){assert(value!==undefined&&value!==null,"missing value");assert(typeof littleEndian==="boolean","missing or invalid endian");assert(offset!==undefined&&offset!==null,"missing offset");assert(offset+7<buf.length,"Trying to write beyond buffer length");verifIEEE754(value,1.7976931348623157e308,-1.7976931348623157e308)}var len=buf.length;if(offset>=len)return;ieee754.write(buf,value,offset,littleEndian,52,8)}Buffer.prototype.writeDoubleLE=function(value,offset,noAssert){_writeDouble(this,value,offset,true,noAssert)};Buffer.prototype.writeDoubleBE=function(value,offset,noAssert){_writeDouble(this,value,offset,false,noAssert)};Buffer.prototype.fill=function(value,start,end){if(!value)value=0;if(!start)start=0;if(!end)end=this.length;if(typeof value==="string"){value=value.charCodeAt(0)}assert(typeof value==="number"&&!isNaN(value),"value is not a number");assert(end>=start,"end < start");if(end===start)return;if(this.length===0)return;assert(start>=0&&start<this.length,"start out of bounds");assert(end>=0&&end<=this.length,"end out of bounds");for(var i=start;i<end;i++){this[i]=value}};Buffer.prototype.inspect=function(){var out=[];var len=this.length;for(var i=0;i<len;i++){out[i]=toHex(this[i]);if(i===exports.INSPECT_MAX_BYTES){out[i+1]="...";break}}return"<Buffer "+out.join(" ")+">"};Buffer.prototype.toArrayBuffer=function(){if(typeof Uint8Array!=="undefined"){if(Buffer._useTypedArrays){return new Buffer(this).buffer}else{var buf=new Uint8Array(this.length);for(var i=0,len=buf.length;i<len;i+=1)buf[i]=this[i];return buf.buffer}}else{throw new Error("Buffer.toArrayBuffer not supported in this browser")}};function stringtrim(str){if(str.trim)return str.trim();return str.replace(/^\s+|\s+$/g,"")}var BP=Buffer.prototype;Buffer._augment=function(arr){arr._isBuffer=true;arr._get=arr.get;arr._set=arr.set;arr.get=BP.get;arr.set=BP.set;arr.write=BP.write;arr.toString=BP.toString;arr.toLocaleString=BP.toString;arr.toJSON=BP.toJSON;arr.copy=BP.copy;arr.slice=BP.slice;arr.readUInt8=BP.readUInt8;arr.readUInt16LE=BP.readUInt16LE;arr.readUInt16BE=BP.readUInt16BE;arr.readUInt32LE=BP.readUInt32LE;arr.readUInt32BE=BP.readUInt32BE;arr.readInt8=BP.readInt8;arr.readInt16LE=BP.readInt16LE;arr.readInt16BE=BP.readInt16BE;arr.readInt32LE=BP.readInt32LE;arr.readInt32BE=BP.readInt32BE;arr.readFloatLE=BP.readFloatLE;arr.readFloatBE=BP.readFloatBE;arr.readDoubleLE=BP.readDoubleLE;arr.readDoubleBE=BP.readDoubleBE;arr.writeUInt8=BP.writeUInt8;arr.writeUInt16LE=BP.writeUInt16LE;arr.writeUInt16BE=BP.writeUInt16BE;arr.writeUInt32LE=BP.writeUInt32LE;arr.writeUInt32BE=BP.writeUInt32BE;arr.writeInt8=BP.writeInt8;arr.writeInt16LE=BP.writeInt16LE;arr.writeInt16BE=BP.writeInt16BE;arr.writeInt32LE=BP.writeInt32LE;arr.writeInt32BE=BP.writeInt32BE;arr.writeFloatLE=BP.writeFloatLE;arr.writeFloatBE=BP.writeFloatBE;arr.writeDoubleLE=BP.writeDoubleLE;arr.writeDoubleBE=BP.writeDoubleBE;arr.fill=BP.fill;arr.inspect=BP.inspect;arr.toArrayBuffer=BP.toArrayBuffer;return arr};function clamp(index,len,defaultValue){if(typeof index!=="number")return defaultValue;index=~~index;if(index>=len)return len;if(index>=0)return index;index+=len;if(index>=0)return index;return 0}function coerce(length){length=~~Math.ceil(+length);return length<0?0:length}function isArray(subject){return(Array.isArray||function(subject){return Object.prototype.toString.call(subject)==="[object Array]"})(subject)}function isArrayish(subject){return isArray(subject)||Buffer.isBuffer(subject)||subject&&typeof subject==="object"&&typeof subject.length==="number"}function toHex(n){if(n<16)return"0"+n.toString(16);return n.toString(16)}function utf8ToBytes(str){var byteArray=[];for(var i=0;i<str.length;i++){var b=str.charCodeAt(i);if(b<=127)byteArray.push(str.charCodeAt(i));else{var start=i;if(b>=55296&&b<=57343)i++;var h=encodeURIComponent(str.slice(start,i+1)).substr(1).split("%");for(var j=0;j<h.length;j++)byteArray.push(parseInt(h[j],16))}}return byteArray}function asciiToBytes(str){var byteArray=[];for(var i=0;i<str.length;i++){byteArray.push(str.charCodeAt(i)&255)}return byteArray}function utf16leToBytes(str){var c,hi,lo;var byteArray=[];for(var i=0;i<str.length;i++){c=str.charCodeAt(i);hi=c>>8;lo=c%256;byteArray.push(lo);byteArray.push(hi)}return byteArray}function base64ToBytes(str){return base64.toByteArray(str)}function blitBuffer(src,dst,offset,length){var pos;for(var i=0;i<length;i++){if(i+offset>=dst.length||i>=src.length)break;dst[i+offset]=src[i]}return i}function decodeUtf8Char(str){try{return decodeURIComponent(str)}catch(err){return String.fromCharCode(65533)}}function verifuint(value,max){assert(typeof value==="number","cannot write a non-number as a number");assert(value>=0,"specified a negative value for writing an unsigned value");assert(value<=max,"value is larger than maximum value for type");assert(Math.floor(value)===value,"value has a fractional component")}function verifsint(value,max,min){assert(typeof value==="number","cannot write a non-number as a number");assert(value<=max,"value larger than maximum allowed value");assert(value>=min,"value smaller than minimum allowed value");assert(Math.floor(value)===value,"value has a fractional component")}function verifIEEE754(value,max,min){assert(typeof value==="number","cannot write a non-number as a number");assert(value<=max,"value larger than maximum allowed value");assert(value>=min,"value smaller than minimum allowed value")}function assert(test,message){if(!test)throw new Error(message||"Failed assertion")}}).call(this,require("rH1JPG"),typeof self!=="undefined"?self:typeof window!=="undefined"?window:{},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/../../node_modules/buffer/index.js","/../../node_modules/buffer")},{"base64-js":1,buffer:2,ieee754:3,rH1JPG:4}],3:[function(require,module,exports){(function(process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){exports.read=function(buffer,offset,isLE,mLen,nBytes){var e,m;var eLen=nBytes*8-mLen-1;var eMax=(1<<eLen)-1;var eBias=eMax>>1;var nBits=-7;var i=isLE?nBytes-1:0;var d=isLE?-1:1;var s=buffer[offset+i];i+=d;e=s&(1<<-nBits)-1;s>>=-nBits;nBits+=eLen;for(;nBits>0;e=e*256+buffer[offset+i],i+=d,nBits-=8){}m=e&(1<<-nBits)-1;e>>=-nBits;nBits+=mLen;for(;nBits>0;m=m*256+buffer[offset+i],i+=d,nBits-=8){}if(e===0){e=1-eBias}else if(e===eMax){return m?NaN:(s?-1:1)*Infinity}else{m=m+Math.pow(2,mLen);e=e-eBias}return(s?-1:1)*m*Math.pow(2,e-mLen)};exports.write=function(buffer,value,offset,isLE,mLen,nBytes){var e,m,c;var eLen=nBytes*8-mLen-1;var eMax=(1<<eLen)-1;var eBias=eMax>>1;var rt=mLen===23?Math.pow(2,-24)-Math.pow(2,-77):0;var i=isLE?0:nBytes-1;var d=isLE?1:-1;var s=value<0||value===0&&1/value<0?1:0;value=Math.abs(value);if(isNaN(value)||value===Infinity){m=isNaN(value)?1:0;e=eMax}else{e=Math.floor(Math.log(value)/Math.LN2);if(value*(c=Math.pow(2,-e))<1){e--;c*=2}if(e+eBias>=1){value+=rt/c}else{value+=rt*Math.pow(2,1-eBias)}if(value*c>=2){e++;c/=2}if(e+eBias>=eMax){m=0;e=eMax}else if(e+eBias>=1){m=(value*c-1)*Math.pow(2,mLen);e=e+eBias}else{m=value*Math.pow(2,eBias-1)*Math.pow(2,mLen);e=0}}for(;mLen>=8;buffer[offset+i]=m&255,i+=d,m/=256,mLen-=8){}e=e<<mLen|m;eLen+=mLen;for(;eLen>0;buffer[offset+i]=e&255,i+=d,e/=256,eLen-=8){}buffer[offset+i-d]|=s*128}}).call(this,require("rH1JPG"),typeof self!=="undefined"?self:typeof window!=="undefined"?window:{},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/../../node_modules/ieee754/index.js","/../../node_modules/ieee754")},{buffer:2,rH1JPG:4}],4:[function(require,module,exports){(function(process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){var process=module.exports={};process.nextTick=function(){var canSetImmediate=typeof window!=="undefined"&&window.setImmediate;var canPost=typeof window!=="undefined"&&window.postMessage&&window.addEventListener;if(canSetImmediate){return function(f){return window.setImmediate(f)}}if(canPost){var queue=[];window.addEventListener("message",function(ev){var source=ev.source;if((source===window||source===null)&&ev.data==="process-tick"){ev.stopPropagation();if(queue.length>0){var fn=queue.shift();fn()}}},true);return function nextTick(fn){queue.push(fn);window.postMessage("process-tick","*")}}return function nextTick(fn){setTimeout(fn,0)}}();process.title="browser";process.browser=true;process.env={};process.argv=[];function noop(){}process.on=noop;process.addListener=noop;process.once=noop;process.off=noop;process.removeListener=noop;process.removeAllListeners=noop;process.emit=noop;process.binding=function(name){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(dir){throw new Error("process.chdir is not supported")}}).call(this,require("rH1JPG"),typeof self!=="undefined"?self:typeof window!=="undefined"?window:{},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/../../node_modules/process/browser.js","/../../node_modules/process")},{buffer:2,rH1JPG:4}],5:[function(require,module,exports){(function(process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){"use strict";module.exports=function(){var depthString="                                                                                ";function DataNodeBase(key){this.label=key;this.data=[""];this.rowIndexes=[];this.hasChildren=false;this.depth=0;this.height=1;this.expanded=false}DataNodeBase.prototype.isNullObject=false;DataNodeBase.prototype.getValue=function(x){return this.data[x]};DataNodeBase.prototype.prune=function(depth){this.depth=depth;this.data[0]=this.computeDepthString()};DataNodeBase.prototype.computeDepthString=function(){var string=depthString.substring(0,2+this.depth*3)+this.label;return string};DataNodeBase.prototype.computeHeight=function(){return 1};DataNodeBase.prototype.getAllRowIndexes=function(){return this.rowIndexes};DataNodeBase.prototype.computeAggregates=function(aggregator){this.applyAggregates(aggregator)};DataNodeBase.prototype.applyAggregates=function(aggregator){var hasGroupsOffset=aggregator.hasGroups()?1:0;var indexes=this.getAllRowIndexes();if(indexes.length===0){return}var aggregates=aggregator.aggregates;var data=this.data;data.length=aggregates.length+hasGroupsOffset;var sorter=aggregator.sorterInstance;sorter.indexes=indexes;for(var i=0;i<aggregates.length;i++){var aggregate=aggregates[i];data[i+hasGroupsOffset]=aggregate(sorter)}this.data=data};DataNodeBase.prototype.buildView=function(aggregator){aggregator.view.push(this)};DataNodeBase.prototype.toggleExpansionState=function(){};return DataNodeBase}()}).call(this,require("rH1JPG"),typeof self!=="undefined"?self:typeof window!=="undefined"?window:{},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/DataNodeBase.js","/")},{buffer:2,rH1JPG:4}],6:[function(require,module,exports){(function(process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){"use strict";var Map=require("./Map");var DataNodeBase=require("./DataNodeBase");module.exports=function(){var ExpandedMap={"true":"▾","false":"▸"};var depthString="                                                                                ";function DataNodeGroup(key){DataNodeBase.call(this,key);this.children=new Map}DataNodeGroup.prototype=Object.create(DataNodeBase.prototype);DataNodeGroup.prototype.prune=function(depth){this.depth=depth;this.children=this.children.values;for(var i=0;i<this.children.length;i++){var child=this.children[i];child.prune(this.depth+1)}this.data[0]=this.computeDepthString()};DataNodeGroup.prototype.computeDepthString=function(){var icon=ExpandedMap[this.expanded+""];var string=depthString.substring(0,this.depth*3)+icon+" "+this.label;return string};DataNodeGroup.prototype.getAllRowIndexes=function(){if(this.rowIndexes.length===0){this.rowIndexes=this.computeAllRowIndexes()}return this.rowIndexes};DataNodeGroup.prototype.computeAllRowIndexes=function(){var result=[];for(var i=0;i<this.children.length;i++){var child=this.children[i];var childIndexes=child.getAllRowIndexes();Array.prototype.splice.apply(result,[result.length,0].concat(childIndexes))}return result};DataNodeGroup.prototype.toggleExpansionState=function(aggregator){this.expanded=!this.expanded;
this.data[0]=this.computeDepthString();if(this.expanded){this.computeAggregates(aggregator)}};DataNodeGroup.prototype.computeAggregates=function(aggregator){this.applyAggregates(aggregator);if(!this.expanded){return}for(var i=0;i<this.children.length;i++){this.children[i].computeAggregates(aggregator)}};DataNodeGroup.prototype.buildView=function(aggregator){aggregator.view.push(this);if(this.expanded){for(var i=0;i<this.children.length;i++){var child=this.children[i];child.buildView(aggregator)}}};DataNodeGroup.prototype.computeHeight=function(){var height=1;if(!this.expanded){this.height=1}else{for(var i=0;i<this.children.length;i++){height=height+this.children[i].computeHeight()}this.height=height}return this.height};return DataNodeGroup}()}).call(this,require("rH1JPG"),typeof self!=="undefined"?self:typeof window!=="undefined"?window:{},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/DataNodeGroup.js","/")},{"./DataNodeBase":5,"./Map":16,buffer:2,rH1JPG:4}],7:[function(require,module,exports){(function(process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){"use strict";var DataNodeBase=require("./DataNodeBase");module.exports=function(){function DataNodeLeaf(key){DataNodeBase.call(this,key)}DataNodeLeaf.prototype=Object.create(DataNodeBase.prototype);DataNodeLeaf.prototype.prune=function(depth){this.depth=depth;this.data[0]=this.computeDepthString()};DataNodeLeaf.prototype.computeHeight=function(){return 1};DataNodeLeaf.prototype.getAllRowIndexes=function(){return this.rowIndexes};DataNodeLeaf.prototype.computeAggregates=function(aggregator){this.applyAggregates(aggregator)};DataNodeLeaf.prototype.buildView=function(aggregator){aggregator.view.push(this)};return DataNodeLeaf}()}).call(this,require("rH1JPG"),typeof self!=="undefined"?self:typeof window!=="undefined"?window:{},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/DataNodeLeaf.js","/")},{"./DataNodeBase":5,buffer:2,rH1JPG:4}],8:[function(require,module,exports){(function(process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){"use strict";var DataNodeGroup=require("./DataNodeGroup");module.exports=function(){function DataNodeTree(key){DataNodeGroup.call(this,key);this.height=0;this.expanded=true}DataNodeTree.prototype=Object.create(DataNodeGroup.prototype);DataNodeTree.prototype.prune=function(){this.children=this.children.values;for(var i=0;i<this.children.length;i++){var child=this.children[i];child.prune(0)}};DataNodeTree.prototype.buildView=function(aggregator){for(var i=0;i<this.children.length;i++){var child=this.children[i];child.buildView(aggregator)}};DataNodeTree.prototype.computeHeight=function(){var height=1;for(var i=0;i<this.children.length;i++){height=height+this.children[i].computeHeight()}this.height=height;return this.height};return DataNodeTree}()}).call(this,require("rH1JPG"),typeof self!=="undefined"?self:typeof window!=="undefined"?window:{},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/DataNodeTree.js","/")},{"./DataNodeGroup":6,buffer:2,rH1JPG:4}],9:[function(require,module,exports){(function(process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){"use strict";var DataSourceSorter=require("./DataSourceSorter");var DataNodeTree=require("./DataNodeTree");var DataNodeGroup=require("./DataNodeGroup");var DataNodeLeaf=require("./DataNodeLeaf");module.exports=function(){var headerify=function(string){var pieces=string.replace(/[_-]/g," ").replace(/[A-Z]/g," $&").split(" ").map(function(s){return(s.charAt(0).toUpperCase()+s.slice(1)).trim()});pieces=pieces.filter(function(e){return e.length!==0});return pieces.join(" ").trim()};function DataSourceAggregator(dataSource){this.tree=new DataNodeTree("Totals");this.indexes=[];this.dataSource=dataSource;this.aggregates=[];this.headers=[];this.groupBys=[];this.view=[];this.sorterInstance={};this.presortGroups=true;this.lastAggregate={};this.setAggregates({})}DataSourceAggregator.prototype.isNullObject=false;DataSourceAggregator.prototype.setAggregates=function(aggregations){this.lastAggregate=aggregations;var props=[];var i;this.clearAggregations();this.headers.length=0;for(var key in aggregations){props.push([key,aggregations[key]])}if(this.hasGroups()){this.headers.push("Tree")}for(i=0;i<props.length;i++){var agg=props[i];this.addAggregate(agg[0],agg[1])}};DataSourceAggregator.prototype.addAggregate=function(label,func){this.headers.push(headerify(label));this.aggregates.push(func)};DataSourceAggregator.prototype.setGroupBys=function(columnIndexArray){this.groupBys.length=0;for(var i=0;i<columnIndexArray.length;i++){this.groupBys.push(columnIndexArray[i])}this.setAggregates(this.lastAggregate)};DataSourceAggregator.prototype.addGroupBy=function(index){this.groupBys.push(index)};DataSourceAggregator.prototype.hasGroups=function(){return this.groupBys.length>0};DataSourceAggregator.prototype.hasAggregates=function(){return this.aggregates.length>0};DataSourceAggregator.prototype.apply=function(){this.buildGroupTree()};DataSourceAggregator.prototype.clearGroups=function(){this.groupBys.length=0};DataSourceAggregator.prototype.clearAggregations=function(){this.aggregates.length=0;this.headers.length=0};DataSourceAggregator.prototype.buildGroupTree=function(){var c,r,g,value,createFunc;var createBranch=function(key,map){value=new DataNodeGroup(key);map.set(key,value);return value};var createLeaf=function(key,map){value=new DataNodeLeaf(key);map.set(key,value);return value};var groupBys=this.groupBys;var source=this.dataSource;var rowCount=source.getRowCount();if(this.presortGroups){for(c=0;c<groupBys.length;c++){g=groupBys[groupBys.length-c-1];source=new DataSourceSorter(source);source.sortOn(g)}}var tree=this.tree=new DataNodeTree("Totals");var path=tree;var leafDepth=groupBys.length-1;for(r=0;r<rowCount;r++){for(c=0;c<groupBys.length;c++){g=groupBys[c];value=source.getValue(g,r);createFunc=c===leafDepth?createLeaf:createBranch;path=path.children.getIfAbsent(value,createFunc)}path.rowIndexes.push(r);path=tree}this.sorterInstance=new DataSourceSorter(source);tree.prune();this.tree.computeAggregates(this);this.buildView()};DataSourceAggregator.prototype.buildView=function(){this.view.length=0;this.tree.computeHeight();this.tree.buildView(this)};DataSourceAggregator.prototype.viewMakesSense=function(){return this.hasAggregates()};DataSourceAggregator.prototype.getValue=function(x,y){if(!this.viewMakesSense()){return this.dataSource.getValue(x,y)}var row=this.view[y];if(!row){return null}return row.getValue(x)};DataSourceAggregator.prototype.setValue=function(x,y,value){if(!this.viewMakesSense()){return this.dataSource.setValue(x,y,value)}};DataSourceAggregator.prototype.getColumnCount=function(){if(!this.viewMakesSense()){return this.dataSource.getColumnCount()}var colCount=this.getHeaders().length;return colCount};DataSourceAggregator.prototype.getRowCount=function(){if(!this.viewMakesSense()){return this.dataSource.getRowCount()}return this.view.length};DataSourceAggregator.prototype.click=function(y){var group=this.view[y];group.toggleExpansionState(this);this.buildView()};DataSourceAggregator.prototype.getHeaders=function(){if(!this.viewMakesSense()){return this.dataSource.getHeaders()}return this.headers};DataSourceAggregator.prototype.setHeaders=function(headers){this.dataSource.setHeaders(headers)};DataSourceAggregator.prototype.getFields=function(){return this.dataSource.getFields()};DataSourceAggregator.prototype.setFields=function(fields){return this.dataSource.setFields(fields)};DataSourceAggregator.prototype.getGrandTotals=function(){var view=this.tree;return[view.data]};DataSourceAggregator.prototype.getRow=function(y){if(!this.viewMakesSense()){return this.dataSource.getRow(y)}var rollups=this.view[y];if(!rollups){return this.tree}return rollups};DataSourceAggregator.prototype.setData=function(arrayOfUniformObjects){this.dataSource.setData(arrayOfUniformObjects);this.apply()};return DataSourceAggregator}()}).call(this,require("rH1JPG"),typeof self!=="undefined"?self:typeof window!=="undefined"?window:{},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/DataSourceAggregator.js","/")},{"./DataNodeGroup":6,"./DataNodeLeaf":7,"./DataNodeTree":8,"./DataSourceSorter":13,buffer:2,rH1JPG:4}],10:[function(require,module,exports){(function(process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){"use strict";module.exports=function(){function DataSourceDecorator(dataSource){this.dataSource=dataSource;this.indexes=[]}DataSourceDecorator.prototype.isNullObject=false;DataSourceDecorator.prototype.transposeY=function(y){if(this.indexes.length!==0){return this.indexes[y]}return y};DataSourceDecorator.prototype.getValue=function(x,y){var value=this.dataSource.getValue(x,this.transposeY(y));return value};DataSourceDecorator.prototype.getRow=function(y){return this.dataSource.getRow(this.transposeY(y))};DataSourceDecorator.prototype.setValue=function(x,y,value){this.dataSource.setValue(x,this.transposeY(y),value)};DataSourceDecorator.prototype.getColumnCount=function(){return this.dataSource.getColumnCount()};DataSourceDecorator.prototype.getFields=function(){return this.dataSource.getFields()};DataSourceDecorator.prototype.setFields=function(fields){return this.dataSource.setFields(fields)};DataSourceDecorator.prototype.getRowCount=function(){if(this.indexes.length!==0){return this.indexes.length}return this.dataSource.getRowCount()};DataSourceDecorator.prototype.setHeaders=function(headers){return this.dataSource.setHeaders(headers)};DataSourceDecorator.prototype.getHeaders=function(){return this.dataSource.getHeaders()};DataSourceDecorator.prototype.getGrandTotals=function(){return};DataSourceDecorator.prototype.initializeIndexVector=function(){var rowCount=this.dataSource.getRowCount();var indexVector=new Array(rowCount);for(var r=0;r<rowCount;r++){indexVector[r]=r}this.indexes=indexVector};DataSourceDecorator.prototype.setData=function(arrayOfUniformObjects){this.dataSource.setData(arrayOfUniformObjects)};return DataSourceDecorator}()}).call(this,require("rH1JPG"),typeof self!=="undefined"?self:typeof window!=="undefined"?window:{},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/DataSourceDecorator.js","/")},{buffer:2,rH1JPG:4}],11:[function(require,module,exports){(function(process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){"use strict";var DataSourceDecorator=require("./DataSourceDecorator");module.exports=function(){function DataSourceFilter(dataSource){DataSourceDecorator.call(this,dataSource,false);this.filters=[]}DataSourceFilter.prototype=Object.create(DataSourceDecorator.prototype);DataSourceFilter.prototype.addFilter=function(columnIndex,filter){filter.columnIndex=columnIndex;this.filters.push(filter)};DataSourceFilter.prototype.setFilter=function(columnIndex,filter){filter.columnIndex=columnIndex;this.filters.push(filter)};DataSourceFilter.prototype.clearFilters=function(){this.filters.length=0;this.indexes.length=0};DataSourceFilter.prototype.applyFilters=function(){if(this.filters.length===0){this.indexes.length=0;return}var indexes=this.indexes;indexes.length=0;var count=this.dataSource.getRowCount();for(var r=0;r<count;r++){if(this.applyFiltersTo(r)){indexes.push(r)}}};DataSourceFilter.prototype.applyFiltersTo=function(r){var filters=this.filters;var isFiltered=true;for(var f=0;f<filters.length;f++){var filter=filters[f];var rowObject=this.dataSource.getRow(r);isFiltered=isFiltered&&filter(this.dataSource.getValue(filter.columnIndex,r),rowObject,r)}return isFiltered};DataSourceFilter.prototype.getRowCount=function(){if(this.indexes.length!==0){return this.indexes.length}if(this.filters.length!==0){return 0}return this.dataSource.getRowCount()};return DataSourceFilter}()}).call(this,require("rH1JPG"),typeof self!=="undefined"?self:typeof window!=="undefined"?window:{},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/DataSourceFilter.js","/")},{"./DataSourceDecorator":10,buffer:2,rH1JPG:4}],12:[function(require,module,exports){(function(process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){"use strict";var DataSourceDecorator=require("./DataSourceDecorator");module.exports=function(){function DataSourceGlobalFilter(dataSource){DataSourceDecorator.call(this,dataSource,false);this.filter=null}DataSourceGlobalFilter.prototype=Object.create(DataSourceDecorator.prototype);DataSourceGlobalFilter.prototype.setFilter=function(filter){this.filter=filter};DataSourceGlobalFilter.prototype.clearFilters=function(){this.filter=null;this.indexes.length=0};DataSourceGlobalFilter.prototype.getRowCount=function(){if(this.indexes.length!==0){return this.indexes.length}if(this.filter){return 0}return this.dataSource.getRowCount()};DataSourceGlobalFilter.prototype.applyFilters=function(){if(!this.filter){this.indexes.length=0;return}var indexes=this.indexes;indexes.length=0;var count=this.dataSource.getRowCount();for(var r=0;r<count;r++){if(this.applyFilterTo(r)){indexes.push(r)}}};DataSourceGlobalFilter.prototype.applyFilterTo=function(r){var isFiltered=false;var filter=this.filter;var colCount=this.getColumnCount();var rowObject=this.dataSource.getRow(r);for(var i=0;i<colCount;i++){isFiltered=isFiltered||filter(this.dataSource.getValue(i,r),rowObject,r);if(isFiltered){return true}}return false};return DataSourceGlobalFilter}()}).call(this,require("rH1JPG"),typeof self!=="undefined"?self:typeof window!=="undefined"?window:{},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/DataSourceGlobalFilter.js","/")},{"./DataSourceDecorator":10,buffer:2,rH1JPG:4}],13:[function(require,module,exports){(function(process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){"use strict";var Utils=require("./Utils.js");var DataSourceDecorator=require("./DataSourceDecorator");var valueOrFunctionExecute=function(valueOrFunction){var isFunction=(typeof valueOrFunction)[0]==="f";var result=isFunction?valueOrFunction():valueOrFunction;return result};module.exports=function(){function DataSourceSorter(dataSource){DataSourceDecorator.call(this,dataSource);this.descendingSort=false}DataSourceSorter.prototype=Object.create(DataSourceDecorator.prototype);DataSourceSorter.prototype.sortOn=function(columnIndex,sortType){if(sortType===0){this.indexes.length=0;return}this.initializeIndexVector();var self=this;Utils.stableSort(this.indexes,function(index){var val=self.dataSource.getValue(columnIndex,index);val=valueOrFunctionExecute(val);return val},sortType)};return DataSourceSorter}()}).call(this,require("rH1JPG"),typeof self!=="undefined"?self:typeof window!=="undefined"?window:{},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/DataSourceSorter.js","/")},{"./DataSourceDecorator":10,"./Utils.js":17,buffer:2,rH1JPG:4}],14:[function(require,module,exports){(function(process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){"use strict";var DataSourceDecorator=require("./DataSourceDecorator");var DataSourceSorter=require("./DataSourceSorter");module.exports=function(){function DataSourceSorterComposite(dataSource){DataSourceDecorator.call(this,dataSource);this.sorts=[];this.last=this.dataSource}DataSourceSorterComposite.prototype=Object.create(DataSourceDecorator.prototype);DataSourceSorterComposite.prototype.sortOn=function(columnIndex,sortType){this.sorts.push([columnIndex,sortType])};DataSourceSorterComposite.prototype.applySorts=function(){var sorts=this.sorts;var each=this.dataSource;for(var i=0;i<sorts.length;i++){var sort=sorts[i];each=new DataSourceSorter(each);each.sortOn(sort[0],sort[1])}this.last=each};DataSourceSorterComposite.prototype.clearSorts=function(){this.sorts.length=0;this.last=this.dataSource};DataSourceSorterComposite.prototype.getValue=function(x,y){return this.last.getValue(x,y)};DataSourceSorterComposite.prototype.setValue=function(x,y,value){this.last.setValue(x,y,value)};return DataSourceSorterComposite}()}).call(this,require("rH1JPG"),typeof self!=="undefined"?self:typeof window!=="undefined"?window:{},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/DataSourceSorterComposite.js","/")},{"./DataSourceDecorator":10,"./DataSourceSorter":13,buffer:2,rH1JPG:4}],15:[function(require,module,exports){(function(process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){"use strict";module.exports=function(){var headerify=function(string){var pieces=string.replace(/[_-]/g," ").replace(/[A-Z]/g," $&").split(" ").map(function(s){return s.charAt(0).toUpperCase()+s.slice(1)});return pieces.join(" ")};var computeFieldNames=function(object){if(!object){return[]}var fields=[].concat(Object.getOwnPropertyNames(object).filter(function(e){return e.substr(0,2)!=="__"}));return fields};function JSDataSource(data,fields){this.fields=fields||computeFieldNames(data[0]);this.headers=[];this.data=data}JSDataSource.prototype.isNullObject=false;JSDataSource.prototype.getValue=function(x,y){var row=this.data[y];if(!row){return null}var value=row[this.fields[x]];return value};JSDataSource.prototype.getRow=function(y){return this.data[y]};JSDataSource.prototype.setValue=function(x,y,value){this.data[y][this.fields[x]]=value};JSDataSource.prototype.getColumnCount=function(){return this.getFields().length};JSDataSource.prototype.getRowCount=function(){return this.data.length};JSDataSource.prototype.getFields=function(){return this.fields};JSDataSource.prototype.getHeaders=function(){if(!this.headers||this.headers.length===0){this.headers=this.getDefaultHeaders().map(function(each){return headerify(each)})}return this.headers};JSDataSource.prototype.getDefaultHeaders=function(){return this.getFields()};JSDataSource.prototype.setFields=function(fields){this.fields=fields};JSDataSource.prototype.setHeaders=function(headers){this.headers=headers};JSDataSource.prototype.getGrandTotals=function(){return};JSDataSource.prototype.setData=function(arrayOfUniformObjects){this.data=arrayOfUniformObjects};return JSDataSource}()}).call(this,require("rH1JPG"),typeof self!=="undefined"?self:typeof window!=="undefined"?window:{},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/JSDataSource.js","/")},{buffer:2,rH1JPG:4}],16:[function(require,module,exports){(function(process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){"use strict";module.exports=function(){var oidPrefix=".~.#%_";var counter=0;var hash=function(key){var typeOf=typeof key;switch(typeOf){case"number":return oidPrefix+typeOf+"_"+key;case"string":return oidPrefix+typeOf+"_"+key;case"boolean":return oidPrefix+typeOf+"_"+key;case"symbol":return oidPrefix+typeOf+"_"+key;case"undefined":return oidPrefix+"undefined";case"object":if(key.___finhash){return key.___finhash}key.___finhash=oidPrefix+counter++;return key.___finhash;case"function":if(key.___finhash){return key.___finhash}key.___finhash=oidPrefix+counter++;return key.___finhash}};var is=Object.is||function(a,b){return a===b?a!==0||1/a==1/b:a!=a&&b!=b};var betterIndexOf=function(arr,value){if(value!=value||value===0){for(var i=arr.length;i--&&!is(arr[i],value);){}}else{i=[].indexOf.call(arr,value)}return i};function Mappy(){this.keys=[];this.data={};this.values=[]}Mappy.prototype.set=function(key,value){var hashCode=hash(key);if(this.data[hashCode]===undefined){this.keys.push(key);this.values.push(value)}this.data[hashCode]=value};Mappy.prototype.get=function(key){var hashCode=hash(key);return this.data[hashCode]};Mappy.prototype.getIfAbsent=function(key,ifAbsentFunc){var value=this.get(key);if(value===undefined){value=ifAbsentFunc(key,this)}return value};Mappy.prototype.size=function(){return this.keys.length};Mappy.prototype.clear=function(){this.keys.length=0;this.data={}};Mappy.prototype.delete=function(key){var hashCode=hash(key);if(this.data[hashCode]===undefined){return}var index=betterIndexOf(this.keys,key);this.keys.splice(index,1);this.values.splice(index,1);delete this.data[hashCode]};Mappy.prototype.forEach=function(func){var keys=this.keys;for(var i=0;i<keys.length;i++){var key=keys[i];var value=this.get(key);func(value,key,this)}};Mappy.prototype.map=function(func){var keys=this.keys;var newMap=new Mappy;for(var i=0;i<keys.length;i++){var key=keys[i];var value=this.get(key);var transformed=func(value,key,this);newMap.set(key,transformed)}return newMap};Mappy.prototype.copy=function(){var keys=this.keys;var newMap=new Mappy;for(var i=0;i<keys.length;i++){var key=keys[i];var value=this.get(key);newMap.set(key,value)}return newMap};return Mappy}()}).call(this,require("rH1JPG"),typeof self!=="undefined"?self:typeof window!=="undefined"?window:{},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/Map.js","/")},{buffer:2,rH1JPG:4}],17:[function(require,module,exports){(function(process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){"use strict";var stableSort=require("./stableSort.js");var Map=require("./Map.js");module.exports=function(){return{stableSort:stableSort,Map:Map}}()}).call(this,require("rH1JPG"),typeof self!=="undefined"?self:typeof window!=="undefined"?window:{},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/Utils.js","/")},{"./Map.js":16,"./stableSort.js":21,buffer:2,rH1JPG:4}],18:[function(require,module,exports){(function(process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){"use strict";module.exports=function(){return{count:function(){return function(group){var rows=group.getRowCount();return rows}},sum:function(columIndex){return function(group){var sum=0;var rows=group.getRowCount();for(var r=0;r<rows;r++){sum=sum+group.getValue(columIndex,r)}return sum}},min:function(columIndex){return function(group){var min=Infinity;var rows=group.getRowCount();for(var r=0;r<rows;r++){min=Math.min(min,group.getValue(columIndex,r))}return min}},max:function(columIndex){return function(group){var max=-Infinity;var rows=group.getRowCount();for(var r=0;r<rows;r++){max=Math.max(max,group.getValue(columIndex,r))}return max}},avg:function(columIndex){return function(group){var sum=0;var rows=group.getRowCount();for(var r=0;r<rows;r++){sum=sum+group.getValue(columIndex,r)}return sum/rows}},first:function(columIndex){return function(group){return group.getValue(columIndex,0)}},last:function(columIndex){return function(group){var rows=group.getRowCount();return group.getValue(columIndex,rows-1)}},stddev:function(columIndex){return function(group){var r;var sum=0;var rows=group.getRowCount();for(r=0;r<rows;r++){sum=sum+group.getValue(columIndex,r)}var mean=sum/rows;var variance=0;for(r=0;r<rows;r++){var dev=group.getValue(columIndex,r)-mean;variance=variance+dev*dev}var stddev=Math.sqrt(variance/rows);return stddev}}}}()}).call(this,require("rH1JPG"),typeof self!=="undefined"?self:typeof window!=="undefined"?window:{},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/aggregations.js","/")},{buffer:2,rH1JPG:4}],19:[function(require,module,exports){(function(process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){"use strict";var JSDataSource=require("./JSDataSource");var DataSourceSorter=require("./DataSourceSorter");var DataSourceSorterComposite=require("./DataSourceSorterComposite");var DataSourceFilter=require("./DataSourceFilter");var DataSourceGlobalFilter=require("./DataSourceGlobalFilter");var DataSourceAggregator=require("./DataSourceAggregator");var aggregations=require("./aggregations");module.exports=function(){return{JSDataSource:JSDataSource,DataSourceSorter:DataSourceSorter,DataSourceSorterComposite:DataSourceSorterComposite,DataSourceFilter:DataSourceFilter,DataSourceGlobalFilter:DataSourceGlobalFilter,DataSourceAggregator:DataSourceAggregator,aggregations:aggregations}}()}).call(this,require("rH1JPG"),typeof self!=="undefined"?self:typeof window!=="undefined"?window:{},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/analytics.js","/")},{"./DataSourceAggregator":9,"./DataSourceFilter":11,"./DataSourceGlobalFilter":12,"./DataSourceSorter":13,"./DataSourceSorterComposite":14,"./JSDataSource":15,"./aggregations":18,buffer:2,rH1JPG:4}],20:[function(require,module,exports){(function(process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){"use strict";if(!window.fin){window.fin={}}if(!window.fin.analytics){window.fin.analytics=require("./analytics.js")}}).call(this,require("rH1JPG"),typeof self!=="undefined"?self:typeof window!=="undefined"?window:{},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/fake_46f7b2e9.js","/")},{"./analytics.js":19,buffer:2,rH1JPG:4}],21:[function(require,module,exports){(function(process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){"use strict";var stabilize=function(comparator,descending){return function(arr1,arr2){var x=arr1[0];var y=arr2[0];if(x===y){x=descending?arr2[1]:arr1[1];y=descending?arr1[1]:arr2[1]}else{if(y===null){return-1}if(x===null){return 1}}return comparator(x,y)}};var ascendingNumbers=function(x,y){return x-y};var descendingNumbers=function(x,y){return y-x};var ascendingAllOthers=function(x,y){return x<y?-1:1};var descendingAllOthers=function(x,y){return y<x?-1:1};var ascending=function(typeOfData){if(typeOfData==="number"){return stabilize(ascendingNumbers,false)}return stabilize(ascendingAllOthers,false)};var descending=function(typeOfData){if(typeOfData==="number"){return stabilize(descendingNumbers,true)}return stabilize(descendingAllOthers,true)};module.exports=function(){function sort(indexVector,dataSource,sortType){var compare,i;if(indexVector.length===0){return}if(sortType===undefined){sortType=1}if(sortType===0){return}var typeOfData=typeof dataSource(0);compare=sortType===1?ascending(typeOfData):descending(typeOfData);var tmp=new Array(indexVector.length);for(i=0;i<indexVector.length;i++){tmp[i]=[dataSource(i),i]}tmp.sort(compare);for(i=0;i<indexVector.length;i++){indexVector[i]=tmp[i][1]}}return sort}()}).call(this,require("rH1JPG"),typeof self!=="undefined"?self:typeof window!=="undefined"?window:{},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/stableSort.js","/")},{buffer:2,rH1JPG:4}]},{},[20]);</script><script>"use strict";(function(module){function RangeSelectionModel(){this.selection=[];this.states=[];this.storeState=function(){var sels=this.selection;var state=[];var copy;for(var i=0;i<sels.length;i++){copy=[].concat(sels[i]);state.push(copy)}this.states.push(state)}}RangeSelectionModel.prototype={select:function(start,stop){this.storeState();var run=makeRun(start,stop);var splicer=[0,1];this.selection.forEach(function(each){if(overlaps(each,run)||abuts(each,run)){run=merge(each,run)}else{splicer.push(each)}});splicer.push(run);splicer[1]=this.selection.length;this.selection.splice.apply(this.selection,splicer);return this},deselect:function(start,stop){var run=makeRun(start,stop);var splicer=[0,0];this.selection.forEach(function(each){if(overlaps(each,run)){var pieces=subtract(each,run);splicer=splicer.concat(pieces)}else{splicer.push(each)}});splicer[1]=this.selection.length;this.selection.splice.apply(this.selection,splicer);return this},clear:function(){this.states.length=0;this.selection.length=0;return this},clearMostRecentSelection:function(){if(this.states.length===0){return}this.selection=this.states.pop()},isSelected:function(cell){return this.selection.some(function(each){return each[0]<=cell&&cell<=each[1]})},isEmpty:function(){return this.selection.length===0},getSelections:function(){var result=[];this.selection.forEach(function(each){for(var i=each[0];i<=each[1];i++){result.push(i)}});result.sort(function(a,b){return a-b});return result}};function makeRun(start,stop){return start instanceof Array?makeRun.apply(this,start):stop===undefined?[start,start]:start<=stop?[start,stop]:[stop,start]}function overlaps(run1,run2){return run1[0]<=run2[0]&&run2[0]<=run1[1]||run1[0]<=run2[1]&&run2[1]<=run1[1]||run2[0]<run1[0]&&run1[1]<run2[1]}function abuts(run1,run2){return run1[1]===run2[0]-1||run2[1]===run1[0]-1}function subtract(minuend,subtrahend){var m0=minuend[0];var m1=minuend[1];var s0=subtrahend[0];var s1=subtrahend[1];var result=[];if(s0<=m0&&s1<m1){result.push([s1+1,m1])}else if(s0>m0&&s1>=m1){result.push([m0,s0-1])}else if(m0<s0&&s1<m1){result.push([m0,s0-1]);result.push([s1+1,m1])}else if(s1<m0||s0>m1){result.push(minuend)}return result}function merge(run1,run2){var min=Math.min(Math.min.apply(Math,run1),Math.min.apply(Math,run2));var max=Math.max(Math.max.apply(Math,run1),Math.max.apply(Math,run2));return[min,max]}module.exports=RangeSelectionModel})(typeof module==="object"&&module||(window.RangeSelectionModel={}),typeof module==="object"&&module.exports||(window.RangeSelectionModel.exports={}))||(typeof module==="object"||(window.RangeSelectionModel=window.RangeSelectionModel.exports));</script><script>"use strict";(function(module){function FinBar(options){var bound=this._bound={};for(key in handlersToBeBound){bound[key]=handlersToBeBound[key].bind(this)}var thumb=document.createElement("div");thumb.classList.add("thumb");thumb.onclick=bound.shortStop;thumb.onmouseover=bound.onmouseover;this.thumb=thumb;var bar=document.createElement("div");bar.classList.add("finbar-vertical");bar.appendChild(thumb);if(this.paging){bar.onclick=bound.onclick}this.bar=bar;options=options||{};this.orientation="vertical";this._min=this._index=0;this._max=100;for(var key in options){if(options.hasOwnProperty(key)){var option=options[key];switch(key){case"cssStylesheetReferenceElement":cssInjector(option);break;case"index":this._index=option;break;case"range":validRange(option);this._min=option.min;this._max=option.max;this.contentSize=option.max-option.min+1;break;default:if(key.charAt(0)!=="_"&&typeof FinBar.prototype[key]!=="function"){this[key]=option}break}}}}FinBar.prototype={set orientation(orientation){if(orientation===this._orientation){return}this._orientation=orientation;this.oh=orientationHashes[this._orientation];if(!this.oh){error("Invalid value for `options._orientation.")}this.deltaProp=this.oh.delta;this.bar.className=this.bar.className.replace(/(vertical|horizontal)/g,orientation);if(this.bar.style.cssText||this.thumb.style.cssText){this.bar.removeAttribute("style");this.thumb.removeAttribute("style");this.resize()}},get orientation(){return this._orientation},onchange:null,set classPrefix(prefix){if(this._classPrefix){this.bar.classList.remove(this._classPrefix+this.orientation)}this._classPrefix=prefix;if(prefix){this.bar.classList.add(prefix+"-"+this.orientation)}},get classPrefix(){return this._classPrefix},increment:1,barStyles:null,set style(styles){var keys=Object.keys(styles=extend({},styles,this._auxStyles));if(keys.length){var bar=this.bar,barRect=bar.getBoundingClientRect(),container=this.container||bar.parentElement,containerRect=container.getBoundingClientRect(),oh=this.oh;bar.removeAttribute("style");keys.forEach(function(key){var val=styles[key];if(key in oh){key=oh[key]}if(!isNaN(Number(val))){val=(val||0)+"px"}else if(/%$/.test(val)){var oriented=axis[key],margins=barRect[oriented.marginLeading]+barRect[oriented.marginTrailing];if(margins){val=parseInt(val,10)/100*containerRect[oriented.size]-margins+"px"}}bar.style[key]=val})}},paging:true,set range(range){validRange(range);this._min=range.min;this._max=range.max;this.contentSize=range.max-range.min+1;this.index=this.index},get range(){return{min:this._min,max:this._max}},set index(idx){idx=Math.min(this._max,Math.max(this._min,idx));this._setScroll(idx)},get index(){return this._index},_setScroll:function(idx,scaled){this._index=idx;if(this.testPanelItem&&this.testPanelItem.index instanceof Element){this.testPanelItem.index.innerHTML=Math.round(idx)}if(this.onchange){this.onchange.call(this,Math.round(idx))}if(scaled===undefined){scaled=(idx-this._min)/(this._max-this._min)*this._thumbMax}this.thumb.style[this.oh.leading]=scaled+"px"},scrollRealContent:function(idx){var containerRect=this.content.parentElement.getBoundingClientRect(),sizeProp=this.oh.size,maxScroll=Math.max(0,this.content[sizeProp]-containerRect[sizeProp]),scroll=(idx-this._min)/(this._max-this._min)*maxScroll;this.content.style[this.oh.leading]=-scroll+"px"},resize:function(increment,barStyles){var bar=this.bar;if(!bar.parentNode){return}var container=this.container||bar.parentElement,containerRect=container.getBoundingClientRect();if(typeof increment==="object"){barStyles=increment;increment=undefined}this.style=this.barStyles=barStyles||this.barStyles;if(this.content){if(!this.onchange){this.onchange=this.scrollRealContent;this.contentSize=this.content[this.oh.size];this._min=0;this._max=this.contentSize-1}}if(this.onchange===this.scrollRealContent){this.containerSize=containerRect[this.oh.size];this.increment=this.containerSize/(this.contentSize-this.containerSize)*(this._max-this._min)}else{this.containerSize=1;this.increment=increment||this.increment}var index=this.index;this.testPanelItem=this.testPanelItem||this._addTestPanelItem();this._setThumbSize();this.index=index;if(this.deltaProp!==null){container.addEventListener("wheel",this._bound.onwheel)}return this},shortenBy:function(otherFinBar){return this.shortenEndBy("trailing",otherFinBar)},foreshortenBy:function(otherFinBar){return this.shortenEndBy("leading",otherFinBar)},shortenEndBy:function(whichEnd,otherFinBar){if(!otherFinBar){delete this._auxStyles}else if(otherFinBar instanceof FinBar&&otherFinBar.orientation!==this.orientation){var otherStyle=window.getComputedStyle(otherFinBar.bar),ooh=orientationHashes[otherFinBar.orientation];this._auxStyles={};this._auxStyles[whichEnd]=otherStyle[ooh.thickness]}return this},_setThumbSize:function(){var oh=this.oh,thumbComp=window.getComputedStyle(this.thumb),thumbMarginLeading=parseInt(thumbComp[oh.marginLeading]),thumbMarginTrailing=parseInt(thumbComp[oh.marginTrailing]),thumbMargins=thumbMarginLeading+thumbMarginTrailing,barSize=this.bar.getBoundingClientRect()[oh.size],thumbSize=Math.max(20,barSize*this.containerSize/this.contentSize);if(this.containerSize<this.contentSize){this.bar.style.visibility="visible";this.thumb.style[oh.size]=thumbSize+"px"}else{this.bar.style.visibility="hidden"}this._thumbMax=barSize-thumbSize-thumbMargins;this._thumbMarginLeading=thumbMarginLeading},remove:function(){this._removeEvt("mousedown");this._removeEvt("mousemove");this._removeEvt("mouseup");(this.container||this.bar.parentElement)._removeEvt("wheel",this._bound.onwheel);this.bar.onclick=this.thumb.onclick=this.thumb.onmouseover=this.thumb.transitionend=this.thumb.onmouseout=null;this.bar.remove()},_addTestPanelItem:function(){var testPanelItem,testPanelElement=document.querySelector("."+this._classPrefix+".test-panel")||document.querySelector(".test-panel");if(testPanelElement){var testPanelItemPartNames=["mousedown","mousemove","mouseup","index"],item=document.createElement("li");testPanelItemPartNames.forEach(function(partName){item.innerHTML+='<span class="'+partName+'">'+partName.replace("mouse","")+"</span>"});testPanelElement.appendChild(item);testPanelItem={};testPanelItemPartNames.forEach(function(partName){testPanelItem[partName]=item.getElementsByClassName(partName)[0]})}return testPanelItem},_addEvt:function(evtName){var spy=this.testPanelItem&&this.testPanelItem[evtName];if(spy){spy.classList.add("listening")}window.addEventListener(evtName,this._bound["on"+evtName])},_removeEvt:function(evtName){var spy=this.testPanelItem&&this.testPanelItem[evtName];if(spy){spy.classList.remove("listening")}window.removeEventListener(evtName,this._bound["on"+evtName])}};function extend(obj){for(var i=1;i<arguments.length;++i){var objn=arguments[i];if(objn){for(var key in objn){obj[key]=objn[key]}}}return obj}function validRange(range){var keys=Object.keys(range),valid=keys.length===2&&typeof range.min==="number"&&typeof range.max==="number"&&range.min<=range.max;if(!valid){error("Invalid .range object.")}}var handlersToBeBound={shortStop:function(evt){evt.stopPropagation()},onwheel:function(evt){this.index+=evt[this.deltaProp];evt.stopPropagation();evt.preventDefault()},onclick:function(evt){var thumbBox=this.thumb.getBoundingClientRect(),goingUp=evt[this.oh.coordinate]<thumbBox[this.oh.leading];if(typeof this.paging==="object"){this.index=this.paging[goingUp?"up":"down"](Math.round(this.index))}else{this.index+=goingUp?-this.increment:this.increment}this.thumb.classList.add("hover");var self=this;this.thumb.addEventListener("transitionend",function waitForIt(){this.removeEventListener("transitionend",waitForIt);self._bound.onmouseup(evt)});evt.stopPropagation()},onmouseover:function(){this.thumb.classList.add("hover");this.thumb.onmouseout=this._bound.onmouseout;this._addEvt("mousedown")},onmouseout:function(){this._removeEvt("mousedown");this.thumb.onmouseover=this._bound.onmouseover;this.thumb.classList.remove("hover")},onmousedown:function(evt){this._removeEvt("mousedown");this.thumb.onmouseover=this.thumb.onmouseout=null;var thumbBox=this.thumb.getBoundingClientRect();this.pinOffset=evt[this.oh.axis]-thumbBox[this.oh.leading]+this.bar.getBoundingClientRect()[this.oh.leading]+this._thumbMarginLeading;document.documentElement.style.cursor="default";this._addEvt("mousemove");this._addEvt("mouseup");evt.stopPropagation();evt.preventDefault()},onmousemove:function(evt){var scaled=Math.min(this._thumbMax,Math.max(0,evt[this.oh.axis]-this.pinOffset));var idx=scaled/this._thumbMax*(this._max-this._min)+this._min;this._setScroll(idx,scaled);evt.stopPropagation();evt.preventDefault()},onmouseup:function(evt){this._removeEvt("mousemove");this._removeEvt("mouseup");document.documentElement.style.cursor="auto";var thumbBox=this.thumb.getBoundingClientRect();if(thumbBox.left<=evt.clientX&&evt.clientX<=thumbBox.right&&thumbBox.top<=evt.clientY&&evt.clientY<=thumbBox.bottom){this._bound.onmouseover(evt)}else{this._bound.onmouseout(evt)}evt.stopPropagation();evt.preventDefault()}};var orientationHashes={vertical:{coordinate:"clientY",axis:"pageY",size:"height",outside:"right",inside:"left",leading:"top",trailing:"bottom",marginLeading:"marginTop",marginTrailing:"marginBottom",thickness:"width",delta:"deltaY"},horizontal:{coordinate:"clientX",axis:"pageX",size:"width",outside:"bottom",inside:"top",leading:"left",trailing:"right",marginLeading:"marginLeft",marginTrailing:"marginRight",thickness:"height",delta:"deltaX"}};var axis={top:"vertical",bottom:"vertical",height:"vertical",left:"horizontal",right:"horizontal",width:"horizontal"};function cssInjector(referenceElement){var container,style,ID="finbars-base-styles";if(!cssInjector.text||document.getElementById(ID)){return}if(typeof referenceElement==="string"){referenceElement=document.querySelector(referenceElement);if(referenceElement){referenceElement=referenceElement[0]}else{error("Cannot find reference element for CSS injection.")}}if(!(referenceElement instanceof Element)){referenceElement=undefined}style=document.createElement("style");style.type="text/css";style.id=ID;if(style.styleSheet){style.styleSheet.cssText=cssInjector.text}else{style.appendChild(document.createTextNode(cssInjector.text))}container=referenceElement&&referenceElement.parentNode||document.head||document.getElementsByTagName("head")[0];if(referenceElement===undefined){referenceElement=container.firstChild}container.insertBefore(style,referenceElement)}cssInjector.text="div.finbar-horizontal,div.finbar-vertical{position:absolute;margin:3px}div.finbar-horizontal>.thumb,div.finbar-vertical>.thumb{position:absolute;background-color:#d3d3d3;-webkit-box-shadow:0 0 1px #000;-moz-box-shadow:0 0 1px #000;box-shadow:0 0 1px #000;border-radius:4px;margin:2px;opacity:.4;transition:opacity .5s}div.finbar-horizontal>.thumb.hover,div.finbar-vertical>.thumb.hover{opacity:1;transition:opacity .5s}div.finbar-vertical{top:0;bottom:0;right:0;width:11px}div.finbar-vertical>.thumb{top:0;right:0;width:7px}div.finbar-horizontal{left:0;right:0;bottom:0;height:11px}div.finbar-horizontal>.thumb{left:0;bottom:0;height:7px}";function error(msg){throw"finbars: "+msg}module.exports=FinBar})(typeof module==="object"&&module||(window.FinBar={}),typeof module==="object"&&module.exports||(window.FinBar.exports={}))||(typeof module==="object"||(window.FinBar=window.FinBar.exports));</script><script>(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){(function(){if(typeof module==="object"&&module.exports){module.exports=LRUCache}else{this.LRUCache=LRUCache}function hOP(obj,key){return Object.prototype.hasOwnProperty.call(obj,key)}function naiveLength(){return 1}function LRUCache(options){if(!(this instanceof LRUCache))return new LRUCache(options);if(typeof options==="number")options={max:options};if(!options)options={};this._max=options.max;if(!this._max||!(typeof this._max==="number")||this._max<=0)this._max=Infinity;this._lengthCalculator=options.length||naiveLength;if(typeof this._lengthCalculator!=="function")this._lengthCalculator=naiveLength;this._allowStale=options.stale||false;this._maxAge=options.maxAge||null;this._dispose=options.dispose;this.reset()}Object.defineProperty(LRUCache.prototype,"max",{set:function(mL){if(!mL||!(typeof mL==="number")||mL<=0)mL=Infinity;this._max=mL;if(this._length>this._max)trim(this)},get:function(){return this._max},enumerable:true});Object.defineProperty(LRUCache.prototype,"lengthCalculator",{set:function(lC){if(typeof lC!=="function"){this._lengthCalculator=naiveLength;this._length=this._itemCount;for(var key in this._cache){this._cache[key].length=1}}else{this._lengthCalculator=lC;this._length=0;for(var key in this._cache){this._cache[key].length=this._lengthCalculator(this._cache[key].value);this._length+=this._cache[key].length}}if(this._length>this._max)trim(this)},get:function(){return this._lengthCalculator},enumerable:true});Object.defineProperty(LRUCache.prototype,"length",{get:function(){return this._length},enumerable:true});Object.defineProperty(LRUCache.prototype,"itemCount",{get:function(){return this._itemCount},enumerable:true});LRUCache.prototype.forEach=function(fn,thisp){thisp=thisp||this;var i=0;var itemCount=this._itemCount;for(var k=this._mru-1;k>=0&&i<itemCount;k--)if(this._lruList[k]){i++;var hit=this._lruList[k];if(isStale(this,hit)){del(this,hit);if(!this._allowStale)hit=undefined}if(hit){fn.call(thisp,hit.value,hit.key,this)}}};LRUCache.prototype.keys=function(){var keys=new Array(this._itemCount);var i=0;for(var k=this._mru-1;k>=0&&i<this._itemCount;k--)if(this._lruList[k]){var hit=this._lruList[k];keys[i++]=hit.key}return keys};LRUCache.prototype.values=function(){var values=new Array(this._itemCount);var i=0;for(var k=this._mru-1;k>=0&&i<this._itemCount;k--)if(this._lruList[k]){var hit=this._lruList[k];values[i++]=hit.value}return values};LRUCache.prototype.reset=function(){if(this._dispose&&this._cache){for(var k in this._cache){this._dispose(k,this._cache[k].value)}}this._cache=Object.create(null);this._lruList=Object.create(null);this._mru=0;this._lru=0;this._length=0;this._itemCount=0};LRUCache.prototype.dump=function(){var arr=[];var i=0;for(var k=this._mru-1;k>=0&&i<this._itemCount;k--)if(this._lruList[k]){var hit=this._lruList[k];if(!isStale(this,hit)){++i;arr.push({k:hit.key,v:hit.value,e:hit.now+(hit.maxAge||0)})}}return arr};LRUCache.prototype.dumpLru=function(){return this._lruList};LRUCache.prototype.set=function(key,value,maxAge){maxAge=maxAge||this._maxAge;var now=maxAge?Date.now():0;var len=this._lengthCalculator(value);if(hOP(this._cache,key)){if(len>this._max){del(this,this._cache[key]);return false}if(this._dispose)this._dispose(key,this._cache[key].value);this._cache[key].now=now;this._cache[key].maxAge=maxAge;this._cache[key].value=value;this._length+=len-this._cache[key].length;this._cache[key].length=len;this.get(key);if(this._length>this._max)trim(this);return true}var hit=new Entry(key,value,this._mru++,len,now,maxAge);if(hit.length>this._max){if(this._dispose)this._dispose(key,value);return false}this._length+=hit.length;this._lruList[hit.lu]=this._cache[key]=hit;this._itemCount++;if(this._length>this._max)trim(this);return true};LRUCache.prototype.has=function(key){if(!hOP(this._cache,key))return false;var hit=this._cache[key];if(isStale(this,hit)){return false}return true};LRUCache.prototype.get=function(key){return get(this,key,true)};LRUCache.prototype.peek=function(key){return get(this,key,false)};LRUCache.prototype.pop=function(){var hit=this._lruList[this._lru];del(this,hit);return hit||null};LRUCache.prototype.del=function(key){del(this,this._cache[key])};LRUCache.prototype.load=function(arr){this.reset();var now=Date.now();for(var l=arr.length-1;l>=0;l--){var hit=arr[l];var expiresAt=hit.e||0;if(expiresAt===0){this.set(hit.k,hit.v)}else{var maxAge=expiresAt-now;if(maxAge>0)this.set(hit.k,hit.v,maxAge)}}};function get(self,key,doUse){var hit=self._cache[key];if(hit){if(isStale(self,hit)){del(self,hit);if(!self._allowStale)hit=undefined}else{if(doUse)use(self,hit)}if(hit)hit=hit.value}return hit}function isStale(self,hit){if(!hit||!hit.maxAge&&!self._maxAge)return false;var stale=false;var diff=Date.now()-hit.now;if(hit.maxAge){stale=diff>hit.maxAge}else{stale=self._maxAge&&diff>self._maxAge}return stale}function use(self,hit){shiftLU(self,hit);hit.lu=self._mru++;self._lruList[hit.lu]=hit}function trim(self){while(self._lru<self._mru&&self._length>self._max)del(self,self._lruList[self._lru])}function shiftLU(self,hit){delete self._lruList[hit.lu];while(self._lru<self._mru&&!self._lruList[self._lru])self._lru++}function del(self,hit){if(hit){if(self._dispose)self._dispose(hit.key,hit.value);self._length-=hit.length;self._itemCount--;delete self._cache[hit.key];shiftLU(self,hit)}}function Entry(key,value,lu,length,now,maxAge){this.key=key;this.value=value;this.lu=lu;this.length=length;this.now=now;if(maxAge)this.maxAge=maxAge}})()},{}],2:[function(require,module,exports){(function defineMustache(global,factory){if(typeof exports==="object"&&exports&&typeof exports.nodeName!=="string"){factory(exports)}else if(typeof define==="function"&&define.amd){define(["exports"],factory)}else{global.Mustache={};factory(Mustache)}})(this,function mustacheFactory(mustache){var objectToString=Object.prototype.toString;var isArray=Array.isArray||function isArrayPolyfill(object){return objectToString.call(object)==="[object Array]"};function isFunction(object){return typeof object==="function"}function typeStr(obj){return isArray(obj)?"array":typeof obj}function escapeRegExp(string){return string.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function hasProperty(obj,propName){return obj!=null&&typeof obj==="object"&&propName in obj}var regExpTest=RegExp.prototype.test;function testRegExp(re,string){return regExpTest.call(re,string)}var nonSpaceRe=/\S/;function isWhitespace(string){return!testRegExp(nonSpaceRe,string)}var entityMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function escapeHtml(string){return String(string).replace(/[&<>"'\/]/g,function fromEntityMap(s){return entityMap[s]})}var whiteRe=/\s*/;var spaceRe=/\s+/;var equalsRe=/\s*=/;var curlyRe=/\s*\}/;var tagRe=/#|\^|\/|>|\{|&|=|!/;function parseTemplate(template,tags){if(!template)return[];var sections=[];var tokens=[];var spaces=[];var hasTag=false;var nonSpace=false;function stripSpace(){if(hasTag&&!nonSpace){while(spaces.length)delete tokens[spaces.pop()]}else{spaces=[]}hasTag=false;nonSpace=false}var openingTagRe,closingTagRe,closingCurlyRe;function compileTags(tagsToCompile){if(typeof tagsToCompile==="string")tagsToCompile=tagsToCompile.split(spaceRe,2);if(!isArray(tagsToCompile)||tagsToCompile.length!==2)throw new Error("Invalid tags: "+tagsToCompile);openingTagRe=new RegExp(escapeRegExp(tagsToCompile[0])+"\\s*");closingTagRe=new RegExp("\\s*"+escapeRegExp(tagsToCompile[1]));closingCurlyRe=new RegExp("\\s*"+escapeRegExp("}"+tagsToCompile[1]))}compileTags(tags||mustache.tags);var scanner=new Scanner(template);var start,type,value,chr,token,openSection;while(!scanner.eos()){start=scanner.pos;value=scanner.scanUntil(openingTagRe);if(value){for(var i=0,valueLength=value.length;i<valueLength;++i){chr=value.charAt(i);if(isWhitespace(chr)){spaces.push(tokens.length)}else{nonSpace=true}tokens.push(["text",chr,start,start+1]);start+=1;if(chr==="\n")stripSpace()}}if(!scanner.scan(openingTagRe))break;hasTag=true;type=scanner.scan(tagRe)||"name";scanner.scan(whiteRe);if(type==="="){value=scanner.scanUntil(equalsRe);scanner.scan(equalsRe);scanner.scanUntil(closingTagRe)}else if(type==="{"){value=scanner.scanUntil(closingCurlyRe);scanner.scan(curlyRe);scanner.scanUntil(closingTagRe);type="&"}else{value=scanner.scanUntil(closingTagRe)}if(!scanner.scan(closingTagRe))throw new Error("Unclosed tag at "+scanner.pos);token=[type,value,start,scanner.pos];tokens.push(token);if(type==="#"||type==="^"){sections.push(token)}else if(type==="/"){openSection=sections.pop();if(!openSection)throw new Error('Unopened section "'+value+'" at '+start);if(openSection[1]!==value)throw new Error('Unclosed section "'+openSection[1]+'" at '+start)}else if(type==="name"||type==="{"||type==="&"){nonSpace=true}else if(type==="="){compileTags(value)}}openSection=sections.pop();if(openSection)throw new Error('Unclosed section "'+openSection[1]+'" at '+scanner.pos);return nestTokens(squashTokens(tokens))}function squashTokens(tokens){var squashedTokens=[];var token,lastToken;for(var i=0,numTokens=tokens.length;i<numTokens;++i){token=tokens[i];if(token){if(token[0]==="text"&&lastToken&&lastToken[0]==="text"){lastToken[1]+=token[1];lastToken[3]=token[3]}else{squashedTokens.push(token);lastToken=token}}}return squashedTokens}function nestTokens(tokens){var nestedTokens=[];var collector=nestedTokens;var sections=[];var token,section;for(var i=0,numTokens=tokens.length;i<numTokens;++i){token=tokens[i];switch(token[0]){case"#":case"^":collector.push(token);sections.push(token);collector=token[4]=[];break;case"/":section=sections.pop();section[5]=token[2];collector=sections.length>0?sections[sections.length-1][4]:nestedTokens;break;default:collector.push(token)}}return nestedTokens}function Scanner(string){this.string=string;this.tail=string;this.pos=0}Scanner.prototype.eos=function eos(){return this.tail===""};Scanner.prototype.scan=function scan(re){var match=this.tail.match(re);if(!match||match.index!==0)return"";var string=match[0];this.tail=this.tail.substring(string.length);this.pos+=string.length;return string};Scanner.prototype.scanUntil=function scanUntil(re){var index=this.tail.search(re),match;switch(index){case-1:match=this.tail;this.tail="";break;case 0:match="";break;default:match=this.tail.substring(0,index);this.tail=this.tail.substring(index)}this.pos+=match.length;return match};function Context(view,parentContext){this.view=view;this.cache={".":this.view};this.parent=parentContext}Context.prototype.push=function push(view){return new Context(view,this)};Context.prototype.lookup=function lookup(name){var cache=this.cache;var value;if(cache.hasOwnProperty(name)){value=cache[name]}else{var context=this,names,index,lookupHit=false;while(context){if(name.indexOf(".")>0){value=context.view;names=name.split(".");index=0;while(value!=null&&index<names.length){if(index===names.length-1)lookupHit=hasProperty(value,names[index]);value=value[names[index++]]}}else{value=context.view[name];lookupHit=hasProperty(context.view,name)}if(lookupHit)break;context=context.parent}cache[name]=value}if(isFunction(value))value=value.call(this.view);return value};function Writer(){this.cache={}}Writer.prototype.clearCache=function clearCache(){this.cache={}};Writer.prototype.parse=function parse(template,tags){var cache=this.cache;var tokens=cache[template];if(tokens==null)tokens=cache[template]=parseTemplate(template,tags);return tokens};Writer.prototype.render=function render(template,view,partials){var tokens=this.parse(template);var context=view instanceof Context?view:new Context(view);return this.renderTokens(tokens,context,partials,template)};Writer.prototype.renderTokens=function renderTokens(tokens,context,partials,originalTemplate){var buffer="";var token,symbol,value;for(var i=0,numTokens=tokens.length;i<numTokens;++i){value=undefined;token=tokens[i];symbol=token[0];if(symbol==="#")value=this.renderSection(token,context,partials,originalTemplate);else if(symbol==="^")value=this.renderInverted(token,context,partials,originalTemplate);else if(symbol===">")value=this.renderPartial(token,context,partials,originalTemplate);else if(symbol==="&")value=this.unescapedValue(token,context);else if(symbol==="name")value=this.escapedValue(token,context);else if(symbol==="text")value=this.rawValue(token);if(value!==undefined)buffer+=value}return buffer};Writer.prototype.renderSection=function renderSection(token,context,partials,originalTemplate){var self=this;var buffer="";var value=context.lookup(token[1]);function subRender(template){return self.render(template,context,partials)}if(!value)return;if(isArray(value)){for(var j=0,valueLength=value.length;j<valueLength;++j){buffer+=this.renderTokens(token[4],context.push(value[j]),partials,originalTemplate)}}else if(typeof value==="object"||typeof value==="string"||typeof value==="number"){buffer+=this.renderTokens(token[4],context.push(value),partials,originalTemplate)}else if(isFunction(value)){if(typeof originalTemplate!=="string")throw new Error("Cannot use higher-order sections without the original template");value=value.call(context.view,originalTemplate.slice(token[3],token[5]),subRender);if(value!=null)buffer+=value}else{buffer+=this.renderTokens(token[4],context,partials,originalTemplate)}return buffer};Writer.prototype.renderInverted=function renderInverted(token,context,partials,originalTemplate){var value=context.lookup(token[1]);if(!value||isArray(value)&&value.length===0)return this.renderTokens(token[4],context,partials,originalTemplate)};Writer.prototype.renderPartial=function renderPartial(token,context,partials){if(!partials)return;var value=isFunction(partials)?partials(token[1]):partials[token[1]];if(value!=null)return this.renderTokens(this.parse(value),context,partials,value)};Writer.prototype.unescapedValue=function unescapedValue(token,context){var value=context.lookup(token[1]);if(value!=null)return value};Writer.prototype.escapedValue=function escapedValue(token,context){var value=context.lookup(token[1]);if(value!=null)return mustache.escape(value)};Writer.prototype.rawValue=function rawValue(token){return token[1]};mustache.name="mustache.js";mustache.version="2.2.0";mustache.tags=["{{","}}"];var defaultWriter=new Writer;mustache.clearCache=function clearCache(){return defaultWriter.clearCache()};mustache.parse=function parse(template,tags){return defaultWriter.parse(template,tags)};mustache.render=function render(template,view,partials){if(typeof template!=="string"){throw new TypeError('Invalid template! Template should be a "string" '+'but "'+typeStr(template)+'" was given as the first '+"argument for mustache#render(template, view, partials)")}return defaultWriter.render(template,view,partials)};mustache.to_html=function to_html(template,view,partials,send){var result=mustache.render(template,view,partials);if(isFunction(send)){send(result)}else{return result}};mustache.escape=escapeHtml;mustache.Scanner=Scanner;mustache.Context=Context;mustache.Writer=Writer})},{}],3:[function(require,module,exports){"use strict";function CellProvider(){this.cellCache={};this.initializeCells()}CellProvider.prototype={};var noop=function(){};var valueOrFunctionExecute=function(config,valueOrFunction){var isFunction=(typeof valueOrFunction)[0]==="f";var result=isFunction?valueOrFunction(config):valueOrFunction;if(!result&&result!==0){return""}return result};var underline=function(config,gc,text,x,y,thickness){var width=config.getTextWidth(gc,text);switch(gc.textAlign){case"center":x-=width/2;break;case"right":x-=width;break}gc.lineWidth=thickness;gc.moveTo(x+.5,y+.5);gc.lineTo(x+width+.5,y+.5)};var roundRect=function(gc,x,y,width,height,radius,fill,stroke){if(!stroke){stroke=true}if(!radius){radius=5}gc.beginPath();gc.moveTo(x+radius,y);gc.lineTo(x+width-radius,y);gc.quadraticCurveTo(x+width,y,x+width,y+radius);gc.lineTo(x+width,y+height-radius);gc.quadraticCurveTo(x+width,y+height,x+width-radius,y+height);gc.lineTo(x+radius,y+height);gc.quadraticCurveTo(x,y+height,x,y+height-radius);gc.lineTo(x,y+radius);gc.quadraticCurveTo(x,y,x+radius,y);gc.closePath();if(stroke){gc.stroke()}if(fill){gc.fill()}gc.closePath()};CellProvider.prototype.getCell=function(config){var cell=this.cellCache.simpleCellRenderer;cell.config=config;return cell};CellProvider.prototype.getColumnHeaderCell=function(config){var cell=this.cellCache.simpleCellRenderer;cell.config=config;return cell};CellProvider.prototype.getRowHeaderCell=function(config){var cell=this.cellCache.simpleCellRenderer;cell.config=config;return cell};CellProvider.prototype.paintButton=function(gc,config){var val=config.value;var c=config.x;var r=config.y;var bounds=config.bounds;var x=bounds.x+2;var y=bounds.y+2;var width=bounds.width-3;var height=bounds.height-3;var radius=height/2;var arcGradient=gc.createLinearGradient(x,y,x,y+height);if(config.mouseDown){arcGradient.addColorStop(0,"#B5CBED");arcGradient.addColorStop(1,"#4d74ea")}else{arcGradient.addColorStop(0,"#ffffff");arcGradient.addColorStop(1,"#aaaaaa")}gc.fillStyle=arcGradient;gc.strokeStyle="#000000";roundRect(gc,x,y,width,height,radius,arcGradient,true);var ox=(width-config.getTextWidth(gc,val))/2;var oy=(height-config.getTextHeight(gc.font).descent)/2;if(gc.textBaseline!=="middle"){gc.textBaseline="middle"}gc.fillStyle="#000000";config.backgroundColor="rgba(0,0,0,0)";gc.fillText(val,x+ox,y+oy);config.buttonCells[c+","+r]=true};CellProvider.prototype.defaultCellPaint=function(gc,config){var isLink=isLink||false;var colHEdgeOffset=config.cellPadding,halignOffset=0,valignOffset=config.voffset,halign=config.halign,isColumnHovered=config.isColumnHovered,isRowHovered=config.isRowHovered,val=config.value,x=config.bounds.x,y=config.bounds.y,width=config.bounds.width,height=config.bounds.height;var leftIcon,rightIcon,centerIcon,ixoffset,iyoffset;if(val&&val.constructor===Array){leftIcon=val[0];rightIcon=val[2];val=val[1];if(typeof val==="object"){centerIcon=val;val=null}if(leftIcon&&leftIcon.nodeName!=="IMG"){leftIcon=null}if(rightIcon&&rightIcon.nodeName!=="IMG"){rightIcon=null}if(centerIcon&&centerIcon.nodeName!=="IMG"){centerIcon=null}}val=valueOrFunctionExecute(config,val);if(gc.font!==config.font){gc.font=config.font}if(gc.textAlign!=="left"){gc.textAlign="left"}if(gc.textBaseline!=="middle"){gc.textBaseline="middle"}var fontMetrics=config.getTextHeight(config.font);var textWidth=config.getTextWidth(gc,val);config.minWidth=textWidth+2*colHEdgeOffset;if(halign==="right"){halignOffset=width-colHEdgeOffset-textWidth}else if(halign==="center"){halignOffset=(width-textWidth)/2}else if(halign==="left"){halignOffset=colHEdgeOffset}halignOffset=Math.max(0,halignOffset);valignOffset=valignOffset+Math.ceil(height/2);if(config.backgroundColor||config.isSelected){gc.fillStyle=valueOrFunctionExecute(config,config.isSelected?config.backgroundSelectionColor:config.backgroundColor);gc.fillRect(x,y,width,height)}var theColor=valueOrFunctionExecute(config,config.isSelected?config.foregroundSelectionColor:config.color);if(gc.fillStyle!==theColor){gc.fillStyle=theColor;gc.strokeStyle=theColor}if(val!==null){gc.fillText(val,x+halignOffset,y+valignOffset)}if(isColumnHovered&&isRowHovered){gc.beginPath();if(isLink){underline(config,gc,val,x+halignOffset,y+valignOffset+Math.floor(fontMetrics.height/2),1);gc.stroke()}gc.closePath()}if(config.isInCurrentSelectionRectangle){gc.fillStyle="rgba(0, 0, 0, 0.2)";gc.fillRect(x,y,width,height)}var iconWidth=0;if(leftIcon){iyoffset=Math.round((height-leftIcon.height)/2);ixoffset=Math.round((halignOffset-leftIcon.width)/2);gc.drawImage(leftIcon,x+ixoffset,y+iyoffset);iconWidth=Math.max(leftIcon.width+2)}if(rightIcon){iyoffset=Math.round((height-rightIcon.height)/2);ixoffset=0;gc.drawImage(rightIcon,x+width-ixoffset-rightIcon.width,y+iyoffset);iconWidth=Math.max(rightIcon.width+2)}if(centerIcon){iyoffset=Math.round((height-centerIcon.height)/2);ixoffset=Math.round((width-centerIcon.width)/2);gc.drawImage(centerIcon,x+width-ixoffset-centerIcon.width,y+iyoffset);iconWidth=Math.max(centerIcon.width+2)}if(config.cellBorderThickness){gc.beginPath();gc.rect(x,y,width,height);gc.lineWidth=config.cellBorderThickness;gc.strokeStyle=config.cellBorderStyle;gc.stroke();gc.closePath()}config.minWidth=config.minWidth+2*iconWidth};CellProvider.prototype.paintSlider=function(){};CellProvider.prototype.paintSparkbar=function(gc,x,y,width,height){gc.beginPath();var val=this.config.value;if(!val||!val.length){return}var count=val.length;var eWidth=width/count;var fgColor=this.config.isSelected?this.config.fgSelColor:this.config.fgColor;if(this.config.bgColor||this.config.isSelected){gc.fillStyle=this.config.isSelected?this.config.bgSelColor:this.config.bgColor;gc.fillRect(x,y,width,height)}gc.fillStyle=fgColor;for(var i=0;i<val.length;i++){var barheight=val[i]/110*height;gc.fillRect(x+5,y+height-barheight,eWidth*.6666,barheight);x=x+eWidth}gc.closePath();this.config.minWidth=count*10};CellProvider.prototype.paintSparkline=function(gc,x,y,width,height){gc.beginPath();var val=this.config.value;if(!val||!val.length){return}var count=val.length;var eWidth=width/count;var fgColor=this.config.isSelected?this.config.fgSelColor:this.config.fgColor;if(this.config.bgColor||this.config.isSelected){gc.fillStyle=this.config.isSelected?this.config.bgSelColor:this.config.bgColor;gc.fillRect(x,y,width,height)}gc.strokeStyle=fgColor;gc.fillStyle=fgColor;gc.beginPath();var prev;for(var i=0;i<val.length;i++){var barheight=val[i]/110*height;if(!prev){prev=barheight}gc.lineTo(x+5,y+height-barheight);gc.arc(x+5,y+height-barheight,1,0,2*Math.PI,false);x=x+eWidth}this.config.minWidth=count*10;gc.stroke();gc.closePath()};CellProvider.prototype.treeCellRenderer=function(gc,x,y,width,height){var val=this.config.value.data;var indent=this.config.value.indent;var icon=this.config.value.icon;if(this.config.bgColor||this.config.isSelected){gc.fillStyle=this.config.isSelected?this.config.bgSelColor:this.config.bgColor;gc.fillRect(x,y,width,height)}if(!val||!val.length){return}var valignOffset=Math.ceil(height/2);gc.fillStyle=this.config.isSelected?this.config.fgSelColor:this.config.fgColor;gc.fillText(icon+val,x+indent,y+valignOffset);var textWidth=this.config.getTextWidth(gc,icon+val);var minWidth=x+indent+textWidth+10;this.config.minWidth=minWidth};CellProvider.prototype.emptyCellRenderer=function(gc,x,y,width,height){noop(gc,x,y,width,height)};CellProvider.prototype.initializeCells=function(){var self=this;this.cellCache.simpleCellRenderer={paint:this.defaultCellPaint};this.cellCache.sliderCellRenderer={paint:this.paintSlider};this.cellCache.sparkbarCellRenderer={paint:this.paintSparkbar};this.cellCache.sparklineCellRenderer={paint:this.paintSparkline};this.cellCache.treeCellRenderer={paint:this.treeCellRenderer};this.cellCache.emptyCellRenderer={paint:this.emptyCellRenderer};this.cellCache.buttonRenderer={paint:this.paintButton};this.cellCache.linkCellRenderer={paint:function(gc,x,y,width,height){self.config=this.config;self.defaultCellPaint(gc,x,y,width,height,true)}}};module.exports=CellProvider},{}],4:[function(require,module,exports){"use strict";function Renderer(){this.columnEdges=[];this.columnEdgesIndexMap={};this.renderedColumnMinWidths=[];this.renderedHeight=0;this.rowEdges=[];this.rowEdgesIndexMap={};this.visibleColumns=[];this.visibleRows=[];this.insertionBounds=[]}Renderer.prototype={};var noop=function(){};var merge=function(target,source){for(var key in source){if(source.hasOwnProperty(key)){target[key]=source[key]}}};Renderer.prototype.cell={x:0,y:0,width:0,height:0};Renderer.prototype.scrollHeight=0,Renderer.prototype.viewHeight=0,Renderer.prototype.computeCellsBounds=function(){var grid=this.getGrid();var scrollTop=this.getScrollTop();var scrollLeft=this.getScrollLeft();var numColumns=this.getColumnCount();var numFixedColumns=this.getFixedColumnCount();var numRows=this.getRowCount();var numFixedRows=this.getFixedRowCount();var bounds=this.getBounds();var viewWidth=bounds.width();if(viewWidth===0){viewWidth=grid.canvas.width}var viewHeight=bounds.height();var x,y,c,r,vx,vy,width,height;this.getColumnEdges().length=0;this.rowEdges.length=0;this.columnEdges[0]=0;this.rowEdges[0]=0;this.scrollHeight=0;this.visibleColumns.length=0;this.visibleRows.length=0;this.columnEdgesIndexMap={};this.rowEdgesIndexMap={};this.insertionBounds=[];var insertionBoundsCursor=0;var previousInsertionBoundsCursorValue=0;x=0;var start=0;var firstVX,lastVX;var firstVY,lastVY;if(grid.isShowRowNumbers()){start--;this.columnEdges[-1]=-1}for(c=start;c<numColumns;c++){vx=c;if(c>=numFixedColumns){vx=vx+scrollLeft;if(firstVX===undefined){firstVX=vx}lastVX=vx}if(x>viewWidth||numColumns<=vx){break}width=this.getColumnWidth(vx);x=x+width;this.columnEdges[c+1]=Math.round(x);this.visibleColumns[c]=vx;this.columnEdgesIndexMap[vx]=c;insertionBoundsCursor=insertionBoundsCursor+Math.round(width/2)+previousInsertionBoundsCursorValue;this.insertionBounds.push(insertionBoundsCursor);previousInsertionBoundsCursorValue=Math.round(width/2)}y=0;for(r=0;r<numRows;r++){vy=r;if(r>=numFixedRows){vy=vy+scrollTop;if(firstVY===undefined){firstVY=vy}lastVY=vy}if(y>viewHeight||numRows<=vy){break}height=this.getRowHeight(vy);y=y+height;this.rowEdges[r+1]=Math.round(y);this.visibleRows[r]=vy;this.rowEdgesIndexMap[vy]=r}this.viewHeight=viewHeight;this.dataWindow=grid.rectangles.rectangle.create(firstVX,firstVY,lastVX-firstVX,lastVY-firstVY)};Renderer.prototype.resolveProperty=function(key){return this.getGrid().resolveProperty(key)};Renderer.prototype.getGrid=function(){return this.grid};Renderer.prototype.setGrid=function(grid){var self=this;this.grid=grid;grid.canvas.getComponent=function(){return self}};Renderer.prototype._paint=function(gc){if(!this.grid){return}this.renderGrid(gc);this.getGrid().gridRenderedNotification()};Renderer.prototype.getVisibleRowsCount=function(){return this.visibleRows.length-1};Renderer.prototype.getVisibleScrollHeight=function(){var grid=this.getGrid();var frh=grid.getFixedRowsHeight();var height=this.viewHeight-frh;return height};Renderer.prototype.getVisibleRows=function(){return this.visibleRows};Renderer.prototype.getVisibleColumnsCount=function(){return this.visibleColumns.length-1};Renderer.prototype.getVisibleColumns=function(){return this.visibleColumns};Renderer.prototype.overColumnDivider=function(x){x=Math.round(x);var edges=this.getColumnEdges();var whichCol=edges.indexOf(x-1);if(whichCol<0){whichCol=edges.indexOf(x)}if(whichCol<0){whichCol=edges.indexOf(x-2)}if(whichCol<0){whichCol=edges.indexOf(x+1)}if(whichCol<0){whichCol=edges.indexOf(x-3)}return whichCol};Renderer.prototype.overRowDivider=function(y){y=Math.round(y);var which=this.rowEdges.indexOf(y+1);if(which<0){which=this.rowEdges.indexOf(y)}if(which<0){which=this.rowEdges.indexOf(y-1)}return which};Renderer.prototype.getBoundsOfCell=function(cell){return this._getBoundsOfCell(cell.x,cell.y)};Renderer.prototype._getBoundsOfCell=function(c,r){var xOutside=false;var yOutside=false;var columnEdges=this.getColumnEdges();var rowEdges=this.getRowEdges();var x=this.columnEdgesIndexMap[c];var y=this.rowEdgesIndexMap[r];if(x===undefined){x=this.columnEdgesIndexMap[c-1];xOutside=true}if(y===undefined){y=this.rowEdgesIndexMap[r-1];yOutside=true}var ox=columnEdges[x],oy=rowEdges[y],cx=columnEdges[x+1],cy=rowEdges[y+1],ex=cx-ox,ey=cy-oy;var cell=this.cell;cell.x=xOutside?cx:ox;cell.y=yOutside?cy:oy;cell.width=xOutside?0:ex;cell.height=yOutside?0:ey;return cell};Renderer.prototype.getColumnFromPixelX=function(pixelX){var width=0;var grid=this.getGrid();var fixedColumnCount=this.getFixedColumnCount();var scrollLeft=grid.getHScrollValue();var c;var edges=this.getColumnEdges();for(c=1;c<edges.length-1;c++){width=edges[c]-(edges[c]-edges[c-1])/2;if(pixelX<width){if(c>fixedColumnCount){c=c+scrollLeft}return c-1}}if(c>fixedColumnCount){c=c+scrollLeft}return c-1};Renderer.prototype.getGridCellFromMousePoint=function(point){var grid=this.getGrid();var behavior=grid.getBehavior();var width=0;var height=0;var x,y,c,r;var previous=0;var columnEdges=this.getColumnEdges();var fixedColumnCount=this.getFixedColumnCount();var fixedRowCount=this.getFixedRowCount();var scrollX=this.getScrollLeft();var scrollY=this.getScrollTop();for(c=0;c<columnEdges.length;c++){width=columnEdges[c];if(point.x<width){x=Math.max(0,point.x-previous-2);break}previous=width}c--;previous=0;for(r=0;r<this.rowEdges.length;r++){height=this.rowEdges[r];if(point.y<height){y=Math.max(0,point.y-previous-2);break}previous=height}r--;if(point.x<0){c=-1}if(point.y<0){r=-1}var viewPoint=grid.newPoint(c,r);if(c>=fixedColumnCount){c=c+scrollX}if(r>=fixedRowCount){r=r+scrollY}var translatedIndex=-1;var column=behavior.getColumn(c);if(column){translatedIndex=column.index}return{gridCell:grid.newPoint(c,r),mousePoint:grid.newPoint(x,y),viewPoint:viewPoint,dataCell:grid.newPoint(translatedIndex,r)}};Renderer.prototype.isColumnVisible=function(colIndex){var isVisible=this.visibleColumns.indexOf(colIndex)!==-1;return isVisible};Renderer.prototype.getFinalVisableColumnBoundry=function(){var isMaxX=this.isLastColumnVisible();var chop=isMaxX?2:1;var colWall=this.getColumnEdges()[this.getColumnEdges().length-chop];var result=Math.min(colWall,this.getBounds().width()-200);return result};Renderer.prototype.isRowVisible=function(rowIndex){var isVisible=this.visibleRows.indexOf(rowIndex)!==-1;return isVisible};Renderer.prototype.isSelected=function(x,y){return this.getGrid().isSelected(x,y)};Renderer.prototype.renderGrid=function(gc){gc.beginPath();this.paintCells(gc);this.paintGridlines(gc);this.renderOverrides(gc);this.renderFocusCell(gc);gc.closePath()};focusLineStep:[[5,5],[0,1,5,4],[0,2,5,3],[0,3,5,2],[0,4,5,1],[0,5,5,0],[1,5,4,0],[2,5,3,0],[3,5,2,0],[4,5,1,0]],Renderer.prototype.renderFocusCell=function(gc){gc.beginPath();this._renderFocusCell(gc);gc.closePath()};Renderer.prototype._renderFocusCell=function(gc){var grid=this.getGrid();var selections=grid.getSelectionModel().getSelections();if(!selections||selections.length===0){return}var selection=selections[selections.length-1];var mouseDown=selection.origin;if(mouseDown.x===-1){return}var visibleColumns=this.getVisibleColumns();var visibleRows=this.getVisibleRows();var lastVisibleColumn=visibleColumns[visibleColumns.length-1];var lastVisibleRow=visibleRows[visibleRows.length-1];var extent=selection.extent;var dpOX=Math.min(mouseDown.x,mouseDown.x+extent.x);var dpOY=Math.min(mouseDown.y,mouseDown.y+extent.y);if(dpOX>lastVisibleColumn){return}if(dpOY>lastVisibleRow){return}var dpEX=Math.max(mouseDown.x,mouseDown.x+extent.x)+1;dpEX=Math.min(dpEX,1+lastVisibleColumn);var dpEY=Math.max(mouseDown.y,mouseDown.y+extent.y)+1;dpEY=Math.min(dpEY,1+lastVisibleRow);var o=this._getBoundsOfCell(dpOX,dpOY);var ox=Math.round(o.x===undefined?grid.getFixedColumnsWidth():o.x);var oy=Math.round(o.y===undefined?grid.getFixedRowsHeight():o.y);var e=this._getBoundsOfCell(dpEX,dpEY);var ex=Math.round(e.x===undefined?grid.getFixedColumnsWidth():e.x);var ey=Math.round(e.y===undefined?grid.getFixedRowsHeight():e.y);var x=Math.min(ox,ex);var y=Math.min(oy,ey);var width=1+ex-ox;var height=1+ey-oy;if(x===ex){width=ox-ex}if(y===ey){height=oy-ey}if(width*height<1){return}gc.rect(x,y,width,height);gc.fillStyle="rgba(0, 0, 0, 0.2)";gc.fill();gc.lineWidth=1;gc.strokeStyle="black";gc.stroke();gc.stroke()};Renderer.prototype.blankOutOverflow=function(gc){var isMaxX=this.isLastColumnVisible();var chop=isMaxX?1:0;var x=this.getColumnEdges()[this.getColumnEdges().length-chop];var bounds=this.getBounds();
var width=bounds.width()-200-x;var height=bounds.height();gc.fillStyle=this.resolveProperty("backgroundColor2");gc.fillRect(x+1,0,width,height)};Renderer.prototype.renderOverrides=function(gc){var grid=this.getGrid();var cache=grid.renderOverridesCache;for(var key in cache){if(cache.hasOwnProperty(key)){var override=cache[key];if(override){this.renderOverride(gc,override)}}}};Renderer.prototype.renderOverride=function(gc,override){var hdpiRatio=override.hdpiratio;var startX=override.startX;var width=override.width+1;var height=override.height;var targetCTX=override.ctx;var imgData=gc.getImageData(startX,0,Math.round(width*hdpiRatio),Math.round(height*hdpiRatio));targetCTX.putImageData(imgData,0,0);gc.fillStyle=this.resolveProperty("backgroundColor2");gc.fillRect(Math.round(startX/hdpiRatio),0,width,height)};Renderer.prototype.isHovered=function(x,y){return this.getGrid().isHovered(x,y)};Renderer.prototype.isRowHovered=function(y){return this.getGrid().isRowHovered(y)};Renderer.prototype.isColumnHovered=function(x){return this.getGrid().isColumnHovered(x)};Renderer.prototype.paintCells=function(gc){try{gc.save();this._paintCells(gc)}catch(e){console.error(e)}finally{gc.restore()}};Renderer.prototype.isCellSelectedInRow=function(colIndex){return this.getGrid().isCellSelectedInRow(colIndex)};Renderer.prototype.isCellSelectedInColumn=function(rowIndex){return this.getGrid().isCellSelectedInColumn(rowIndex)};Renderer.prototype.getScrollTop=function(){var st=this.getGrid().getVScrollValue();return st};Renderer.prototype.getScrollLeft=function(){var st=this.getGrid().getHScrollValue();return st};Renderer.prototype.getBehavior=function(){return this.getGrid().getBehavior()};Renderer.prototype.getColumnEdges=function(){return this.columnEdges};Renderer.prototype.getRowEdges=function(){return this.rowEdges};Renderer.prototype.getRowHeight=function(rowIndex){var height=this.getBehavior().getRowHeight(rowIndex);return height};Renderer.prototype.getColumnWidth=function(columnIndex){var width=this.getGrid().getColumnWidth(columnIndex);return width};Renderer.prototype.isLastColumnVisible=function(){var lastColumnIndex=this.getColumnCount()-1;var isMax=this.visibleColumns.indexOf(lastColumnIndex)!==-1;return isMax};Renderer.prototype.getRenderedWidth=function(index){return this.getColumnEdges()[index]};Renderer.prototype.getRenderedHeight=function(index){return this.rowEdges[index]};Renderer.prototype.getCanvas=function(){return this.getGrid().getCanvas()};Renderer.prototype.isDraggingColumn=function(){return this.getGrid().isDraggingColumn()};Renderer.prototype.getPageUpRow=function(){var behavior=this.getBehavior();var scrollHeight=this.getVisibleScrollHeight();var headerRows=this.getGrid().getFixedRowCount();var top=this.dataWindow.origin.y-headerRows;var scanHeight=0;while(scanHeight<scrollHeight&&top>-1){scanHeight=scanHeight+behavior.getRowHeight(top);top--}return top+1};Renderer.prototype.getPageDownRow=function(){var headerRows=this.getGrid().getFixedRowCount();var rowNum=this.dataWindow.corner.y-headerRows-1;return rowNum};Renderer.prototype.getColumnCount=function(){return this.getGrid().getColumnCount()};Renderer.prototype.getRowCount=function(){return this.getGrid().getRowCount()};Renderer.prototype.getFixedColumnCount=function(){return this.getGrid().getFixedColumnCount()};Renderer.prototype.getFixedRowCount=function(){return this.getGrid().getFixedRowCount()};Renderer.prototype.getHeaderRowCount=function(){return this.getGrid().getHeaderRowCount()};Renderer.prototype.getHeaderColumnCount=function(){return this.getGrid().getHeaderColumnCount()};Renderer.prototype._paintCells=function(gc){var x,y,c,r=0;var columnEdges=this.getColumnEdges();var rowEdges=this.rowEdges;this.buttonCells={};var visibleCols=this.getVisibleColumns();var visibleRows=this.getVisibleRows();var width=columnEdges[columnEdges.length-1];var height=rowEdges[rowEdges.length-1];gc.moveTo(0,0);gc.rect(0,0,width,height);gc.stroke();gc.clip();var loopLength=visibleCols.length;var loopStart=0;if(this.getGrid().isShowRowNumbers()){loopStart--}for(x=loopStart;x<loopLength;x++){c=visibleCols[x];this.renderedColumnMinWidths[c]=0;for(y=0;y<visibleRows.length;y++){r=visibleRows[y];this._paintCell(gc,c,r)}}};Renderer.prototype.paintGridlines=function(gc){var x,y,c,r=0;var colWidths=this.getColumnEdges();var rowHeights=this.rowEdges;var viewWidth=colWidths[colWidths.length-1];var viewHeight=rowHeights[rowHeights.length-1];var drawThemH=this.resolveProperty("gridLinesH");var drawThemV=this.resolveProperty("gridLinesV");var lineColor=this.resolveProperty("lineColor");gc.beginPath();gc.strokeStyle=lineColor;gc.lineWidth=this.resolveProperty("lineWidth");gc.moveTo(0,0);if(drawThemV){for(c=0;c<colWidths.length+1;c++){x=colWidths[c]+.5;gc.moveTo(x,0);gc.lineTo(x,viewHeight)}}if(drawThemH){for(r=0;r<rowHeights.length;r++){y=rowHeights[r]+.5;gc.moveTo(0,y);gc.lineTo(viewWidth,y)}}gc.stroke();gc.closePath()};Renderer.prototype.paintCell=function(gc,x,y){var c,r=0;var visibleCols=this.getVisibleColumns();var visibleRows=this.getVisibleRows();gc.moveTo(0,0);c=visibleCols[x];r=visibleRows[y];if(!c){return}this._paintCell(gc,c,r)};Renderer.prototype._paintCell=function(gc,c,r){var grid=this.getGrid();var behavior=this.getBehavior();var baseProperties=behavior.getColumnProperties(c);var temp=baseProperties;if(baseProperties.isNull){return}var columnProperties=baseProperties;var headerRowCount=behavior.getHeaderRowCount();var isShowRowNumbers=grid.isShowRowNumbers();var isHeaderRow=r<headerRowCount;var isFilterRow=grid.isFilterRow(r);var isHierarchyColumn=grid.isHierarchyColumn(c);var isRowSelected=grid.isRowSelected(r);var isColumnSelected=grid.isColumnSelected(c);var isCellSelected=grid.isCellSelected(c,r);var isCellSelectedInColumn=grid.isCellSelectedInColumn(c);var isCellSelectedInRow=grid.isCellSelectedInRow(r);var areAllRowsSelected=grid.areAllRowsSelected();var cellProperties;if(isShowRowNumbers&&c===-1||isHierarchyColumn){if(isRowSelected){baseProperties=baseProperties.rowHeaderRowSelection;cellProperties=Object.create(baseProperties);cellProperties.isSelected=true}else{baseProperties=baseProperties.rowHeader;cellProperties=Object.create(baseProperties);cellProperties.isSelected=isCellSelectedInRow}cellProperties.isUserDataArea=false}else if(isHeaderRow){if(isFilterRow){baseProperties=baseProperties.filterProperties;cellProperties=Object.create(baseProperties);cellProperties.isSelected=false}else if(isColumnSelected){baseProperties=baseProperties.columnHeaderColumnSelection;cellProperties=Object.create(baseProperties);cellProperties.isSelected=true}else{baseProperties=baseProperties.columnHeader;cellProperties=Object.create(baseProperties);cellProperties.isSelected=isCellSelectedInColumn}cellProperties.isUserDataArea=false}else if(isHierarchyColumn){baseProperties=baseProperties.rowHeader;cellProperties=Object.create(baseProperties);cellProperties.isSelected=isCellSelectedInRow}else{cellProperties=Object.create(baseProperties);cellProperties.isSelected=isCellSelected||isRowSelected||isColumnSelected;cellProperties.isUserDataArea=true}var rowNum=r-headerRowCount+1;if(c===-1){var checkedImage=isRowSelected?"checked":"unchecked";cellProperties.value=isHeaderRow?"":[behavior.getImage(checkedImage),rowNum,null];if(r===0){checkedImage=areAllRowsSelected?"checked":"unchecked";cellProperties.value=[behavior.getImage(checkedImage),"",null]}else if(isFilterRow){cellProperties.value=[behavior.getImage("filter-off"),"",null]}}else{cellProperties.value=grid.getValue(c,r)}cellProperties.halign=grid.getColumnAlignment(c);cellProperties.isColumnHovered=this.isRowHovered(c,r);cellProperties.isRowHovered=this.isColumnHovered(c,r);cellProperties.bounds=this._getBoundsOfCell(c,r);cellProperties.isCellSelected=isCellSelected;cellProperties.isRowSelected=isRowSelected;cellProperties.isColumnSelected=isColumnSelected;cellProperties.isInCurrentSelectionRectangle=grid.isInCurrentSelectionRectangle(c,r);var mouseDownState=grid.mouseDownState;if(mouseDownState){var point=mouseDownState.gridCell;cellProperties.mouseDown=point.x===c&&point.y===r}cellProperties.x=c;cellProperties.y=r;behavior.cellPropertiesPrePaintNotification(cellProperties);var cell=behavior.getCellRenderer(cellProperties,c,r);var overrides=behavior.getCellProperties(c,r);if(overrides){merge(cellProperties,overrides)}cellProperties.buttonCells=this.buttonCells;cell.paint(gc,cellProperties);this.renderedColumnMinWidths[c]=Math.max(cellProperties.minWidth||0,this.renderedColumnMinWidths[c]);columnProperties.preferredWidth=this.renderedColumnMinWidths[c]};Renderer.prototype.isViewableButton=function(c,r){var key=c+","+r;return this.buttonCells[key]===true};Renderer.prototype.getRowNumbersWidth=function(){var colEdges=this.getColumnEdges();if(colEdges.length===0){return 0}return colEdges[0]};Renderer.prototype.startAnimator=function(){var animate;var self=this;animate=function(){self.animate();requestAnimationFrame(animate)};requestAnimationFrame(animate)};Renderer.prototype.animate=function(){var ctx=this.getCanvas().canvasCTX;ctx.beginPath();ctx.save();this.renderFocusCell(ctx);ctx.restore();ctx.closePath()};Renderer.prototype.getBounds=function(){return this.bounds};Renderer.prototype.setBounds=function(bounds){return this.bounds=bounds};module.exports=Renderer},{}],5:[function(require,module,exports){"use strict";function SelectionModel(){this.selections=[];this.flattenedX=[];this.flattenedY=[];this.rowSelectionModel=new RangeSelectionModel;this.columnSelectionModel=new RangeSelectionModel;this.setLastSelectionType("");this.allRowsSelected=false}SelectionModel.prototype={};SelectionModel.prototype.selections=null;SelectionModel.prototype.flattenedX=null;SelectionModel.prototype.flattenedY=null;SelectionModel.prototype.rowSelectionModel=null;SelectionModel.prototype.columnSelectionModel=null;SelectionModel.prototype.allRowsSelected=false;SelectionModel.prototype.getGrid=function(){return null};SelectionModel.prototype.getLastSelection=function(){var sels=this.getSelections();var sel=sels[sels.length-1];return sel};SelectionModel.prototype.getLastSelectionType=function(){return this.lastSelectionType};SelectionModel.prototype.setLastSelectionType=function(type){this.lastSelectionType=type};SelectionModel.prototype.select=function(ox,oy,ex,ey){var newSelection=this.getGrid().newRectangle(ox,oy,ex,ey);this.selections.push(newSelection);this.flattenedX.push(newSelection.flattenXAt(0));this.flattenedY.push(newSelection.flattenYAt(0));this.setLastSelectionType("cell");this.getGrid().selectionChanged()};SelectionModel.prototype.toggleSelect=function(ox,oy,ex,ey){var selections=this.getSelections();for(var i=0;i<selections.length;i++){var each=selections[i];if(each.origin.x===ox&&each.origin.y===oy&&each.extent.x===ex&&each.extent.y===ey){selections.splice(i,1);this.flattenedX.splice(i,1);this.flattenedY.splice(i,1);this.getGrid().selectionChanged();return}}this.select(ox,oy,ex,ey)};SelectionModel.prototype.clearMostRecentSelection=function(){this.allRowsSelected=false;this.selections.length=Math.max(0,this.selections.length-1);this.flattenedX.length=Math.max(0,this.flattenedX.length-1);this.flattenedY.length=Math.max(0,this.flattenedY.length-1)};SelectionModel.prototype.clearMostRecentColumnSelection=function(){this.columnSelectionModel.clearMostRecentSelection();this.setLastSelectionType("column")};SelectionModel.prototype.clearMostRecentRowSelection=function(){this.rowSelectionModel.clearMostRecentSelection();this.setLastSelectionType("row")};SelectionModel.prototype.clearRowSelection=function(){this.rowSelectionModel.clear();this.setLastSelectionType("row")};SelectionModel.prototype.getSelections=function(){return this.selections};SelectionModel.prototype.hasSelections=function(){return this.selections.length!==0};SelectionModel.prototype.hasRowSelections=function(){return!this.rowSelectionModel.isEmpty()};SelectionModel.prototype.hasColumnSelections=function(){return!this.columnSelectionModel.isEmpty()};SelectionModel.prototype.isSelected=function(x,y){return this._isSelected(this.selections,x,y)};SelectionModel.prototype.isCellSelectedInRow=function(r){return this._isCellSelected(this.flattenedX,0,r)};SelectionModel.prototype.isCellSelectedInColumn=function(c){return this._isCellSelected(this.flattenedY,c,0)};SelectionModel.prototype._isSelected=function(selections,x,y){if(this.isColumnSelected(x)||this.isRowSelected(y)){return true}return this._isCellSelected(selections,x,y)};SelectionModel.prototype.isCellSelected=function(x,y){return this._isCellSelected(this.getSelections(),x,y)};SelectionModel.prototype._isCellSelected=function(selections,x,y){for(var i=0;i<selections.length;i++){var each=selections[i];if(this.getGrid().rectangles.rectangle.contains(each,x,y)){return true}}return false};SelectionModel.prototype.clear=function(){this.allRowsSelected=false;this.selections.length=0;this.flattenedX.length=0;this.flattenedY.length=0;this.rowSelectionModel.clear();this.columnSelectionModel.clear()};SelectionModel.prototype.isRectangleSelected=function(ox,oy,ex,ey){var selections=this.getSelections();for(var i=0;i<selections.length;i++){var each=selections[i];if(each.origin.x===ox&&each.origin.y===oy&&each.extent.x===ex&&each.extent.y===ey){return true}}return false};SelectionModel.prototype.isColumnSelected=function(x){return this.columnSelectionModel.isSelected(x)};SelectionModel.prototype.isRowSelected=function(y){return this.allRowsSelected||this.rowSelectionModel.isSelected(y)};SelectionModel.prototype.selectColumn=function(x1,x2){this.columnSelectionModel.select(x1,x2);this.setLastSelectionType("column")};SelectionModel.prototype.selectAllRows=function(){this.clear();this.allRowsSelected=true};SelectionModel.prototype.areAllRowsSelected=function(){return this.allRowsSelected};SelectionModel.prototype.selectRow=function(y1,y2){this.rowSelectionModel.select(y1,y2);this.setLastSelectionType("row")};SelectionModel.prototype.deselectColumn=function(x1,x2){this.columnSelectionModel.deselect(x1,x2);this.setLastSelectionType("column")};SelectionModel.prototype.deselectRow=function(y1,y2){this.rowSelectionModel.deselect(y1,y2);this.setLastSelectionType("row")};SelectionModel.prototype.getSelectedRows=function(){return this.rowSelectionModel.getSelections()};SelectionModel.prototype.getSelectedColumns=function(){return this.columnSelectionModel.getSelections()};SelectionModel.prototype.isColumnOrRowSelected=function(){return!this.columnSelectionModel.isEmpty()||!this.rowSelectionModel.isEmpty()};SelectionModel.prototype.getFlattenedYs=function(){var result=[];var set={};for(var i=0;i<this.selections.length;i++){var each=this.selections[i];var top=each.origin.y;var size=each.extent.y+1;for(var r=0;r<size;r++){var ti=r+top;if(!set[ti]){result.push(ti);set[ti]=true}}}result.sort(function(x,y){return x-y});return result};SelectionModel.prototype.selectRowsFromCells=function(offset){this.allRowsSelected=false;offset=offset||0;var sm=this.rowSelectionModel;sm.clear();for(var i=0;i<this.selections.length;i++){var each=this.selections[i];var top=each.origin.y;var size=each.extent.y;sm.select(top+offset,top+size+offset)}};SelectionModel.prototype.selectColumnsFromCells=function(offset){offset=offset||0;var sm=this.columnSelectionModel;sm.clear();for(var i=0;i<this.selections.length;i++){var each=this.selections[i];var top=each.origin.x;var size=each.extent.x;sm.select(top+offset,top+size+offset)}};SelectionModel.prototype.isInCurrentSelectionRectangle=function(x,y){var last=this.selections[this.selections.length-1];if(last){return this.getGrid().rectangles.rectangle.contains(last,x,y)}return false};module.exports=SelectionModel},{}],6:[function(require,module,exports){"use strict";module.exports={}},{}],7:[function(require,module,exports){"use strict";var mustache=require("mustache");function Base(){Object.call(this)}Base.prototype=new Object;Base.prototype.constructor=Base;Base.prototype.isEditing=false,Base.prototype.editorPoint=null,Base.prototype.checkEditorPositionFlag=false,Base.prototype.input=null,Base.prototype.alias="base",Base.prototype.grid=null,Base.prototype.initialValue=null,Base.prototype.getBehavior=function(){return this.grid.getBehavior()};Base.prototype.gridRenderedNotification=function(){this.checkEditor()};Base.prototype.scrollValueChangedNotification=function(){this.setCheckEditorPositionFlag()};Base.prototype.setCheckEditorPositionFlag=function(){this.checkEditorPositionFlag=true};Base.prototype.beginEditAt=function(point){this.setEditorPoint(point);var model=this.getBehavior();var value=model.getValue(point.x,point.y);if(value.constructor.name==="Array"){value=value[1]}var proceed=this.grid.fireRequestCellEdit(point,value);if(!proceed){return}this.initialValue=value;this.setEditorValue(value);this.isEditing=true;this.setCheckEditorPositionFlag();this.checkEditor()};Base.prototype.setEditorValue=function(value){noop(value)};Base.prototype.getEditorPoint=function(){return this.editorPoint};Base.prototype.setEditorPoint=function(point){this.editorPoint=point;this.modelPoint=this.getGrid().convertViewPointToDataPoint(point)};Base.prototype.showEditor=function(){};Base.prototype.hideEditor=function(){};Base.prototype.stopEditing=function(){if(!this.isEditing){return}var proceed=this.getGrid().fireSyntheticEditorDataChangeEvent(this,this.initialValue,this.getEditorValue,this);if(!proceed){return}this.saveEditorValue();this.isEditing=false;this.hideEditor()};Base.prototype.cancelEditing=function(){if(!this.isEditing){return}this.isEditing=false;this.hideEditor()};Base.prototype.saveEditorValue=function(){var point=this.getEditorPoint();var value=this.getEditorValue();if(value===this.initialValue){return}var continued=this.getGrid().fireBeforeCellEdit(point,this.initialValue,value,this);if(!continued){return}this.getBehavior().setValue(point.x,point.y,value);this.getGrid().fireAfterCellEdit(point,this.initialValue,value,this)};Base.prototype.getEditorValue=function(){};Base.prototype.takeFocus=function(){};Base.prototype._moveEditor=function(){var grid=this.getGrid();var editorPoint=this.getEditorPoint();var cellBounds=grid._getBoundsOfCell(editorPoint.x,editorPoint.y);var xOffset=grid.getBoundingClientRect().left-grid.canvas.getBoundingClientRect().left;cellBounds.x=cellBounds.x-xOffset;this.setBounds(cellBounds)};Base.prototype.moveEditor=function(){this._moveEditor();this.takeFocus()};Base.prototype.setBounds=function(rectangle){noop(rectangle)};Base.prototype.checkEditor=function(){if(!this.checkEditorPositionFlag){return}else{this.checkEditorPositionFlag=false}if(!this.isEditing){return}var editorPoint=this.getEditorPoint();if(this.grid.isDataVisible(editorPoint.x,editorPoint.y)){this.moveEditor();this.showEditor()}else{this.hideEditor()}};Base.prototype.getGrid=function(){return this.grid};Base.prototype.template=function(){};Base.prototype.getHTML=function(){var string=this.template.toString().split("\n");string.shift();string.length=string.length-2;string=string.join("\n").trim();var html=mustache.render(string,this);return html};Base.prototype.getInput=function(){if(!this.input){this.input=this.getDefaultInput()}return this.input};Base.prototype.getDefaultInput=function(){var div=document.createElement("DIV");div.innerHTML=this.getHTML();var input=div.firstChild;this.initializeInput(input);return input};Base.prototype.updateView=function(){var oldGuy=this.getInput();var parent=oldGuy.parentNode;var newGuy=this.getDefaultInput();this.input=newGuy;parent.replaceChild(newGuy,oldGuy)};Base.prototype.initializeInput=function(input){};Base.prototype.showDropdown=function(element){var event;event=document.createEvent("MouseEvents");event.initMouseEvent("mousedown",true,true,window);element.dispatchEvent(event)};module.exports=Base},{mustache:2}],8:[function(require,module,exports){"use strict";var Simple=require("./Simple.js");function Choice(){Simple.call(this)}Choice.prototype=new Simple;Choice.prototype.constructor=Choice;Choice.prototype.alias="choice";Choice.prototype.items=["a","b","c"];Choice.prototype.template=function(){};Choice.prototype.showEditor=function(){var self=this;this.input.style.display="inline";setTimeout(function(){self.showDropdown(self.input)},50)};Choice.prototype.setItems=function(items){this.items=items;this.updateView()};Choice.prototype.initializeInput=function(input){var self=this;Simple.prototype.initializeInput(input);input.onchange=function(){self.stopEditing()}};module.exports=Choice},{"./Simple.js":11}],9:[function(require,module,exports){"use strict";var Simple=require("./Simple.js");function Color(){Simple.call(this)}Color.prototype=new Simple;Color.prototype.constructor=Color;Color.prototype.alias="color";Color.prototype.template=function(){};module.exports=Color},{"./Simple.js":11}],10:[function(require,module,exports){"use strict";var Simple=require("./Simple.js");function Date(){Simple.call(this)}Date.prototype=new Simple;Date.prototype.constructor=Date;Date.prototype.alias="date";Date.prototype.template=function(){};module.exports=Date},{"./Simple.js":11}],11:[function(require,module,exports){"use strict";var Base=require("./Base.js");function Simple(){Base.call(this);this.editorPoint={x:0,y:0}}Simple.prototype=new Base;Simple.prototype.constructor=Simple;Simple.prototype.alias="simple";Simple.prototype.initializeInput=function(input){var self=this;input.addEventListener("keyup",function(e){if(e&&(e.keyCode===13||e.keyCode===27||e.keyCode===8)){e.preventDefault();if(e.keyCode===8){self.clearStopEditing()}else if(e.keyCode===27){self.cancelEditing()}else{self.stopEditing()}self.getGrid().repaint();self.getGrid().takeFocus()}self.getGrid().fireSyntheticEditorKeyUpEvent(self,e)});input.addEventListener("keydown",function(e){self.getGrid().fireSyntheticEditorKeyDownEvent(self,e)});input.addEventListener("keypress",function(e){console.log("keypress",e.keyCode);self.getGrid().fireSyntheticEditorKeyPressEvent(self,e)});input.style.position="absolute";input.style.display="none";input.style.border="solid 2px black";input.style.outline=0;input.style.padding=0;input.style.zIndex=1e3};Simple.prototype.getEditorValue=function(){var value=this.getInput().value;return value};Simple.prototype.setEditorValue=function(value){this.getInput().value=value+""};Simple.prototype.clearStopEditing=function(){this.setEditorValue("");this.stopEditing()};Simple.prototype.cancelEditing=function(){if(!this.isEditing){return}this.getInput().value=null;this.isEditing=false;this.hideEditor()};Simple.prototype.showEditor=function(){this.getInput().style.display="inline"};Simple.prototype.hideEditor=function(){this.getInput().style.display="none"};Simple.prototype.takeFocus=function(){var self=this;setTimeout(function(){self.input.focus();self.selectAll()},300)};Simple.prototype.selectAll=function(){};Simple.prototype.originOffset=function(){return[0,0]};Simple.prototype.setBounds=function(cellBounds){var originOffset=this.originOffset();var translation="translate("+(cellBounds.x+originOffset[0])+"px,"+(cellBounds.y+originOffset[1])+"px)";this.getInput().style.webkitTransform=translation;this.getInput().style.MozTransform=translation;this.getInput().style.msTransform=translation;this.getInput().style.OTransform=translation;this.getInput().style.width=cellBounds.width+"px";this.getInput().style.height=cellBounds.height-2+"px"};module.exports=Simple},{"./Base.js":7}],12:[function(require,module,exports){"use strict";var Simple=require("./Simple.js");function Slider(){Simple.call(this)}Slider.prototype=new Simple;Slider.prototype.constructor=Slider;Slider.prototype.alias="slider";Slider.prototype.template=function(){};module.exports=Slider},{"./Simple.js":11}],13:[function(require,module,exports){"use strict";var Simple=require("./Simple.js");function Spinner(){Simple.call(this)}Spinner.prototype=new Simple;Spinner.prototype.constructor=Spinner;Spinner.prototype.alias="spinner";Spinner.prototype.template=function(){};module.exports=Spinner},{"./Simple.js":11}],14:[function(require,module,exports){"use strict";var Simple=require("./Simple.js");function Textfield(){Simple.call(this)}Textfield.prototype=new Simple;Textfield.prototype.constructor=Textfield;Textfield.prototype.alias="textfield";Textfield.prototype.template=function(){};Textfield.prototype.selectAll=function(){this.input.setSelectionRange(0,this.input.value.length)};module.exports=Textfield},{"./Simple.js":11}],15:[function(require,module,exports){"use strict";module.exports={Base:require("./Base.js"),Simple:require("./Simple.js"),Choice:require("./Choice.js"),Color:require("./Color.js"),Date:require("./Date.js"),Slider:require("./Slider.js"),Spinner:require("./Spinner.js"),Textfield:require("./Textfield.js")}},{"./Base.js":7,"./Choice.js":8,"./Color.js":9,"./Date.js":10,"./Simple.js":11,"./Slider.js":12,"./Spinner.js":13,"./Textfield.js":14}],16:[function(require,module,exports){"use strict";function Base(){}Base.prototype={};Base.prototype.next=null;Base.prototype.grid=null;Base.prototype.setGrid=function(newGrid){this.grid=newGrid};Base.prototype.getGrid=function(){return this.grid};Base.prototype.getBehavior=function(){return this.getGrid().getBehavior()};Base.prototype.changed=function(){this.getBehavior().changed()};Base.prototype.getPrivateState=function(){return this.getGrid().getPrivateState()};Base.prototype.applyState=function(){};module.exports=Base},{}],17:[function(require,module,exports){"use strict";var Base=require("./Base.js");var alphaFor=function(i){var quo=Math.floor(i/26);var rem=i%26;var code="";if(quo>0){code+=String.fromCharCode("A".charCodeAt(0)+quo-1)}code+=String.fromCharCode("A".charCodeAt(0)+rem);return code};var a="ABCDEFGHIJKLMNOPQRSTUVWXYZ";function Default(){Base.call(this)}Default.prototype=Object.create(Base.prototype);Default.prototype.dataUpdates={};Default.prototype.getValue=function(x,y){var override=this.dataUpdates["p_"+x+"_"+y];if(override){return override}if(x===0){if(y===0){return""}return y}if(y===0){return alphaFor(x-1)}return x-1+", "+a[(y-1)%26]};Default.prototype.setValue=function(x,y,value){this.dataUpdates["p_"+x+"_"+y]=value};Default.prototype.getColumnCount=function(){return 27};Default.prototype.getRowCount=function(){return 53};module.exports=Default},{"./Base.js":16}],18:[function(require,module,exports){"use strict";var Base=require("./Base.js");var alphaFor=function(i){var quo=Math.floor(i/26);var rem=i%26;var code="";if(quo>0){code+=String.fromCharCode("A".charCodeAt(0)+quo-1)}code+=String.fromCharCode("A".charCodeAt(0)+rem);return code};var a="ABCDEFGHIJKLMNOPQRSTUVWXYZ";function InMemory(){Base.call(this)}InMemory.prototype=Object.create(Base.prototype);InMemory.prototype.dataUpdates={};InMemory.prototype.getValue=function(x,y){var override=this.dataUpdates["p_"+x+"_"+y];if(override){return override}if(x===0){if(y===0){return""}return y}if(y===0){return alphaFor(x-1)}return x-1+", "+a[(y-1)%26]};InMemory.prototype.setValue=function(x,y,value){this.dataUpdates["p_"+x+"_"+y]=value};InMemory.prototype.getColumnCount=function(){return 27};InMemory.prototype.getRowCount=function(){return 53};module.exports=InMemory},{"./Base.js":16}],19:[function(require,module,exports){"use strict";var Base=require("./Base.js");var alphaFor=function(i){var quo=Math.floor(i/26);var rem=i%26;var code="";if(quo>0){code+=String.fromCharCode("A".charCodeAt(0)+quo-1)}code+=String.fromCharCode("A".charCodeAt(0)+rem);return code};var a="ABCDEFGHIJKLMNOPQRSTUVWXYZ";function JSON(){Base.call(this)}JSON.prototype=Object.create(Base.prototype);var valueOrFunctionExecute=function(valueOrFunction){var isFunction=(typeof valueOrFunction)[0]==="f";var result=isFunction?valueOrFunction():valueOrFunction;return result};var textMatchFilter=function(string){return function(each){each=valueOrFunctionExecute(each);return(each+"").toLowerCase().search(string.toLowerCase())>-1}};var nullDataSource={isNullObject:function(){return true},getFields:function(){return[]},getHeaders:function(){return[]},getColumnCount:function(){return 0},getRowCount:function(){return 0},getGrandTotals:function(){return[]},hasAggregates:function(){return false},hasGroups:function(){return false},getRow:function(){return null}};JSON.prototype.source=nullDataSource,JSON.prototype.preglobalfilter=nullDataSource,JSON.prototype.prefilter=nullDataSource,JSON.prototype.presorter=nullDataSource,JSON.prototype.analytics=nullDataSource,JSON.prototype.postfilter=nullDataSource,JSON.prototype.postsorter=nullDataSource,JSON.prototype.topTotals=[],JSON.prototype.hasAggregates=function(){return this.analytics.hasAggregates()};JSON.prototype.hasGroups=function(){return this.analytics.hasGroups()};JSON.prototype.getDataSource=function(){var source=this.analytics;return source};JSON.prototype.getFilterSource=function(){var source=this.prefilter;return source};JSON.prototype.getSortingSource=function(){var source=this.presorter;return source};JSON.prototype.getValue=function(x,y){var hasHierarchyColumn=this.hasHierarchyColumn();var grid=this.getGrid();var headerRowCount=grid.getHeaderRowCount();var value;if(hasHierarchyColumn&&x===-2){x=0}if(y<headerRowCount){value=this.getHeaderRowValue(x,y);return value}if(hasHierarchyColumn){y+=1}value=this.getDataSource().getValue(x,y-headerRowCount);return value};JSON.prototype.getHeaderRowValue=function(x,y){if(y===undefined){return this.getHeaders()[Math.max(x,0)]}var grid=this.getGrid();var behavior=grid.getBehavior();var isFilterRow=grid.isShowFilterRow();var isHeaderRow=grid.isShowHeaderRow();var isBoth=isFilterRow&&isHeaderRow;var topTotalsOffset=(isFilterRow?1:0)+(isHeaderRow?1:0);if(y>=topTotalsOffset){return this.getTopTotals()[y-topTotalsOffset][x]}var filter=this.getFilter(x);var image=filter.length===0?"filter-off":"filter-on";if(isBoth){if(y===0){image=this.getSortImageForColumn(x);return[null,this.getHeaders()[x],image]}else{return[null,filter,behavior.getImage(image)]}}else if(isFilterRow){return[null,filter,behavior.getImage(image)]}else{image=this.getSortImageForColumn(x);return[null,this.getHeaders()[x],image]}return""};JSON.prototype.setValue=function(x,y,value){var hasHierarchyColumn=this.hasHierarchyColumn();var grid=this.getGrid();var headerRowCount=grid.getHeaderRowCount();if(hasHierarchyColumn){if(x===-2){return}else{x+=1}}if(y<headerRowCount){this.setHeaderRowValue(x,y,value)}else if(hasHierarchyColumn){y+=1}else{this.getDataSource().setValue(x,y-headerRowCount,value)}this.changed()};JSON.prototype.setHeaderRowValue=function(x,y,value){if(value===undefined){return this._setHeader(x,y)}var grid=this.getGrid();var isFilterRow=grid.isShowFilterRow();var isHeaderRow=grid.isShowHeaderRow();var isBoth=isFilterRow&&isHeaderRow;var topTotalsOffset=(isFilterRow?1:0)+(isHeaderRow?1:0);if(y>=topTotalsOffset){this.getTopTotals()[y-topTotalsOffset][x]=value}else if(x===-1){return}else if(isBoth){if(y===0){return this._setHeader(x,value)}else{this.setFilter(x,value)}}else if(isFilterRow){this.setFilter(x,value)}else{return this._setHeader(x,value)}return""};JSON.prototype.getColumnProperties=function(x){var column=this.getBehavior().allColumns[x];if(column){return column.getProperties()}return undefined};JSON.prototype.getFilter=function(x){var columnProperties=this.getColumnProperties(x);if(!columnProperties){return""}var filter=columnProperties.filter||"";return filter};JSON.prototype.setFilter=function(x,value){var columnProperties=this.getColumnProperties(x);columnProperties.filter=value;this.applyAnalytics()};JSON.prototype.getColumnCount=function(){var count=this.analytics.getColumnCount();return count};JSON.prototype.getRowCount=function(){var grid=this.getGrid();var count=this.getDataSource().getRowCount();count+=grid.getHeaderRowCount();return count};JSON.prototype.getHeaders=function(){var headers=this.analytics.getHeaders();return headers};JSON.prototype.getDefaultHeaders=function(){};JSON.prototype.setHeaders=function(headers){this.getDataSource().setHeaders(headers)};JSON.prototype.setFields=function(fields){
this.getDataSource().setFields(fields)};JSON.prototype.getFields=function(){var fields=this.getDataSource().getFields();return fields};JSON.prototype.setData=function(arrayOfUniformObjects){if(!this.analytics.isNullObject){this.analytics.dataSource.setData(arrayOfUniformObjects)}else{this.source=new fin.analytics.JSDataSource(arrayOfUniformObjects);this.preglobalfilter=new fin.analytics.DataSourceGlobalFilter(this.source);this.prefilter=new fin.analytics.DataSourceFilter(this.preglobalfilter);this.presorter=new fin.analytics.DataSourceSorterComposite(this.prefilter);this.analytics=new fin.analytics.DataSourceAggregator(this.presorter)}this.applyAnalytics()};JSON.prototype.getTopTotals=function(){if(!this.hasAggregates()){return this.topTotals}return this.getDataSource().getGrandTotals()};JSON.prototype.setTopTotals=function(nestedArray){this.topTotals=nestedArray};JSON.prototype.setGroups=function(groups){this.analytics.setGroupBys(groups);this.applyAnalytics();this.getGrid().fireSyntheticGroupsChangedEvent(this.getGroups())};JSON.prototype.getGroups=function(){var headers=this.getHeaders().slice(0);var fields=this.getFields().slice(0);var groupBys=this.analytics.groupBys;var groups=[];for(var i=0;i<groupBys.length;i++){var field=headers[groupBys[i]];groups.push({id:groupBys[i],label:field,field:fields})}return groups};JSON.prototype.getAvailableGroups=function(){var headers=this.source.getHeaders().slice(0);var groupBys=this.analytics.groupBys;var groups=[];for(var i=0;i<headers.length;i++){if(groupBys.indexOf(i)===-1){var field=headers[i];groups.push({id:i,label:field,field:field})}}return groups};JSON.prototype.getVisibleColumns=function(){var items=this.getBehavior().columns;items=items.filter(function(each){return each.label!=="Tree"});return items};JSON.prototype.getHiddenColumns=function(){var visible=this.getBehavior().columns;var all=this.getBehavior().allColumns;var hidden=[];for(var i=0;i<all.length;i++){if(visible.indexOf(all[i])===-1){hidden.push(all[i])}}hidden.sort(function(a,b){return a.label<b.label});return hidden};JSON.prototype.setAggregates=function(aggregations){this.quietlySetAggregates(aggregations);this.applyAnalytics()};JSON.prototype.quietlySetAggregates=function(aggregations){this.analytics.setAggregates(aggregations)};JSON.prototype.hasHierarchyColumn=function(){return this.hasAggregates()&&this.hasGroups()};JSON.prototype.applyAnalytics=function(){this.applyFilters();this.applySorts();this.applyGroupBysAndAggregations()};JSON.prototype.applyGroupBysAndAggregations=function(){if(this.analytics.aggregates.length===0){this.quietlySetAggregates({})}this.analytics.apply()};JSON.prototype.applyFilters=function(){this.preglobalfilter.applyFilters();var colCount=this.getColumnCount();var filterSource=this.getFilterSource();var groupOffset=this.hasAggregates()?1:0;filterSource.clearFilters();for(var i=0;i<colCount;i++){var filterText=this.getFilter(i);if(filterText.length>0){filterSource.addFilter(i-groupOffset,textMatchFilter(filterText))}}filterSource.applyFilters()};JSON.prototype.toggleSort=function(index,keys){this.incrementSortState(index,keys);this.applyAnalytics()};JSON.prototype.incrementSortState=function(colIndex,keys){colIndex++;var state=this.getPrivateState();var hasCTRL=keys.indexOf("CTRL")>-1;state.sorts=state.sorts||[];var already=state.sorts.indexOf(colIndex);if(already===-1){already=state.sorts.indexOf(-1*colIndex)}if(already>-1){if(state.sorts[already]>0){state.sorts[already]=-1*state.sorts[already]}else{state.sorts.splice(already,1)}}else if(hasCTRL||state.sorts.length===0){state.sorts.unshift(colIndex)}else{state.sorts.length=0;state.sorts.unshift(colIndex)}if(state.sorts.length>3){state.sorts.length=3}};JSON.prototype.applySorts=function(){var sortingSource=this.getSortingSource();var sorts=this.getPrivateState().sorts;var groupOffset=this.hasAggregates()?1:0;if(!sorts||sorts.length===0){sortingSource.clearSorts()}else{for(var i=0;i<sorts.length;i++){var colIndex=Math.abs(sorts[i])-1;var type=sorts[i]<0?-1:1;sortingSource.sortOn(colIndex-groupOffset,type)}}sortingSource.applySorts()};JSON.prototype.getSortImageForColumn=function(index){index++;var up=true;var sorts=this.getPrivateState().sorts;if(!sorts){return null}var position=sorts.indexOf(index);if(position<0){position=sorts.indexOf(-1*index);up=false}if(position<0){return null}position++;var name=1+sorts.length-position+(up?"-up":"-down");return this.getBehavior().getImage(name)};JSON.prototype.cellClicked=function(cell,event){if(!this.hasAggregates()){return}if(event.gridCell.x!==0){return}var grid=this.getGrid();var headerRowCount=grid.getHeaderRowCount();var y=event.gridCell.y-headerRowCount+1;this.analytics.click(y);this.changed()};JSON.prototype.getRow=function(y){var grid=this.getGrid();var headerRowCount=grid.getHeaderRowCount();if(y<headerRowCount&&!this.hasAggregates()){var topTotals=this.getTopTotals();return topTotals[y-(headerRowCount-topTotals.length)]}return this.getDataSource().getRow(y-headerRowCount)};JSON.prototype.buildRow=function(y){var colCount=this.getColumnCount();var fields=[].concat(this.getFields());var result={};if(this.hasAggregates()){result.tree=this.getValue(-2,y);fields.shift()}for(var i=0;i<colCount;i++){result[fields[i]]=this.getValue(i,y)}return result};JSON.prototype.getComputedRow=function(y){var rcf=this.getRowContextFunction([y]);var fields=this.getFields();var row={};for(var i=0;i<fields.length;i++){var field=fields[i];row[field]=rcf(field)[0]}return row};JSON.prototype.getValueByField=function(fieldName,y){var index=this.getFields().indexOf(fieldName);if(this.hasAggregates()){y+=1}return this.getDataSource().getValue(index,y)};JSON.prototype.setGlobalFilter=function(string){if(!string||string.length===0){this.preglobalfilter.clearFilters()}else{this.preglobalfilter.setFilter(textMatchFilter(string))}this.applyAnalytics()};JSON.prototype.getCellRenderer=function(config,x,y,untranslatedX,untranslatedY){var renderer;var provider=this.getGrid().getCellProvider();config.x=x;config.y=y;config.untranslatedX=untranslatedX;config.untranslatedY=untranslatedY;renderer=provider.getCell(config);renderer.config=config;return renderer};JSON.prototype.applyState=function(){this.applyAnalytics()};module.exports=JSON},{"./Base.js":16}],20:[function(require,module,exports){"use strict";module.exports={Default:require("./Default.js"),InMemory:require("./InMemory.js"),JSON:require("./JSON.js")}},{"./Default.js":17,"./InMemory.js":18,"./JSON.js":19}],21:[function(require,module,exports){"use strict";function Base(){}Base.prototype={};Base.prototype.next=null;Base.prototype.detached=null;Base.prototype.cursor=null;Base.prototype.currentHoverCell=null;Base.prototype.setNext=function(nextFeature){if(this.next){this.next.setNext(nextFeature)}else{this.next=nextFeature;this.detached=nextFeature}};Base.prototype.detachChain=function(){this.next=null};Base.prototype.attachChain=function(){this.next=this.detached};Base.prototype.handleMouseMove=function(grid,event){if(this.next){this.next.handleMouseMove(grid,event)}};Base.prototype.handleMouseExit=function(grid,event){if(this.next){this.next.handleMouseExit(grid,event)}};Base.prototype.handleMouseEnter=function(grid,event){if(this.next){this.next.handleMouseEnter(grid,event)}};Base.prototype.handleMouseDown=function(grid,event){if(this.next){this.next.handleMouseDown(grid,event)}};Base.prototype.handleMouseUp=function(grid,event){if(this.next){this.next.handleMouseUp(grid,event)}};Base.prototype.handleKeyDown=function(grid,event){if(this.next){this.next.handleKeyDown(grid,event)}};Base.prototype.handleKeyUp=function(grid,event){if(this.next){this.next.handleKeyUp(grid,event)}};Base.prototype.handleWheelMoved=function(grid,event){if(this.next){this.next.handleWheelMoved(grid,event)}};Base.prototype.handleDoubleClick=function(grid,event){if(this.next){this.next.handleDoubleClick(grid,event)}};Base.prototype.handleHoldPulse=function(grid,event){if(this.next){this.next.handleHoldPulse(grid,event)}};Base.prototype.handleTap=function(grid,event){if(this.next){this.next.handleTap(grid,event)}};Base.prototype.handleMouseDrag=function(grid,event){if(this.next){this.next.handleMouseDrag(grid,event)}};Base.prototype.handleContextMenu=function(grid,event){if(this.next){this.next.handleContextMenu(grid,event)}};Base.prototype.toggleColumnPicker=function(grid){if(this.next){this.next.toggleColumnPicker(grid)}};Base.prototype.moveSingleSelect=function(grid,x,y){if(this.next){this.next.moveSingleSelect(grid,x,y)}};Base.prototype.isFixedRow=function(grid,event){var gridCell=event.viewPoint;var isFixed=gridCell.y<grid.getFixedRowCount();return isFixed};Base.prototype.isFirstFixedRow=function(grid,event){var gridCell=event.viewPoint;var isFixed=gridCell.y<1;return isFixed};Base.prototype.isFixedColumn=function(grid,event){var gridCell=event.viewPoint;var isFixed=gridCell.x<grid.getFixedColumnCount();return isFixed};Base.prototype.isFirstFixedColumn=function(grid,event){var gridCell=event.viewPoint;var edge=grid.isShowRowNumbers()?0:1;var isFixed=gridCell.x<edge;return isFixed};Base.prototype.isTopLeft=function(grid,event){var isTopLeft=this.isFixedRow(grid,event)&&this.isFixedColumn(grid,event);return isTopLeft};Base.prototype.setCursor=function(grid){if(this.next){this.next.setCursor(grid)}if(this.cursor){grid.beCursor(this.cursor)}};Base.prototype.initializeOn=function(grid){if(this.next){this.next.initializeOn(grid)}};module.exports=Base},{}],22:[function(require,module,exports){"use strict";var Base=require("./Base.js");function CellClick(){Base.call(this);this.alias="CellClick"}CellClick.prototype=Object.create(Base.prototype);CellClick.prototype.handleTap=function(grid,event){var gridCell=event.gridCell;var behavior=grid.getBehavior();var headerRowCount=behavior.getHeaderRowCount();var headerColumnCount=behavior.getHeaderColumnCount();if(gridCell.y>=headerRowCount&&gridCell.x>=headerColumnCount){grid.cellClicked(event)}else if(this.next){this.next.handleTap(grid,event)}};module.exports=CellClick},{"./Base.js":21}],23:[function(require,module,exports){"use strict";var Base=require("./Base.js");function CellEditing(){Base.call(this);this.alias="CellEditing"}CellEditing.prototype=Object.create(Base.prototype);CellEditing.prototype.handleDoubleClick=function(grid,event){var behavior=grid.getBehavior();var headerRowCount=behavior.getHeaderRowCount();var headerColumnCount=behavior.getHeaderColumnCount();var gridCell=event.gridCell;if(gridCell.x>=headerColumnCount&&gridCell.y>=headerRowCount){grid._activateEditor(event)}else if(this.next){this.next.handleDoubleClick(grid,event)}};CellEditing.prototype.handleHoldPulse=function(grid,event){var behavior=grid.getBehavior();var headerRowCount=behavior.getHeaderRowCount();var headerColumnCount=behavior.getHeaderColumnCount();var gridCell=event.gridCell;if(gridCell.x>=headerColumnCount&&gridCell.y>=headerRowCount){grid._activateEditor(event)}else if(this.next){this.next.handleHoldPulse(grid,event)}};module.exports=CellEditing},{"./Base.js":21}],24:[function(require,module,exports){"use strict";var Base=require("./Base.js");function CellSelection(){Base.call(this);this.alias="CellSelection"}CellSelection.prototype=Object.create(Base.prototype);CellSelection.prototype.currentDrag=null;CellSelection.prototype.lastDragCell=null;CellSelection.prototype.sbLastAuto=0;CellSelection.prototype.sbAutoStart=0;CellSelection.prototype.handleMouseUp=function(grid,event){if(this.dragging){this.dragging=false}if(this.next){this.next.handleMouseUp(grid,event)}};CellSelection.prototype.handleMouseDown=function(grid,event){var isRightClick=event.primitiveEvent.detail.isRightClick;var behavior=grid.getBehavior();var cell=event.gridCell;var viewCell=event.viewPoint;var dx=cell.x;var dy=cell.y;var headerRowCount=behavior.getHeaderRowCount();var headerColumnCount=behavior.getHeaderColumnCount();var columnCount=behavior.getColumnCount();var isOutside=viewCell.x>=columnCount;var isHeader=dy<headerRowCount||dx<headerColumnCount;if(!grid.isCellSelection()||isRightClick||isHeader||isOutside){if(this.next){this.next.handleMouseDown(grid,event)}}else{var numFixedColumns=grid.getFixedColumnCount();var numFixedRows=grid.getFixedRowCount();if(viewCell.x<numFixedColumns){dx=viewCell.x}if(viewCell.y<numFixedRows){dy=viewCell.y}var dCell=grid.newPoint(dx,dy);var primEvent=event.primitiveEvent;var keys=primEvent.detail.keys;this.dragging=true;this.extendSelection(grid,dCell,keys)}};CellSelection.prototype.handleMouseDrag=function(grid,event){var isRightClick=event.primitiveEvent.detail.isRightClick;if(!grid.isCellSelection()||isRightClick||!this.dragging){if(this.next){this.next.handleMouseDrag(grid,event)}}else{var numFixedColumns=grid.getFixedColumnCount();var numFixedRows=grid.getFixedRowCount();var cell=event.gridCell;var viewCell=event.viewPoint;var dx=cell.x;var dy=cell.y;if(viewCell.x<numFixedColumns){dx=viewCell.x}if(viewCell.y<numFixedRows){dy=viewCell.y}var dCell=grid.newPoint(dx,dy);var primEvent=event.primitiveEvent;this.currentDrag=primEvent.detail.mouse;this.lastDragCell=dCell;this.checkDragScroll(grid,this.currentDrag);this.handleMouseDragCellSelection(grid,dCell,primEvent.detail.keys)}};CellSelection.prototype.handleKeyDown=function(grid,event){var command="handle"+event.detail.char;if(this[command]){this[command].call(this,grid,event.detail)}};CellSelection.prototype.handleMouseDragCellSelection=function(grid,gridCell){var behavior=grid.getBehavior();var headerRowCount=behavior.getHeaderRowCount();var headerColumnCount=behavior.getHeaderColumnCount();var x=gridCell.x;var y=gridCell.y;x=Math.max(headerColumnCount,x);y=Math.max(headerRowCount,y);var previousDragExtent=grid.getDragExtent();var mouseDown=grid.getMouseDown();var newX=x-mouseDown.x;var newY=y-mouseDown.y;if(previousDragExtent.x===newX&&previousDragExtent.y===newY){return}grid.clearMostRecentSelection();grid.select(mouseDown.x,mouseDown.y,newX,newY);grid.setDragExtent(grid.newPoint(newX,newY));grid.repaint()};CellSelection.prototype.checkDragScroll=function(grid,mouse){if(!grid.resolveProperty("scrollingEnabled")){return}var b=grid.getDataBounds();var inside=b.contains(mouse);if(inside){if(grid.isScrollingNow()){grid.setScrollingNow(false)}}else if(!grid.isScrollingNow()){grid.setScrollingNow(true);this.scrollDrag(grid)}};CellSelection.prototype.scrollDrag=function(grid){if(!grid.isScrollingNow()){return}var dragStartedInHeaderArea=grid.isMouseDownInHeaderArea();var lastDragCell=this.lastDragCell;var b=grid.getDataBounds();var xOffset=0;var yOffset=0;var numFixedColumns=grid.getFixedColumnCount();var numFixedRows=grid.getFixedRowCount();var dragEndInFixedAreaX=lastDragCell.x<numFixedColumns;var dragEndInFixedAreaY=lastDragCell.y<numFixedRows;if(!dragStartedInHeaderArea){if(this.currentDrag.x<b.origin.x){xOffset=-1}if(this.currentDrag.y<b.origin.y){yOffset=-1}}if(this.currentDrag.x>b.origin.x+b.extent.x){xOffset=1}if(this.currentDrag.y>b.origin.y+b.extent.y){yOffset=1}var dragCellOffsetX=xOffset;var dragCellOffsetY=yOffset;if(dragEndInFixedAreaX){dragCellOffsetX=0}if(dragEndInFixedAreaY){dragCellOffsetY=0}this.lastDragCell=lastDragCell.plusXY(dragCellOffsetX,dragCellOffsetY);grid.scrollBy(xOffset,yOffset);this.handleMouseDragCellSelection(grid,lastDragCell,[]);grid.repaint();setTimeout(this.scrollDrag.bind(this,grid),25)};CellSelection.prototype.extendSelection=function(grid,gridCell,keys){var hasCTRL=keys.indexOf("CTRL")!==-1;var hasSHIFT=keys.indexOf("SHIFT")!==-1;var mousePoint=grid.getMouseDown();var x=gridCell.x;var y=gridCell.y;if(x<0||y<0){return}if(x===mousePoint.x&&y===mousePoint.y){grid.clearMostRecentSelection();grid.popMouseDown();grid.repaint();return}if(!hasCTRL&&!hasSHIFT){grid.clearSelections()}if(hasSHIFT){grid.clearMostRecentSelection();grid.select(mousePoint.x,mousePoint.y,x-mousePoint.x,y-mousePoint.y);grid.setDragExtent(grid.newPoint(x-mousePoint.x,y-mousePoint.y))}else{grid.select(x,y,0,0);grid.setMouseDown(grid.newPoint(x,y));grid.setDragExtent(grid.newPoint(0,0))}grid.repaint()};CellSelection.prototype.handleDOWNSHIFT=function(grid){this.moveShiftSelect(grid,0,1)};CellSelection.prototype.handleUPSHIFT=function(grid){this.moveShiftSelect(grid,0,-1)};CellSelection.prototype.handleLEFTSHIFT=function(grid){this.moveShiftSelect(grid,-1,0)};CellSelection.prototype.handleRIGHTSHIFT=function(grid){this.moveShiftSelect(grid,1,0)};CellSelection.prototype.handleDOWN=function(grid,event){event.primitiveEvent.preventDefault();var count=this.getAutoScrollAcceleration();this.moveSingleSelect(grid,0,count)};CellSelection.prototype.handleUP=function(grid,event){event.primitiveEvent.preventDefault();var count=this.getAutoScrollAcceleration();this.moveSingleSelect(grid,0,-count)};CellSelection.prototype.handleLEFT=function(grid){this.moveSingleSelect(grid,-1,0)};CellSelection.prototype.handleRIGHT=function(grid){this.moveSingleSelect(grid,1,0)};CellSelection.prototype.getAutoScrollAcceleration=function(){var count=1;var elapsed=this.getAutoScrollDuration()/2e3;count=Math.max(1,Math.floor(elapsed*elapsed*elapsed*elapsed));return count};CellSelection.prototype.setAutoScrollStartTime=function(){this.sbAutoStart=Date.now()};CellSelection.prototype.pingAutoScroll=function(){var now=Date.now();if(now-this.sbLastAuto>500){this.setAutoScrollStartTime()}this.sbLastAuto=Date.now()};CellSelection.prototype.getAutoScrollDuration=function(){if(Date.now()-this.sbLastAuto>500){return 0}return Date.now()-this.sbAutoStart};CellSelection.prototype.moveShiftSelect=function(grid,offsetX,offsetY){var maxColumns=grid.getColumnCount()-1;var maxRows=grid.getRowCount()-1;var maxViewableColumns=grid.getVisibleColumns()-1;var maxViewableRows=grid.getVisibleRows()-1;if(!grid.resolveProperty("scrollingEnabled")){maxColumns=Math.min(maxColumns,maxViewableColumns);maxRows=Math.min(maxRows,maxViewableRows)}var origin=grid.getMouseDown();var extent=grid.getDragExtent();var newX=extent.x+offsetX;var newY=extent.y+offsetY;newX=Math.min(maxColumns-origin.x,Math.max(-origin.x,newX));newY=Math.min(maxRows-origin.y,Math.max(-origin.y,newY));grid.clearMostRecentSelection();grid.select(origin.x,origin.y,newX,newY);grid.setDragExtent(grid.newPoint(newX,newY));if(grid.insureModelColIsVisible(newX+origin.x,offsetX)){this.pingAutoScroll()}if(grid.insureModelRowIsVisible(newY+origin.y,offsetY)){this.pingAutoScroll()}grid.repaint()};CellSelection.prototype.moveSingleSelect=function(grid,offsetX,offsetY){var maxColumns=grid.getColumnCount()-1;var maxRows=grid.getRowCount()-1;var maxViewableColumns=grid.getVisibleColumnsCount()-1;var maxViewableRows=grid.getVisibleRowsCount()-1;var minRows=grid.getHeaderRowCount();var minCols=grid.getHeaderColumnCount();if(!grid.resolveProperty("scrollingEnabled")){maxColumns=Math.min(maxColumns,maxViewableColumns);maxRows=Math.min(maxRows,maxViewableRows)}var mouseCorner=grid.getMouseDown().plus(grid.getDragExtent());var newX=mouseCorner.x+offsetX;var newY=mouseCorner.y+offsetY;newX=Math.min(maxColumns,Math.max(minCols,newX));newY=Math.min(maxRows,Math.max(minRows,newY));grid.clearSelections();grid.select(newX,newY,0,0);grid.setMouseDown(grid.newPoint(newX,newY));grid.setDragExtent(grid.newPoint(0,0));if(grid.insureModelColIsVisible(newX,offsetX)){this.pingAutoScroll()}if(grid.insureModelRowIsVisible(newY,offsetY)){this.pingAutoScroll()}grid.repaint()};module.exports=CellSelection},{"./Base.js":21}],25:[function(require,module,exports){"use strict";var Base=require("./Base.js");function ColumnAutosizing(){Base.call(this);this.alias="ColumnAutosizing"}ColumnAutosizing.prototype=Object.create(Base.prototype);ColumnAutosizing.prototype.handleDoubleClick=function(grid,event){var headerRowCount=grid.getHeaderRowCount();var gridCell=event.gridCell;if(gridCell.y<=headerRowCount){grid.autosizeColumn(gridCell.x)}else if(this.next){this.next.handleDoubleClick(grid,event)}};module.exports=ColumnAutosizing},{"./Base.js":21}],26:[function(require,module,exports){"use strict";var Base=require("./Base.js");function ColumnMoving(){Base.call(this);this.alias="ColumnMoving"}ColumnMoving.prototype=Object.create(Base.prototype);var noop=function(){};var columnAnimationTime=150;var dragger;var draggerCTX;var floatColumn;var floatColumnCTX;ColumnMoving.prototype.floaterAnimationQueue=[];ColumnMoving.prototype.columnDragAutoScrollingRight=false;ColumnMoving.prototype.columnDragAutoScrollingLeft=false;ColumnMoving.prototype.dragArmed=false;ColumnMoving.prototype.dragging=false;ColumnMoving.prototype.dragCol=-1;ColumnMoving.prototype.dragOffset=0;ColumnMoving.prototype.initializeOn=function(grid){this.isFloatingNow=false;this.initializeAnimationSupport(grid);if(this.next){this.next.initializeOn(grid)}};ColumnMoving.prototype.initializeAnimationSupport=function(grid){noop(grid);if(!dragger){dragger=document.createElement("canvas");dragger.setAttribute("width","0px");dragger.setAttribute("height","0px");document.body.appendChild(dragger);draggerCTX=dragger.getContext("2d")}if(!floatColumn){floatColumn=document.createElement("canvas");floatColumn.setAttribute("width","0px");floatColumn.setAttribute("height","0px");document.body.appendChild(floatColumn);floatColumnCTX=floatColumn.getContext("2d")}};ColumnMoving.prototype.getCanDragCursorName=function(){return"-webkit-grab"};ColumnMoving.prototype.getDraggingCursorName=function(){return"-webkit-grabbing"};ColumnMoving.prototype.handleMouseDrag=function(grid,event){var gridCell=event.gridCell;var x,y;var distance=Math.abs(event.primitiveEvent.detail.dragstart.x-event.primitiveEvent.detail.mouse.x);if(distance<10){if(this.next){this.next.handleMouseDrag(grid,event)}return}if(this.isHeaderRow(grid,event)&&this.dragArmed&&!this.dragging){this.dragging=true;this.dragCol=gridCell.x;this.dragOffset=event.mousePoint.x;this.detachChain();x=event.primitiveEvent.detail.mouse.x-this.dragOffset;y=event.primitiveEvent.detail.mouse.y;this.createDragColumn(grid,x,this.dragCol)}else if(this.next){this.next.handleMouseDrag(grid,event)}if(this.dragging){x=event.primitiveEvent.detail.mouse.x-this.dragOffset;y=event.primitiveEvent.detail.mouse.y;this.dragColumn(grid,x)}};ColumnMoving.prototype.handleMouseDown=function(grid,event){if(grid.getBehavior().isColumnReorderable()){if(this.isHeaderRow(grid,event)&&event.gridCell.x!==-1){this.dragArmed=true;this.cursor=this.getDraggingCursorName();grid.clearSelections()}}if(this.next){this.next.handleMouseDown(grid,event)}};ColumnMoving.prototype.handleMouseUp=function(grid,event){if(this.dragging){this.cursor=null;var self=this;this.endDragColumn(grid);setTimeout(function(){self.attachChain()},200)}this.dragCol=-1;this.dragging=false;this.dragArmed=false;this.cursor=null;grid.repaint();if(this.next){this.next.handleMouseUp(grid,event)}};ColumnMoving.prototype.handleMouseMove=function(grid,event){if(!this.dragging&&event.mousePoint.y<5&&event.viewPoint.y===0){this.cursor=this.getCanDragCursorName()}else{this.cursor=null}if(this.next){this.next.handleMouseMove(grid,event)}if(this.isHeaderRow(grid,event)&&this.dragging){this.cursor=this.getDraggingCursorName()}};ColumnMoving.prototype.floatColumnTo=function(grid,draggedToTheRight){this.floatingNow=true;var renderer=grid.getRenderer();var colEdges=renderer.getColumnEdges();var scrollLeft=grid.getHScrollValue();var floaterIndex=grid.renderOverridesCache.floater.columnIndex;var draggerIndex=grid.renderOverridesCache.dragger.columnIndex;var hdpiratio=grid.renderOverridesCache.dragger.hdpiratio;var draggerStartX;var floaterStartX;var fixedColumnCount=grid.getFixedColumnCount();var draggerWidth=grid.getColumnWidth(draggerIndex);var floaterWidth=grid.getColumnWidth(floaterIndex);var max=grid.getVisibleColumnsCount();var doffset=0;var foffset=0;if(draggerIndex>=fixedColumnCount){doffset=scrollLeft}if(floaterIndex>=fixedColumnCount){foffset=scrollLeft}if(draggedToTheRight){draggerStartX=colEdges[Math.min(max,draggerIndex-doffset)];floaterStartX=colEdges[Math.min(max,floaterIndex-foffset)];grid.renderOverridesCache.dragger.startX=(draggerStartX+floaterWidth)*hdpiratio;grid.renderOverridesCache.floater.startX=draggerStartX*hdpiratio}else{floaterStartX=colEdges[Math.min(max,floaterIndex-foffset)];draggerStartX=floaterStartX+draggerWidth;grid.renderOverridesCache.dragger.startX=floaterStartX*hdpiratio;grid.renderOverridesCache.floater.startX=draggerStartX*hdpiratio}grid.swapColumns(draggerIndex,floaterIndex);grid.renderOverridesCache.dragger.columnIndex=floaterIndex;grid.renderOverridesCache.floater.columnIndex=draggerIndex;this.floaterAnimationQueue.unshift(this.doColumnMoveAnimation(grid,floaterStartX,draggerStartX));this.doFloaterAnimation(grid)};ColumnMoving.prototype.doColumnMoveAnimation=function(grid,floaterStartX,draggerStartX){var self=this;return function(){var d=floatColumn;d.style.display="inline";self.setCrossBrowserProperty(d,"transform","translate("+floaterStartX+"px, "+0+"px)");window.requestAnimationFrame(function(){self.setCrossBrowserProperty(d,"transition",(self.isWebkit?"-webkit-":"")+"transform "+columnAnimationTime+"ms ease");self.setCrossBrowserProperty(d,"transform","translate("+draggerStartX+"px, "+-2+"px)")});grid.repaint();setTimeout(function(){self.setCrossBrowserProperty(d,"transition","");grid.renderOverridesCache.floater=null;grid.repaint();self.doFloaterAnimation(grid);requestAnimationFrame(function(){d.style.display="none";self.isFloatingNow=false})},columnAnimationTime+50)}};ColumnMoving.prototype.doFloaterAnimation=function(grid){if(this.floaterAnimationQueue.length===0){this.floatingNow=false;grid.repaint();return}var animation=this.floaterAnimationQueue.pop();animation()};ColumnMoving.prototype.createFloatColumn=function(grid,columnIndex){var fixedColumnCount=grid.getFixedColumnCount();var scrollLeft=grid.getHScrollValue();if(columnIndex<fixedColumnCount){scrollLeft=0}var renderer=grid.getRenderer();var columnEdges=renderer.getColumnEdges();var columnWidth=grid.getColumnWidth(columnIndex);var colHeight=grid.clientHeight;var d=floatColumn;var style=d.style;var location=grid.getBoundingClientRect();style.top=location.top-2+"px";style.left=location.left+"px";style.position="fixed";var hdpiRatio=grid.getHiDPI(floatColumnCTX);d.setAttribute("width",Math.round(columnWidth*hdpiRatio)+"px");d.setAttribute("height",Math.round(colHeight*hdpiRatio)+"px");style.boxShadow="0 10px 20px rgba(0,0,0,0.19), 0 6px 6px rgba(0,0,0,0.23)";style.width=columnWidth+"px";style.height=colHeight+"px";style.borderTop="1px solid "+renderer.resolveProperty("lineColor");style.backgroundColor=renderer.resolveProperty("backgroundColor");var startX=columnEdges[columnIndex-scrollLeft];startX=startX*hdpiRatio;floatColumnCTX.scale(hdpiRatio,hdpiRatio);grid.renderOverridesCache.floater={columnIndex:columnIndex,ctx:floatColumnCTX,startX:startX,width:columnWidth,height:colHeight,hdpiratio:hdpiRatio};style.zIndex="4";this.setCrossBrowserProperty(d,"transform","translate("+startX+"px, "+-2+"px)");style.cursor=this.getDraggingCursorName();grid.repaint()};ColumnMoving.prototype.setCrossBrowserProperty=function(element,property,value){var uProperty=property[0].toUpperCase()+property.substr(1);this.setProp(element,"webkit"+uProperty,value);this.setProp(element,"Moz"+uProperty,value);this.setProp(element,"ms"+uProperty,value);this.setProp(element,"O"+uProperty,value);this.setProp(element,property,value)};ColumnMoving.prototype.setProp=function(element,property,value){if(property in element.style){element.style[property]=value}};ColumnMoving.prototype.createDragColumn=function(grid,x,columnIndex){var fixedColumnCount=grid.getFixedColumnCount();var scrollLeft=grid.getHScrollValue();if(columnIndex<fixedColumnCount){scrollLeft=0}var renderer=grid.getRenderer();var columnEdges=renderer.getColumnEdges();var hdpiRatio=grid.getHiDPI(draggerCTX);var columnWidth=grid.getColumnWidth(columnIndex);var colHeight=grid.clientHeight;var d=dragger;var location=grid.getBoundingClientRect();var style=d.style;style.top=location.top+"px";style.left=location.left+"px";style.position="fixed";style.opacity=.85;style.boxShadow="0 19px 38px rgba(0,0,0,0.30), 0 15px 12px rgba(0,0,0,0.22)";style.borderTop="1px solid "+renderer.resolveProperty("lineColor");style.backgroundColor=grid.renderer.resolveProperty("backgroundColor");d.setAttribute("width",Math.round(columnWidth*hdpiRatio)+"px");d.setAttribute("height",Math.round(colHeight*hdpiRatio)+"px");style.width=columnWidth+"px";style.height=colHeight+"px";var startX=columnEdges[columnIndex-scrollLeft];startX=startX*hdpiRatio;draggerCTX.scale(hdpiRatio,hdpiRatio);grid.renderOverridesCache.dragger={columnIndex:columnIndex,ctx:draggerCTX,startX:startX,width:columnWidth,height:colHeight,hdpiratio:hdpiRatio};this.setCrossBrowserProperty(d,"transform","translate("+x+"px, -5px)");style.zIndex="5";style.cursor=this.getDraggingCursorName();grid.repaint()};ColumnMoving.prototype.dragColumn=function(grid,x){var self=this;var autoScrollingNow=this.columnDragAutoScrollingRight||this.columnDragAutoScrollingLeft;var hdpiRatio=grid.getHiDPI(draggerCTX);var dragColumnIndex=grid.renderOverridesCache.dragger.columnIndex;var columnWidth=grid.renderOverridesCache.dragger.width;var minX=0;var maxX=grid.renderer.getFinalVisableColumnBoundry()-columnWidth;x=Math.min(x,maxX+15);x=Math.max(minX-15,x);var atMin=x<minX&&dragColumnIndex!==0;var atMax=x>maxX;var d=dragger;this.setCrossBrowserProperty(d,"transition",(self.isWebkit?"-webkit-":"")+"transform "+0+"ms ease, box-shadow "+columnAnimationTime+"ms ease");this.setCrossBrowserProperty(d,"transform","translate("+x+"px, "+-10+"px)");requestAnimationFrame(function(){d.style.display="inline"});var overCol=grid.renderer.getColumnFromPixelX(x+d.width/2/hdpiRatio);if(atMin){overCol=0}if(atMax){overCol=grid.getColumnCount()-1}var doAFloat=dragColumnIndex>overCol;doAFloat=doAFloat||overCol-dragColumnIndex>=1;if(doAFloat&&!atMax&&!autoScrollingNow){var draggedToTheRight=dragColumnIndex<overCol;if(this.isFloatingNow){return}this.isFloatingNow=true;this.createFloatColumn(grid,overCol);this.floatColumnTo(grid,draggedToTheRight)}else{if(x<minX-10){this.checkAutoScrollToLeft(grid,x)}if(x>minX-10){this.columnDragAutoScrollingLeft=false}if(atMax||x>maxX+10){this.checkAutoScrollToRight(grid,x);return}if(x<maxX+10){this.columnDragAutoScrollingRight=false}}};ColumnMoving.prototype.checkAutoScrollToRight=function(grid,x){if(this.columnDragAutoScrollingRight){return}this.columnDragAutoScrollingRight=true;this._checkAutoScrollToRight(grid,x)};ColumnMoving.prototype._checkAutoScrollToRight=function(grid,x){if(!this.columnDragAutoScrollingRight){return}var scrollLeft=grid.getHScrollValue();if(!grid.dragging||scrollLeft>grid.sbHScrollConfig.rangeStop-2){return}var draggedIndex=grid.renderOverridesCache.dragger.columnIndex;grid.scrollBy(1,0);var newIndex=draggedIndex+1;console.log(newIndex,draggedIndex);grid.swapColumns(newIndex,draggedIndex);grid.renderOverridesCache.dragger.columnIndex=newIndex;setTimeout(this._checkAutoScrollToRight.bind(this,grid,x),250)};ColumnMoving.prototype.checkAutoScrollToLeft=function(grid,x){if(this.columnDragAutoScrollingLeft){return}this.columnDragAutoScrollingLeft=true;this._checkAutoScrollToLeft(grid,x)};ColumnMoving.prototype._checkAutoScrollToLeft=function(grid,x){if(!this.columnDragAutoScrollingLeft){return}var scrollLeft=grid.getHScrollValue();if(!grid.dragging||scrollLeft<1){return}var draggedIndex=grid.renderOverridesCache.dragger.columnIndex;grid.swapColumns(draggedIndex+scrollLeft,draggedIndex+scrollLeft-1);grid.scrollBy(-1,0);setTimeout(this._checkAutoScrollToLeft.bind(this,grid,x),250)};ColumnMoving.prototype.endDragColumn=function(grid){var fixedColumnCount=grid.getFixedColumnCount();var scrollLeft=grid.getHScrollValue();var columnIndex=grid.renderOverridesCache.dragger.columnIndex;if(columnIndex<fixedColumnCount){scrollLeft=0}var renderer=grid.getRenderer();var columnEdges=renderer.getColumnEdges();var self=this;var startX=columnEdges[columnIndex-scrollLeft];var d=dragger;self.setCrossBrowserProperty(d,"transition",(self.isWebkit?"-webkit-":"")+"transform "+columnAnimationTime+"ms ease, box-shadow "+columnAnimationTime+"ms ease");
self.setCrossBrowserProperty(d,"transform","translate("+startX+"px, "+-1+"px)");d.style.boxShadow="0px 0px 0px #888888";setTimeout(function(){grid.renderOverridesCache.dragger=null;grid.repaint();requestAnimationFrame(function(){d.style.display="none";grid.endDragColumnNotification()})},columnAnimationTime+50)};ColumnMoving.prototype.isHeaderRow=function(grid,event){var gridCell=event.viewPoint;var isFixed=gridCell.y===0;return isFixed};module.exports=ColumnMoving},{"./Base.js":21}],27:[function(require,module,exports){"use strict";var Base=require("./Base.js");function ColumnResizing(){Base.call(this);this.alias="ColumnResizing"}ColumnResizing.prototype=Object.create(Base.prototype);ColumnResizing.prototype.dragIndex=-2;ColumnResizing.prototype.dragStart=-1;ColumnResizing.prototype.dragIndexStartingSize=-1;ColumnResizing.prototype.getMouseValue=function(event){return event.primitiveEvent.detail.mouse.x};ColumnResizing.prototype.getGridCellValue=function(gridCell){return gridCell.y};ColumnResizing.prototype.getScrollValue=function(grid){return grid.getHScrollValue()};ColumnResizing.prototype.getAreaSize=function(grid,index){return grid.getColumnWidth(index)};ColumnResizing.prototype.setAreaSize=function(grid,index,value){grid.setColumnWidth(index,value)};ColumnResizing.prototype.getPreviousAbsoluteSize=function(grid,index){return grid.getRenderedWidth(index)};ColumnResizing.prototype.overAreaDivider=function(grid,event){return grid.overColumnDivider(event)};ColumnResizing.prototype.isFirstFixedOtherArea=function(grid,event){return this.isFirstFixedRow(grid,event)};ColumnResizing.prototype.getCursorName=function(){return"col-resize"};ColumnResizing.prototype.handleMouseDrag=function(grid,event){if(this.dragIndex>-2){var mouse=this.getMouseValue(event);var scrollValue=this.getScrollValue(grid);if(this.dragIndex<this.getFixedAreaCount(grid)){scrollValue=0}var previous=this.getPreviousAbsoluteSize(grid,this.dragIndex-scrollValue);var distance=mouse-previous;this.setAreaSize(grid,this.dragIndex,distance)}else if(this.next){this.next.handleMouseDrag(grid,event)}};ColumnResizing.prototype.getSize=function(grid,areaIndex){return this.getAreaSize(grid,areaIndex)};ColumnResizing.prototype.getOtherFixedAreaCount=function(grid){return grid.getFixedRowCount()};ColumnResizing.prototype.handleMouseDown=function(grid,event){var isEnabled=this.isEnabled(grid);var overArea=this.overAreaDivider(grid,event);if(isEnabled&&overArea>-1&&this.isFirstFixedOtherArea(grid,event)){var scrollValue=this.getScrollValue(grid);if(overArea<this.getFixedAreaCount(grid)){scrollValue=0}this.dragIndex=overArea-1+scrollValue;this.dragStart=this.getMouseValue(event);this.dragIndexStartingSize=0;this.detachChain()}else if(this.next){this.next.handleMouseDown(grid,event)}};ColumnResizing.prototype.handleMouseUp=function(grid,event){var isEnabled=this.isEnabled(grid);if(isEnabled&&this.dragIndex>-2){this.cursor=null;this.dragIndex=-2;event.primitiveEvent.stopPropagation();var self=this;grid.synchronizeScrollingBoundries();setTimeout(function(){self.attachChain()},200)}else if(this.next){this.next.handleMouseUp(grid,event)}};ColumnResizing.prototype.handleMouseMove=function(grid,event){if(this.dragIndex>-2){return}this.cursor=null;if(this.next){this.next.handleMouseMove(grid,event)}this.checkForAreaResizeCursorChange(grid,event)};ColumnResizing.prototype.checkForAreaResizeCursorChange=function(grid,event){var isEnabled=this.isEnabled(grid);if(isEnabled&&this.overAreaDivider(grid,event)>-1&&this.isFirstFixedOtherArea(grid,event)){this.cursor=this.getCursorName()}else{this.cursor=null}};ColumnResizing.prototype.getFixedAreaCount=function(grid){var count=grid.getFixedColumnCount()+(grid.isShowRowNumbers()?1:0)+(grid.hasHierarchyColumn()?1:0);return count};ColumnResizing.prototype.handleDoubleClick=function(grid,event){var isEnabled=this.isEnabled(grid);var hasCursor=this.overAreaDivider(grid,event)>-1;var headerRowCount=grid.getHeaderRowCount();var gridCell=event.gridCell;if(isEnabled&&hasCursor&&gridCell.y<=headerRowCount){grid.autosizeColumn(gridCell.x-1)}else if(this.next){this.next.handleDoubleClick(grid,event)}};ColumnResizing.prototype.isEnabled=function(){return true};module.exports=ColumnResizing},{"./Base.js":21}],28:[function(require,module,exports){"use strict";var Base=require("./Base.js");function ColumnSelection(){Base.call(this);this.alias="ColumnSelection"}ColumnSelection.prototype=Object.create(Base.prototype);ColumnSelection.prototype.currentDrag=null,ColumnSelection.prototype.lastDragCell=null,ColumnSelection.prototype.sbLastAuto=0,ColumnSelection.prototype.sbAutoStart=0,ColumnSelection.prototype.handleMouseUp=function(grid,event){if(this.dragging){this.dragging=false}if(this.next){this.next.handleMouseUp(grid,event);return}};ColumnSelection.prototype.handleMouseDown=function(grid,event){if((!grid.isColumnSelection()||event.mousePoint.y<5)&&this.next){this.next.handleMouseDown(grid,event);return}var isRightClick=event.primitiveEvent.detail.isRightClick;var cell=event.gridCell;var viewCell=event.viewPoint;var dx=cell.x;var dy=cell.y;var isHeader=grid.isShowHeaderRow()&&dy===0&&dx!==-1;if(isRightClick||!isHeader){if(this.next){this.next.handleMouseDown(grid,event)}}else{var numFixedColumns=grid.getFixedColumnCount();if(viewCell.x<numFixedColumns){dx=viewCell.x}var dCell=grid.rectangles.point.create(dx,0);var primEvent=event.primitiveEvent;var keys=primEvent.detail.keys;this.dragging=true;this.extendSelection(grid,dCell,keys)}};ColumnSelection.prototype.handleMouseDrag=function(grid,event){if((!grid.isColumnSelection()||this.isColumnDragging(grid))&&this.next){this.next.handleMouseDrag(grid,event);return}var isRightClick=event.primitiveEvent.detail.isRightClick;if(isRightClick||!this.dragging){if(this.next){this.next.handleMouseDrag(grid,event)}}else{var numFixedColumns=grid.getFixedColumnCount();var cell=event.gridCell;var viewCell=event.viewPoint;var dx=cell.x;var dy=cell.y;if(viewCell.x<numFixedColumns){dx=viewCell.x}var dCell=grid.rectangles.point.create(dx,dy);var primEvent=event.primitiveEvent;this.currentDrag=primEvent.detail.mouse;this.lastDragCell=dCell;this.checkDragScroll(grid,this.currentDrag);this.handleMouseDragCellSelection(grid,dCell,primEvent.detail.keys)}};ColumnSelection.prototype.handleKeyDown=function(grid,event){if(grid.getLastSelectionType()!=="column"){if(this.next){this.next.handleKeyDown(grid,event)}return}var command="handle"+event.detail.char;if(this[command]){this[command].call(this,grid,event.detail)}};ColumnSelection.prototype.handleMouseDragCellSelection=function(grid,gridCell){var x=gridCell.x;var mouseDown=grid.getMouseDown();var newX=x-mouseDown.x;grid.clearMostRecentColumnSelection();grid.selectColumn(mouseDown.x,x);grid.setDragExtent(grid.rectangles.point.create(newX,0));grid.repaint()};ColumnSelection.prototype.checkDragScroll=function(grid,mouse){if(!grid.resolveProperty("scrollingEnabled")){return}var b=grid.getDataBounds();var inside=b.contains(mouse);if(inside){if(grid.isScrollingNow()){grid.setScrollingNow(false)}}else if(!grid.isScrollingNow()){grid.setScrollingNow(true);this.scrollDrag(grid)}};ColumnSelection.prototype.scrollDrag=function(grid){if(!grid.isScrollingNow()){return}var lastDragCell=this.lastDragCell;var b=grid.getDataBounds();var xOffset=0;var yOffset=0;var numFixedColumns=grid.getFixedColumnCount();var numFixedRows=grid.getFixedRowCount();var dragEndInFixedAreaX=lastDragCell.x<numFixedColumns;var dragEndInFixedAreaY=lastDragCell.y<numFixedRows;if(this.currentDrag.x<b.origin.x){xOffset=-1}if(this.currentDrag.x>b.origin.x+b.extent.x){xOffset=1}var dragCellOffsetX=xOffset;var dragCellOffsetY=yOffset;if(dragEndInFixedAreaX){dragCellOffsetX=0}if(dragEndInFixedAreaY){dragCellOffsetY=0}this.lastDragCell=lastDragCell.plusXY(dragCellOffsetX,dragCellOffsetY);grid.scrollBy(xOffset,yOffset);this.handleMouseDragCellSelection(grid,lastDragCell,[]);grid.repaint();setTimeout(this.scrollDrag.bind(this,grid),25)};ColumnSelection.prototype.extendSelection=function(grid,gridCell,keys){grid.stopEditing();var hasSHIFT=keys.indexOf("SHIFT")!==-1;var mousePoint=grid.getMouseDown();var x=gridCell.x;var y=gridCell.y;if(x<0||y<0){return}if(hasSHIFT){grid.clearMostRecentColumnSelection();grid.selectColumn(x,mousePoint.x);grid.setDragExtent(grid.rectangles.point.create(x-mousePoint.x,0))}else{grid.toggleSelectColumn(x,keys);grid.setMouseDown(grid.rectangles.point.create(x,y));grid.setDragExtent(grid.rectangles.point.create(0,0))}grid.repaint()};ColumnSelection.prototype.handleDOWNSHIFT=function(){};ColumnSelection.prototype.handleUPSHIFT=function(){};ColumnSelection.prototype.handleLEFTSHIFT=function(grid){this.moveShiftSelect(grid,-1)};ColumnSelection.prototype.handleRIGHTSHIFT=function(grid){this.moveShiftSelect(grid,1)};ColumnSelection.prototype.handleDOWN=function(){};ColumnSelection.prototype.handleUP=function(){};ColumnSelection.prototype.handleLEFT=function(grid){this.moveSingleSelect(grid,-1)};ColumnSelection.prototype.handleRIGHT=function(grid){this.moveSingleSelect(grid,1)};ColumnSelection.prototype.getAutoScrollAcceleration=function(){var count=1;var elapsed=this.getAutoScrollDuration()/2e3;count=Math.max(1,Math.floor(elapsed*elapsed*elapsed*elapsed));return count};ColumnSelection.prototype.setAutoScrollStartTime=function(){this.sbAutoStart=Date.now()};ColumnSelection.prototype.pingAutoScroll=function(){var now=Date.now();if(now-this.sbLastAuto>500){this.setAutoScrollStartTime()}this.sbLastAuto=Date.now()};ColumnSelection.prototype.getAutoScrollDuration=function(){if(Date.now()-this.sbLastAuto>500){return 0}return Date.now()-this.sbAutoStart};ColumnSelection.prototype.moveShiftSelect=function(grid,offsetX){var maxColumns=grid.getColumnCount()-1;var maxViewableColumns=grid.getVisibleColumns()-1;if(!grid.resolveProperty("scrollingEnabled")){maxColumns=Math.min(maxColumns,maxViewableColumns)}var origin=grid.getMouseDown();var extent=grid.getDragExtent();var newX=extent.x+offsetX;newX=Math.min(maxColumns-origin.x,Math.max(-origin.x,newX));grid.clearMostRecentColumnSelection();grid.selectColumn(origin.x,origin.x+newX);grid.setDragExtent(grid.rectangles.point.create(newX,0));if(grid.insureModelColIsVisible(newX+origin.x,offsetX)){this.pingAutoScroll()}grid.repaint()};ColumnSelection.prototype.moveSingleSelect=function(grid,offsetX){var maxColumns=grid.getColumnCount()-1;var maxViewableColumns=grid.getVisibleColumnsCount()-1;if(!grid.resolveProperty("scrollingEnabled")){maxColumns=Math.min(maxColumns,maxViewableColumns)}var mouseCorner=grid.getMouseDown().plus(grid.getDragExtent());var newX=mouseCorner.x+offsetX;newX=Math.min(maxColumns,Math.max(0,newX));grid.clearSelections();grid.selectColumn(newX);grid.setMouseDown(grid.rectangles.point.create(newX,0));grid.setDragExtent(grid.rectangles.point.create(0,0));if(grid.insureModelColIsVisible(newX,offsetX)){this.pingAutoScroll()}grid.repaint()};ColumnSelection.prototype.isColumnDragging=function(grid){var dragger=grid.lookupFeature("ColumnMoving");if(!dragger){return false}var isActivated=dragger.dragging&&!this.dragging;return isActivated};module.exports=ColumnSelection},{"./Base.js":21}],29:[function(require,module,exports){"use strict";var Base=require("./Base.js");function ColumnSorting(){Base.call(this);this.alias="ColumnSorting"}ColumnSorting.prototype=Object.create(Base.prototype);ColumnSorting.prototype.handleDoubleClick=function(grid,event){var gridCell=event.gridCell;if(grid.isShowHeaderRow()&&gridCell.y===0&&gridCell.x!==-1){var keys=event.primitiveEvent.detail.keys;grid.toggleSort(gridCell.x,keys)}else if(this.next){this.next.handleDoubleClick(grid,event)}};ColumnSorting.prototype.handleMouseMove=function(grid,event){var y=event.gridCell.y;if(this.isFixedRow(grid,event)&&y<1){this.cursor="pointer"}else{this.cursor=null}if(this.next){this.next.handleMouseMove(grid,event)}};module.exports=ColumnSorting},{"./Base.js":21}],30:[function(require,module,exports){"use strict";var Base=require("./Base.js");function Filters(){Base.call(this);this.alias="Filters"}Filters.prototype=Object.create(Base.prototype);Filters.prototype.handleTap=function(grid,event){var gridCell=event.gridCell;if(grid.isFilterRow(gridCell.y)&&gridCell.x!==-1){grid.filterClicked(event)}else if(this.next){this.next.handleTap(grid,event)}};module.exports=Filters},{"./Base.js":21}],31:[function(require,module,exports){"use strict";var Base=require("./Base.js");var commands={PAGEDOWN:function(grid){grid.pageDown()},PAGEUP:function(grid){grid.pageUp()},PAGELEFT:function(grid){grid.pageLeft()},PAGERIGHT:function(grid){grid.pageRight()}};var Base=require("./Base.js");function KeyPaging(){Base.call(this);this.alias="KeyPaging"}KeyPaging.prototype=Object.create(Base.prototype);KeyPaging.prototype.handleKeyDown=function(grid,event){var detail=event.detail.char;var func=commands[detail];if(func){func(grid)}else if(this.next){this.next.handleKeyDown(grid,event)}};module.exports=KeyPaging},{"./Base.js":21}],32:[function(require,module,exports){"use strict";var Base=require("./Base.js");function OnHover(){Base.call(this);this.alias="OnHover"}OnHover.prototype=Object.create(Base.prototype);OnHover.prototype.handleMouseMove=function(grid,event){var currentHoverCell=grid.getHoverCell();if(!event.gridCell.equals(currentHoverCell)){if(currentHoverCell){this.handleMouseExit(grid,currentHoverCell)}this.handleMouseEnter(grid,event);grid.setHoverCell(event.gridCell)}else{if(this.next){this.next.handleMouseMove(grid,event)}}};module.exports=OnHover},{"./Base.js":21}],33:[function(require,module,exports){"use strict";var Base=require("./Base.js");var noop=function(){};var ANIMATION_TIME=200;function Overlay(){Base.call(this);this.alias="Overlay"}Overlay.prototype=Object.create(Base.prototype);Overlay.prototype.openEditor=false,Overlay.prototype.handleKeyUp=function(grid,event){var key=event.detail.char.toLowerCase();var keys=grid.resolveProperty("editorActivationKeys");if(keys.indexOf(key)>-1){this.toggleColumnPicker(grid)}};Overlay.prototype.toggleColumnPicker=function(grid){if(this.isColumnPickerOpen(grid)){this.closeColumnPicker(grid)}else{this.openColumnPicker(grid)}};Overlay.prototype.isColumnPickerOpen=function(grid){noop(grid);return this.overlay.style.display!=="none"};Overlay.prototype.openColumnPicker=function(grid){if(this.isColumnPickerOpen()){return}this.openEditor=true;if(grid.getBehavior().openEditor(this.overlay)===false){return}var self=this;this.overlay.style.backgroundColor=grid.resolveProperty("backgroundColor");this.overlay.style.top="0%";this.overlay.style.right="0%";this.overlay.style.bottom="0%";this.overlay.style.left="0%";this.overlay.style.marginTop="15px";this.overlay.style.marginRight="35px";this.overlay.style.marginBottom="35px";this.overlay.style.marginLeft="15px";self.overlay.style.display="";if(!this._closer){this._closer=function(e){var key=self.getCharFor(grid,e.keyCode).toLowerCase();var keys=grid.resolveProperty("editorActivationKeys");if(keys.indexOf(key)>-1||e.keyCode===27){e.preventDefault();self.closeColumnPicker(grid)}}}grid.setFocusable(false);requestAnimationFrame(function(){self.overlay.style.opacity=.95;document.addEventListener("keydown",self._closer,false)});setTimeout(function(){self.overlay.focus()},100)};Overlay.prototype.closeColumnPicker=function(grid){grid.setFocusable(true);if(!this.isColumnPickerOpen()){return}if(this.openEditor){this.openEditor=false}else{return}if(grid.getBehavior().closeEditor(this.overlay)===false){return}document.removeEventListener("keydown",this._closer,false);var self=this;requestAnimationFrame(function(){self.overlay.style.opacity=0});setTimeout(function(){self.overlay.innerHTML="";self.overlay.style.display="none";grid.takeFocus()},ANIMATION_TIME)};Overlay.prototype.initializeOn=function(grid){this.initializeOverlaySurface(grid);if(this.next){this.next.initializeOn(grid)}};Overlay.prototype.initializeOverlaySurface=function(grid){this.overlay=document.createElement("div");this.overlay.setAttribute("tabindex",0);this.overlay.style.outline="none";this.overlay.style.boxShadow="0 19px 38px rgba(0,0,0,0.30), 0 15px 12px rgba(0,0,0,0.22)";this.overlay.style.position="absolute";this.overlay.style.display="none";this.overlay.style.transition="opacity "+ANIMATION_TIME+"ms ease-in";this.overlay.style.opacity=0;grid.appendChild(this.overlay)};Overlay.prototype.getCharFor=function(grid,integer){var charMap=grid.getCanvas().getCharMap();return charMap[integer][0]};module.exports=Overlay},{"./Base.js":21}],34:[function(require,module,exports){"use strict";var ColumnResizing=require("./ColumnResizing.js");function RowResizing(){ColumnResizing.call(this);this.alias="RowResizing"}RowResizing.prototype=Object.create(ColumnResizing.prototype);RowResizing.prototype.dragArea=-1,RowResizing.prototype.dragStart=-1,RowResizing.prototype.dragAreaStartingSize=-1,RowResizing.prototype.getMouseValue=function(event){return event.primitiveEvent.detail.mouse.y};RowResizing.prototype.getGridCellValue=function(gridCell){return gridCell.x};RowResizing.prototype.getScrollValue=function(grid){return grid.getVScrollValue()};RowResizing.prototype.getAreaSize=function(grid,index){return grid.getRowHeight(index)};RowResizing.prototype.setAreaSize=function(grid,index,value){grid.setRowHeight(index,value)};RowResizing.prototype.overAreaDivider=function(grid,event){return grid.overRowDivider(event)};RowResizing.prototype.isFirstFixedOtherArea=function(grid,event){return this.isFirstFixedColumn(grid,event)};RowResizing.prototype.getCursorName=function(){return"row-resize"};RowResizing.prototype.getPreviousAbsoluteSize=function(grid,index){return grid.getRenderedHeight(index)};RowResizing.prototype.getOtherFixedAreaCount=function(grid){return grid.getFixedColumnCount()};RowResizing.prototype.getFixedAreaCount=function(grid){return grid.getFixedRowCount()+grid.getHeaderRowCount()};RowResizing.prototype.isEnabled=function(grid){return grid.isRowResizeable()};module.exports=RowResizing},{"./ColumnResizing.js":27}],35:[function(require,module,exports){"use strict";var Base=require("./Base.js");function RowSelection(){Base.call(this);this.alias="RowSelection"}RowSelection.prototype=Object.create(Base.prototype);RowSelection.prototype.currentDrag=null,RowSelection.prototype.lastDragCell=null,RowSelection.prototype.sbLastAuto=0,RowSelection.prototype.sbAutoStart=0,RowSelection.prototype.dragArmed=false,RowSelection.prototype.handleMouseUp=function(grid,event){if(this.dragArmed){this.dragArmed=false;grid.fireSyntheticRowSelectionChangedEvent()}else if(this.dragging){this.dragging=false;grid.fireSyntheticRowSelectionChangedEvent()}else if(this.next){this.next.handleMouseUp(grid,event)}};RowSelection.prototype.handleMouseDown=function(grid,event){var isRightClick=event.primitiveEvent.detail.isRightClick;var cell=event.gridCell;var viewCell=event.viewPoint;var dx=cell.x;var dy=cell.y;var isHeader=grid.isShowRowNumbers()&&dx<0;if(!grid.isRowSelection()||isRightClick||!isHeader){if(this.next){this.next.handleMouseDown(grid,event)}}else{var numFixedRows=grid.getFixedRowCount();if(viewCell.y<numFixedRows){dy=viewCell.y}var dCell=grid.newPoint(0,dy);var primEvent=event.primitiveEvent;var keys=primEvent.detail.keys;this.dragArmed=true;this.extendSelection(grid,dCell,keys)}};RowSelection.prototype.handleMouseDrag=function(grid,event){var isRightClick=event.primitiveEvent.detail.isRightClick;if(!this.dragArmed||!grid.isRowSelection()||isRightClick){if(this.next){this.next.handleMouseDrag(grid,event)}}else{this.dragging=true;var numFixedRows=grid.getFixedRowCount();var cell=event.gridCell;var viewCell=event.viewPoint;var dy=cell.y;if(viewCell.y<numFixedRows){dy=viewCell.y}var dCell=grid.newPoint(0,dy);var primEvent=event.primitiveEvent;this.currentDrag=primEvent.detail.mouse;this.lastDragCell=dCell;this.checkDragScroll(grid,this.currentDrag);this.handleMouseDragCellSelection(grid,dCell,primEvent.detail.keys)}};RowSelection.prototype.handleKeyDown=function(grid,event){if(grid.getLastSelectionType()!=="row"){if(this.next){this.next.handleKeyDown(grid,event)}return}var command="handle"+event.detail.char;if(this[command]){this[command].call(this,grid,event.detail)}};RowSelection.prototype.handleMouseDragCellSelection=function(grid,gridCell){var y=gridCell.y;var mouseDown=grid.getMouseDown();var newY=y-mouseDown.y;grid.clearMostRecentRowSelection();grid.selectRow(mouseDown.y,y);grid.setDragExtent(grid.newPoint(0,newY));grid.repaint()};RowSelection.prototype.checkDragScroll=function(grid,mouse){if(!grid.resolveProperty("scrollingEnabled")){return}var b=grid.getDataBounds();var inside=b.contains(mouse);if(inside){if(grid.isScrollingNow()){grid.setScrollingNow(false)}}else if(!grid.isScrollingNow()){grid.setScrollingNow(true);this.scrollDrag(grid)}};RowSelection.prototype.scrollDrag=function(grid){if(!grid.isScrollingNow()){return}var lastDragCell=this.lastDragCell;var b=grid.getDataBounds();var xOffset=0;var yOffset=0;var numFixedColumns=grid.getFixedColumnCount();var numFixedRows=grid.getFixedRowCount();var dragEndInFixedAreaX=lastDragCell.x<numFixedColumns;var dragEndInFixedAreaY=lastDragCell.y<numFixedRows;if(this.currentDrag.y<b.origin.y){yOffset=-1}if(this.currentDrag.y>b.origin.y+b.extent.y){yOffset=1}var dragCellOffsetX=xOffset;var dragCellOffsetY=yOffset;if(dragEndInFixedAreaX){dragCellOffsetX=0}if(dragEndInFixedAreaY){dragCellOffsetY=0}this.lastDragCell=lastDragCell.plusXY(dragCellOffsetX,dragCellOffsetY);grid.scrollBy(xOffset,yOffset);this.handleMouseDragCellSelection(grid,lastDragCell,[]);grid.repaint();setTimeout(this.scrollDrag.bind(this,grid),25)};RowSelection.prototype.extendSelection=function(grid,gridCell,keys){grid.stopEditing();var hasSHIFT=keys.indexOf("SHIFT")!==-1;var mousePoint=grid.getMouseDown();var x=gridCell.x;var y=gridCell.y;if(x<0||y<0){return}if(hasSHIFT){grid.clearMostRecentRowSelection();grid.selectRow(y,mousePoint.y);grid.setDragExtent(grid.newPoint(0,y-mousePoint.y))}else{grid.toggleSelectRow(y,keys);grid.setMouseDown(grid.newPoint(x,y));grid.setDragExtent(grid.newPoint(0,0))}grid.repaint()};RowSelection.prototype.handleDOWNSHIFT=function(grid){this.moveShiftSelect(grid,1)};RowSelection.prototype.handleUPSHIFT=function(grid){this.moveShiftSelect(grid,-1)};RowSelection.prototype.handleLEFTSHIFT=function(){};RowSelection.prototype.handleRIGHTSHIFT=function(){};RowSelection.prototype.handleDOWN=function(grid){this.moveSingleSelect(grid,1)};RowSelection.prototype.handleUP=function(grid){this.moveSingleSelect(grid,-1)};RowSelection.prototype.handleLEFT=function(){};RowSelection.prototype.handleRIGHT=function(grid){var mouseCorner=grid.getMouseDown().plus(grid.getDragExtent());var maxColumns=grid.getColumnCount()-1;var newX=grid.getHeaderColumnCount()+grid.getHScrollValue();var newY=mouseCorner.y;newX=Math.min(maxColumns,newX);grid.clearSelections();grid.select(newX,newY,0,0);grid.setMouseDown(grid.newPoint(newX,newY));grid.setDragExtent(grid.newPoint(0,0));grid.repaint()};RowSelection.prototype.getAutoScrollAcceleration=function(){var count=1;var elapsed=this.getAutoScrollDuration()/2e3;count=Math.max(1,Math.floor(elapsed*elapsed*elapsed*elapsed));return count};RowSelection.prototype.setAutoScrollStartTime=function(){this.sbAutoStart=Date.now()};RowSelection.prototype.pingAutoScroll=function(){var now=Date.now();if(now-this.sbLastAuto>500){this.setAutoScrollStartTime()}this.sbLastAuto=Date.now()};RowSelection.prototype.getAutoScrollDuration=function(){if(Date.now()-this.sbLastAuto>500){return 0}return Date.now()-this.sbAutoStart};RowSelection.prototype.moveShiftSelect=function(grid,offsetY){var maxRows=grid.getRowCount()-1;var maxViewableRows=grid.getVisibleRows()-1;if(!grid.resolveProperty("scrollingEnabled")){maxRows=Math.min(maxRows,maxViewableRows)}var origin=grid.getMouseDown();var extent=grid.getDragExtent();var newY=extent.y+offsetY;newY=Math.min(maxRows-origin.y,Math.max(-origin.y,newY));grid.clearMostRecentRowSelection();grid.selectRow(origin.y,origin.y+newY);grid.setDragExtent(grid.newPoint(0,newY));if(grid.insureModelRowIsVisible(newY+origin.y,offsetY)){this.pingAutoScroll()}grid.fireSyntheticRowSelectionChangedEvent();grid.repaint()};RowSelection.prototype.moveSingleSelect=function(grid,offsetY){var maxRows=grid.getRowCount()-1;var maxViewableRows=grid.getVisibleRowsCount()-1;if(!grid.resolveProperty("scrollingEnabled")){maxRows=Math.min(maxRows,maxViewableRows)}var mouseCorner=grid.getMouseDown().plus(grid.getDragExtent());var newY=mouseCorner.y+offsetY;newY=Math.min(maxRows,Math.max(0,newY));grid.clearSelections();grid.selectRow(newY);grid.setMouseDown(grid.newPoint(0,newY));grid.setDragExtent(grid.newPoint(0,0));if(grid.insureModelRowIsVisible(newY,offsetY)){this.pingAutoScroll()}grid.fireSyntheticRowSelectionChangedEvent();grid.repaint()};RowSelection.prototype.isSingleRowSelection=function(){return true};module.exports=RowSelection},{"./Base.js":21}],36:[function(require,module,exports){"use strict";var Base=require("./Base.js");function ThumbwheelScrolling(){Base.call(this);this.alias="ThumbwheelScrolling"}ThumbwheelScrolling.prototype=Object.create(Base.prototype);ThumbwheelScrolling.handleWheelMoved=function(grid,e){if(!grid.resolveProperty("scrollingEnabled")){return}var primEvent=e.primitiveEvent;var deltaY=primEvent.wheelDeltaY||-primEvent.deltaY;var deltaX=primEvent.wheelDeltaX||-primEvent.deltaX;if(deltaY>0){grid.scrollBy(0,-1)}else if(deltaY<-0){grid.scrollBy(0,1)}else if(deltaX>0){grid.scrollBy(-1,0)}else if(deltaX<-0){grid.scrollBy(1,0)}};module.exports=ThumbwheelScrolling},{"./Base.js":21}],37:[function(require,module,exports){"use strict";module.exports={CellClick:require("./CellClick.js"),CellEditing:require("./CellEditing.js"),CellSelection:require("./CellSelection.js"),ColumnAutosizing:require("./ColumnAutosizing.js"),ColumnMoving:require("./ColumnMoving.js"),ColumnResizing:require("./ColumnResizing.js"),ColumnSelection:require("./ColumnSelection.js"),ColumnSorting:require("./ColumnSorting.js"),Filters:require("./Filters.js"),KeyPaging:require("./KeyPaging.js"),OnHover:require("./OnHover.js"),Overlay:require("./Overlay.js"),RowResizing:require("./RowResizing.js"),RowSelection:require("./RowSelection.js"),ThumbwheelScrolling:require("./ThumbwheelScrolling.js")}},{"./CellClick.js":22,"./CellEditing.js":23,"./CellSelection.js":24,"./ColumnAutosizing.js":25,"./ColumnMoving.js":26,"./ColumnResizing.js":27,"./ColumnSelection.js":28,"./ColumnSorting.js":29,"./Filters.js":30,"./KeyPaging.js":31,"./OnHover.js":32,"./Overlay.js":33,"./RowResizing.js":34,"./RowSelection.js":35,"./ThumbwheelScrolling.js":36}],38:[function(require,module,exports){"use strict";var ns=(window.fin=window.fin||{}).hypergrid=window.fin.hypergrid||{};ns.behaviors=require("./behaviors/behaviors.js");ns.cellEditors=require("./cellEditors/cellEditors.js");ns.dataModels=require("./dataModels/dataModels.js");ns.features=require("./features/features.js");ns.CellProvider=require("./CellProvider");ns.Renderer=require("./Renderer");ns.SelectionModel=require("./SelectionModel");ns.LRUCache=require("lru-cache")},{"./CellProvider":3,"./Renderer":4,"./SelectionModel":5,"./behaviors/behaviors.js":6,"./cellEditors/cellEditors.js":15,"./dataModels/dataModels.js":20,"./features/features.js":37,"lru-cache":1}]},{},[38]);</script><style shim-shadowdom="">html /deep/ [layout][horizontal],html /deep/ [layout][vertical]{display:-ms-flexbox;display:-webkit-flex;display:flex}html /deep/ [layout][horizontal][inline],html /deep/ [layout][vertical][inline]{display:-ms-inline-flexbox;display:-webkit-inline-flex;display:inline-flex}html /deep/ [layout][horizontal]{-ms-flex-direction:row;-webkit-flex-direction:row;flex-direction:row}html /deep/ [layout][horizontal][reverse]{-ms-flex-direction:row-reverse;-webkit-flex-direction:row-reverse;flex-direction:row-reverse}html /deep/ [layout][vertical]{-ms-flex-direction:column;-webkit-flex-direction:column;flex-direction:column}html /deep/ [layout][vertical][reverse]{-ms-flex-direction:column-reverse;-webkit-flex-direction:column-reverse;flex-direction:column-reverse}html /deep/ [layout][wrap]{-ms-flex-wrap:wrap;-webkit-flex-wrap:wrap;flex-wrap:wrap}html /deep/ [layout][wrap-reverse]{-ms-flex-wrap:wrap-reverse;-webkit-flex-wrap:wrap-reverse;flex-wrap:wrap-reverse}html /deep/ [flex]{-ms-flex:1 1 0;-webkit-flex:1;flex:1;-webkit-flex-basis:0;flex-basis:0}html /deep/ [vertical][layout]>[flex][auto-vertical],html /deep/ [vertical][layout]::shadow [flex][auto-vertical]{-ms-flex:1 1 auto;-webkit-flex-basis:auto;flex-basis:auto}html /deep/ [flex][auto]{-ms-flex:1 1 auto;-webkit-flex-basis:auto;flex-basis:auto}html /deep/ [flex][none]{-ms-flex:none;-webkit-flex:none;flex:none}html /deep/ [flex][one]{-ms-flex:1;-webkit-flex:1;flex:1}html /deep/ [flex][two]{-ms-flex:2;-webkit-flex:2;flex:2}html /deep/ [flex][three]{-ms-flex:3;-webkit-flex:3;flex:3}html /deep/ [flex][four]{-ms-flex:4;-webkit-flex:4;flex:4}html /deep/ [flex][five]{-ms-flex:5;-webkit-flex:5;flex:5}html /deep/ [flex][six]{-ms-flex:6;-webkit-flex:6;flex:6}html /deep/ [flex][seven]{-ms-flex:7;-webkit-flex:7;flex:7}html /deep/ [flex][eight]{-ms-flex:8;-webkit-flex:8;flex:8}html /deep/ [flex][nine]{-ms-flex:9;-webkit-flex:9;flex:9}html /deep/ [flex][ten]{-ms-flex:10;-webkit-flex:10;flex:10}html /deep/ [flex][eleven]{-ms-flex:11;-webkit-flex:11;flex:11}html /deep/ [flex][twelve]{-ms-flex:12;-webkit-flex:12;flex:12}html /deep/ [layout][start]{-ms-flex-align:start;-webkit-align-items:flex-start;align-items:flex-start}html /deep/ [layout][center],html /deep/ [layout][center-center]{-ms-flex-align:center;-webkit-align-items:center;align-items:center}html /deep/ [layout][end]{-ms-flex-align:end;-webkit-align-items:flex-end;align-items:flex-end}html /deep/ [layout][start-justified]{-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start}html /deep/ [layout][center-justified],html /deep/ [layout][center-center]{-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center}html /deep/ [layout][end-justified]{-ms-flex-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end}html /deep/ [layout][around-justified]{-ms-flex-pack:distribute;-webkit-justify-content:space-around;justify-content:space-around}html /deep/ [layout][justified]{-ms-flex-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}html /deep/ [self-start]{-ms-align-self:flex-start;-webkit-align-self:flex-start;align-self:flex-start}html /deep/ [self-center]{-ms-align-self:center;-webkit-align-self:center;align-self:center}html /deep/ [self-end]{-ms-align-self:flex-end;-webkit-align-self:flex-end;align-self:flex-end}html /deep/ [self-stretch]{-ms-align-self:stretch;-webkit-align-self:stretch;align-self:stretch}html /deep/ [block]{display:block}html /deep/ [hidden]{display:none!important}html /deep/ [relative]{position:relative}html /deep/ [fit]{position:absolute;top:0;right:0;bottom:0;left:0}body[fullbleed]{margin:0;height:100vh}html /deep/ [segment],html /deep/ segment{display:block;position:relative;-webkit-box-sizing:border-box;-ms-box-sizing:border-box;box-sizing:border-box;margin:1em .5em;padding:1em;background-color:#fff;-webkit-box-shadow:0 0 0 1px rgba(0,0,0,.1);box-shadow:0 0 0 1px rgba(0,0,0,.1);border-radius:5px 5px 5px 5px}</style><script>window.PolymerGestures={};(function(scope){var hasFullPath=false;var pathTest=document.createElement("meta");if(pathTest.createShadowRoot){var sr=pathTest.createShadowRoot();var s=document.createElement("span");sr.appendChild(s);pathTest.addEventListener("testpath",function(ev){if(ev.path){hasFullPath=ev.path[0]===s}ev.stopPropagation()});var ev=new CustomEvent("testpath",{bubbles:true});document.head.appendChild(pathTest);s.dispatchEvent(ev);pathTest.parentNode.removeChild(pathTest);sr=s=null}pathTest=null;var target={shadow:function(inEl){if(inEl){return inEl.shadowRoot||inEl.webkitShadowRoot}},canTarget:function(shadow){return shadow&&Boolean(shadow.elementFromPoint)},targetingShadow:function(inEl){var s=this.shadow(inEl);if(this.canTarget(s)){return s}},olderShadow:function(shadow){var os=shadow.olderShadowRoot;if(!os){var se=shadow.querySelector("shadow");if(se){os=se.olderShadowRoot}}return os},allShadows:function(element){var shadows=[],s=this.shadow(element);while(s){shadows.push(s);s=this.olderShadow(s)}return shadows},searchRoot:function(inRoot,x,y){var t,st,sr,os;if(inRoot){t=inRoot.elementFromPoint(x,y);if(t){sr=this.targetingShadow(t)}else if(inRoot!==document){sr=this.olderShadow(inRoot)}return this.searchRoot(sr,x,y)||t}},owner:function(element){if(!element){return document}var s=element;while(s.parentNode){s=s.parentNode}if(s.nodeType!=Node.DOCUMENT_NODE&&s.nodeType!=Node.DOCUMENT_FRAGMENT_NODE){s=document}return s},findTarget:function(inEvent){if(hasFullPath&&inEvent.path&&inEvent.path.length){return inEvent.path[0]}var x=inEvent.clientX,y=inEvent.clientY;var s=this.owner(inEvent.target);if(!s.elementFromPoint(x,y)){s=document}return this.searchRoot(s,x,y)},findTouchAction:function(inEvent){var n;if(hasFullPath&&inEvent.path&&inEvent.path.length){var path=inEvent.path;for(var i=0;i<path.length;i++){n=path[i];if(n.nodeType===Node.ELEMENT_NODE&&n.hasAttribute("touch-action")){return n.getAttribute("touch-action")}}}else{n=inEvent.target;while(n){if(n.nodeType===Node.ELEMENT_NODE&&n.hasAttribute("touch-action")){return n.getAttribute("touch-action")}n=n.parentNode||n.host}}return"auto"},LCA:function(a,b){if(a===b){return a}if(a&&!b){return a}if(b&&!a){return b}if(!b&&!a){return document}if(a.contains&&a.contains(b)){return a}if(b.contains&&b.contains(a)){return b}var adepth=this.depth(a);var bdepth=this.depth(b);var d=adepth-bdepth;if(d>=0){a=this.walk(a,d)}else{b=this.walk(b,-d)}while(a&&b&&a!==b){a=a.parentNode||a.host;b=b.parentNode||b.host}return a},walk:function(n,u){for(var i=0;n&&i<u;i++){n=n.parentNode||n.host}return n},depth:function(n){var d=0;while(n){d++;n=n.parentNode||n.host}return d},deepContains:function(a,b){var common=this.LCA(a,b);return common===a},insideNode:function(node,x,y){var rect=node.getBoundingClientRect();return rect.left<=x&&x<=rect.right&&rect.top<=y&&y<=rect.bottom},path:function(event){var p;if(hasFullPath&&event.path&&event.path.length){p=event.path}else{p=[];var n=this.findTarget(event);while(n){p.push(n);n=n.parentNode||n.host}}return p}};scope.targetFinding=target;scope.findTarget=target.findTarget.bind(target);scope.deepContains=target.deepContains.bind(target);scope.insideNode=target.insideNode})(window.PolymerGestures);(function(){function shadowSelector(v){return"html /deep/ "+selector(v)}function selector(v){return'[touch-action="'+v+'"]'}function rule(v){return"{ -ms-touch-action: "+v+"; touch-action: "+v+";}"}var attrib2css=["none","auto","pan-x","pan-y",{rule:"pan-x pan-y",selectors:["pan-x pan-y","pan-y pan-x"]},"manipulation"];var styles="";var hasTouchAction=typeof document.head.style.touchAction==="string";var hasShadowRoot=!window.ShadowDOMPolyfill&&document.head.createShadowRoot;if(hasTouchAction){attrib2css.forEach(function(r){if(String(r)===r){styles+=selector(r)+rule(r)+"\n";if(hasShadowRoot){styles+=shadowSelector(r)+rule(r)+"\n"}}else{styles+=r.selectors.map(selector)+rule(r.rule)+"\n";if(hasShadowRoot){styles+=r.selectors.map(shadowSelector)+rule(r.rule)+"\n"}}});var el=document.createElement("style");el.textContent=styles;document.head.appendChild(el)}})();(function(scope){var MOUSE_PROPS=["bubbles","cancelable","view","detail","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget","pageX","pageY"];var MOUSE_DEFAULTS=[false,false,null,null,0,0,0,0,false,false,false,false,0,null,0,0];var NOP_FACTORY=function(){return function(){}};var eventFactory={preventTap:NOP_FACTORY,makeBaseEvent:function(inType,inDict){var e=document.createEvent("Event");e.initEvent(inType,inDict.bubbles||false,inDict.cancelable||false);e.preventTap=eventFactory.preventTap(e);return e},makeGestureEvent:function(inType,inDict){inDict=inDict||Object.create(null);var e=this.makeBaseEvent(inType,inDict);for(var i=0,keys=Object.keys(inDict),k;i<keys.length;i++){k=keys[i];if(k!=="bubbles"&&k!=="cancelable"){e[k]=inDict[k]}}return e},makePointerEvent:function(inType,inDict){inDict=inDict||Object.create(null);var e=this.makeBaseEvent(inType,inDict);for(var i=2,p;i<MOUSE_PROPS.length;i++){p=MOUSE_PROPS[i];e[p]=inDict[p]||MOUSE_DEFAULTS[i]}e.buttons=inDict.buttons||0;var pressure=0;if(inDict.pressure){pressure=inDict.pressure}else{pressure=e.buttons?.5:0}e.x=e.clientX;e.y=e.clientY;e.pointerId=inDict.pointerId||0;e.width=inDict.width||0;e.height=inDict.height||0;e.pressure=pressure;e.tiltX=inDict.tiltX||0;e.tiltY=inDict.tiltY||0;e.pointerType=inDict.pointerType||"";e.hwTimestamp=inDict.hwTimestamp||0;e.isPrimary=inDict.isPrimary||false;e._source=inDict._source||"";return e}};scope.eventFactory=eventFactory})(window.PolymerGestures);(function(scope){var USE_MAP=window.Map&&window.Map.prototype.forEach;var POINTERS_FN=function(){return this.size};function PointerMap(){if(USE_MAP){var m=new Map;m.pointers=POINTERS_FN;return m}else{this.keys=[];this.values=[]}}PointerMap.prototype={set:function(inId,inEvent){var i=this.keys.indexOf(inId);if(i>-1){this.values[i]=inEvent}else{this.keys.push(inId);this.values.push(inEvent)}},has:function(inId){return this.keys.indexOf(inId)>-1},"delete":function(inId){var i=this.keys.indexOf(inId);if(i>-1){this.keys.splice(i,1);this.values.splice(i,1)}},get:function(inId){var i=this.keys.indexOf(inId);return this.values[i]},clear:function(){this.keys.length=0;this.values.length=0},forEach:function(callback,thisArg){this.values.forEach(function(v,i){callback.call(thisArg,v,this.keys[i],this)},this)},pointers:function(){return this.keys.length}};scope.PointerMap=PointerMap})(window.PolymerGestures);(function(scope){var CLONE_PROPS=["bubbles","cancelable","view","detail","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget","buttons","pointerId","width","height","pressure","tiltX","tiltY","pointerType","hwTimestamp","isPrimary","type","target","currentTarget","which","pageX","pageY","timeStamp","preventTap","tapPrevented","_source"];var CLONE_DEFAULTS=[false,false,null,null,0,0,0,0,false,false,false,false,0,null,0,0,0,0,0,0,0,"",0,false,"",null,null,0,0,0,0,function(){},false];var HAS_SVG_INSTANCE=typeof SVGElementInstance!=="undefined";var eventFactory=scope.eventFactory;var currentGestures;var dispatcher={IS_IOS:false,pointermap:new scope.PointerMap,requiredGestures:new scope.PointerMap,eventMap:Object.create(null),eventSources:Object.create(null),eventSourceList:[],gestures:[],dependencyMap:{down:{listeners:0,index:-1},up:{listeners:0,index:-1}},gestureQueue:[],registerSource:function(name,source){var s=source;var newEvents=s.events;if(newEvents){newEvents.forEach(function(e){if(s[e]){this.eventMap[e]=s[e].bind(s)}},this);this.eventSources[name]=s;this.eventSourceList.push(s)}},registerGesture:function(name,source){var obj=Object.create(null);obj.listeners=0;obj.index=this.gestures.length;for(var i=0,g;i<source.exposes.length;i++){g=source.exposes[i].toLowerCase();this.dependencyMap[g]=obj}this.gestures.push(source)},register:function(element,initial){var l=this.eventSourceList.length;for(var i=0,es;i<l&&(es=this.eventSourceList[i]);i++){es.register.call(es,element,initial)}},unregister:function(element){var l=this.eventSourceList.length;for(var i=0,es;i<l&&(es=this.eventSourceList[i]);i++){es.unregister.call(es,element)}},down:function(inEvent){this.requiredGestures.set(inEvent.pointerId,currentGestures);this.fireEvent("down",inEvent)},move:function(inEvent){inEvent.type="move";this.fillGestureQueue(inEvent)},up:function(inEvent){this.fireEvent("up",inEvent);this.requiredGestures.delete(inEvent.pointerId)},cancel:function(inEvent){inEvent.tapPrevented=true;this.fireEvent("up",inEvent);this.requiredGestures.delete(inEvent.pointerId)},addGestureDependency:function(node,currentGestures){var gesturesWanted=node._pgEvents;if(gesturesWanted&&currentGestures){var gk=Object.keys(gesturesWanted);for(var i=0,r,ri,g;i<gk.length;i++){g=gk[i];if(gesturesWanted[g]>0){r=this.dependencyMap[g];ri=r?r.index:-1;currentGestures[ri]=true}}}},eventHandler:function(inEvent){var type=inEvent.type;if(type==="touchstart"||type==="mousedown"||type==="pointerdown"||type==="MSPointerDown"){if(!inEvent._handledByPG){currentGestures={}}if(this.IS_IOS){var ev=inEvent;if(type==="touchstart"){var ct=inEvent.changedTouches[0];ev={target:inEvent.target,clientX:ct.clientX,clientY:ct.clientY,path:inEvent.path}}var nodes=inEvent.path||scope.targetFinding.path(ev);for(var i=0,n;i<nodes.length;i++){n=nodes[i];this.addGestureDependency(n,currentGestures)}}else{this.addGestureDependency(inEvent.currentTarget,currentGestures)}}if(inEvent._handledByPG){return}var fn=this.eventMap&&this.eventMap[type];if(fn){fn(inEvent)}inEvent._handledByPG=true},listen:function(target,events){for(var i=0,l=events.length,e;i<l&&(e=events[i]);i++){this.addEvent(target,e)}},unlisten:function(target,events){for(var i=0,l=events.length,e;i<l&&(e=events[i]);i++){this.removeEvent(target,e)}},addEvent:function(target,eventName){target.addEventListener(eventName,this.boundHandler)},removeEvent:function(target,eventName){target.removeEventListener(eventName,this.boundHandler)},makeEvent:function(inType,inEvent){var e=eventFactory.makePointerEvent(inType,inEvent);e.preventDefault=inEvent.preventDefault;e.tapPrevented=inEvent.tapPrevented;e._target=e._target||inEvent.target;return e},fireEvent:function(inType,inEvent){var e=this.makeEvent(inType,inEvent);return this.dispatchEvent(e)},cloneEvent:function(inEvent){var eventCopy=Object.create(null),p;for(var i=0;i<CLONE_PROPS.length;i++){p=CLONE_PROPS[i];eventCopy[p]=inEvent[p]||CLONE_DEFAULTS[i];if(p==="target"||p==="relatedTarget"){if(HAS_SVG_INSTANCE&&eventCopy[p]instanceof SVGElementInstance){eventCopy[p]=eventCopy[p].correspondingUseElement}}}eventCopy.preventDefault=function(){inEvent.preventDefault()};return eventCopy},dispatchEvent:function(inEvent){var t=inEvent._target;if(t){t.dispatchEvent(inEvent);var clone=this.cloneEvent(inEvent);clone.target=t;this.fillGestureQueue(clone)}},gestureTrigger:function(){for(var i=0,e,rg;i<this.gestureQueue.length;i++){e=this.gestureQueue[i];rg=e._requiredGestures;if(rg){for(var j=0,g,fn;j<this.gestures.length;j++){if(rg[j]){g=this.gestures[j];fn=g[e.type];if(fn){fn.call(g,e)}}}}}this.gestureQueue.length=0},fillGestureQueue:function(ev){if(!this.gestureQueue.length){requestAnimationFrame(this.boundGestureTrigger)}ev._requiredGestures=this.requiredGestures.get(ev.pointerId);this.gestureQueue.push(ev)}};dispatcher.boundHandler=dispatcher.eventHandler.bind(dispatcher);dispatcher.boundGestureTrigger=dispatcher.gestureTrigger.bind(dispatcher);scope.dispatcher=dispatcher;scope.activateGesture=function(node,gesture){var g=gesture.toLowerCase();var dep=dispatcher.dependencyMap[g];if(dep){var recognizer=dispatcher.gestures[dep.index];if(!node._pgListeners){dispatcher.register(node);node._pgListeners=0}if(recognizer){var touchAction=recognizer.defaultActions&&recognizer.defaultActions[g];var actionNode;switch(node.nodeType){case Node.ELEMENT_NODE:actionNode=node;break;case Node.DOCUMENT_FRAGMENT_NODE:actionNode=node.host;break;default:actionNode=null;break}if(touchAction&&actionNode&&!actionNode.hasAttribute("touch-action")){actionNode.setAttribute("touch-action",touchAction)}}if(!node._pgEvents){node._pgEvents={}}node._pgEvents[g]=(node._pgEvents[g]||0)+1;node._pgListeners++}return Boolean(dep)};scope.addEventListener=function(node,gesture,handler,capture){if(handler){scope.activateGesture(node,gesture);node.addEventListener(gesture,handler,capture)}};scope.deactivateGesture=function(node,gesture){var g=gesture.toLowerCase();var dep=dispatcher.dependencyMap[g];if(dep){if(node._pgListeners>0){node._pgListeners--}if(node._pgListeners===0){dispatcher.unregister(node)}if(node._pgEvents){if(node._pgEvents[g]>0){node._pgEvents[g]--}else{node._pgEvents[g]=0}}}return Boolean(dep)};scope.removeEventListener=function(node,gesture,handler,capture){if(handler){scope.deactivateGesture(node,gesture);node.removeEventListener(gesture,handler,capture)}}})(window.PolymerGestures);(function(scope){var dispatcher=scope.dispatcher;var pointermap=dispatcher.pointermap;var DEDUP_DIST=25;var WHICH_TO_BUTTONS=[0,1,4,2];var currentButtons=0;var FIREFOX_LINUX=/Linux.*Firefox\//i;var HAS_BUTTONS=function(){if(FIREFOX_LINUX.test(navigator.userAgent)){return false}try{return new MouseEvent("test",{buttons:1}).buttons===1}catch(e){return false}}();var mouseEvents={POINTER_ID:1,POINTER_TYPE:"mouse",events:["mousedown","mousemove","mouseup"],exposes:["down","up","move"],register:function(target){dispatcher.listen(target,this.events)},unregister:function(target){if(target.nodeType===Node.DOCUMENT_NODE){return}dispatcher.unlisten(target,this.events)},lastTouches:[],isEventSimulatedFromTouch:function(inEvent){var lts=this.lastTouches;var x=inEvent.clientX,y=inEvent.clientY;for(var i=0,l=lts.length,t;i<l&&(t=lts[i]);i++){var dx=Math.abs(x-t.x),dy=Math.abs(y-t.y);if(dx<=DEDUP_DIST&&dy<=DEDUP_DIST){return true}}},prepareEvent:function(inEvent){var e=dispatcher.cloneEvent(inEvent);e.pointerId=this.POINTER_ID;e.isPrimary=true;e.pointerType=this.POINTER_TYPE;e._source="mouse";if(!HAS_BUTTONS){var type=inEvent.type;var bit=WHICH_TO_BUTTONS[inEvent.which]||0;if(type==="mousedown"){currentButtons|=bit}else if(type==="mouseup"){currentButtons&=~bit}e.buttons=currentButtons}return e},mousedown:function(inEvent){if(!this.isEventSimulatedFromTouch(inEvent)){var p=pointermap.has(this.POINTER_ID);var e=this.prepareEvent(inEvent);e.target=scope.findTarget(inEvent);pointermap.set(this.POINTER_ID,e.target);dispatcher.down(e)}},mousemove:function(inEvent){if(!this.isEventSimulatedFromTouch(inEvent)){var target=pointermap.get(this.POINTER_ID);if(target){var e=this.prepareEvent(inEvent);e.target=target;if((HAS_BUTTONS?e.buttons:e.which)===0){if(!HAS_BUTTONS){currentButtons=e.buttons=0}dispatcher.cancel(e);this.cleanupMouse(e.buttons)}else{dispatcher.move(e)}}}},mouseup:function(inEvent){if(!this.isEventSimulatedFromTouch(inEvent)){var e=this.prepareEvent(inEvent);e.relatedTarget=scope.findTarget(inEvent);e.target=pointermap.get(this.POINTER_ID);dispatcher.up(e);this.cleanupMouse(e.buttons)}},cleanupMouse:function(buttons){if(buttons===0){pointermap.delete(this.POINTER_ID)}}};scope.mouseEvents=mouseEvents})(window.PolymerGestures);(function(scope){var dispatcher=scope.dispatcher;var allShadows=scope.targetFinding.allShadows.bind(scope.targetFinding);var pointermap=dispatcher.pointermap;var touchMap=Array.prototype.map.call.bind(Array.prototype.map);var DEDUP_TIMEOUT=2500;var DEDUP_DIST=25;var CLICK_COUNT_TIMEOUT=200;var HYSTERESIS=20;var ATTRIB="touch-action";var HAS_TOUCH_ACTION=false;var touchEvents={IS_IOS:false,events:["touchstart","touchmove","touchend","touchcancel"],exposes:["down","up","move"],register:function(target,initial){if(this.IS_IOS?initial:!initial){dispatcher.listen(target,this.events)}},unregister:function(target){if(!this.IS_IOS){dispatcher.unlisten(target,this.events)}},scrollTypes:{EMITTER:"none",XSCROLLER:"pan-x",YSCROLLER:"pan-y"},touchActionToScrollType:function(touchAction){var t=touchAction;var st=this.scrollTypes;if(t===st.EMITTER){return"none"}else if(t===st.XSCROLLER){return"X"}else if(t===st.YSCROLLER){return"Y"}else{return"XY"}},POINTER_TYPE:"touch",firstTouch:null,isPrimaryTouch:function(inTouch){return this.firstTouch===inTouch.identifier},setPrimaryTouch:function(inTouch){if(pointermap.pointers()===0||pointermap.pointers()===1&&pointermap.has(1)){this.firstTouch=inTouch.identifier;this.firstXY={X:inTouch.clientX,Y:inTouch.clientY};this.firstTarget=inTouch.target;this.scrolling=null;this.cancelResetClickCount()}},removePrimaryPointer:function(inPointer){if(inPointer.isPrimary){this.firstTouch=null;this.firstXY=null;this.resetClickCount()}},clickCount:0,resetId:null,resetClickCount:function(){var fn=function(){this.clickCount=0;this.resetId=null}.bind(this);this.resetId=setTimeout(fn,CLICK_COUNT_TIMEOUT)},cancelResetClickCount:function(){if(this.resetId){clearTimeout(this.resetId)}},typeToButtons:function(type){var ret=0;if(type==="touchstart"||type==="touchmove"){ret=1}return ret},findTarget:function(touch,id){if(this.currentTouchEvent.type==="touchstart"){if(this.isPrimaryTouch(touch)){var fastPath={clientX:touch.clientX,clientY:touch.clientY,path:this.currentTouchEvent.path,target:this.currentTouchEvent.target};return scope.findTarget(fastPath)}else{return scope.findTarget(touch)}}return pointermap.get(id)},touchToPointer:function(inTouch){var cte=this.currentTouchEvent;var e=dispatcher.cloneEvent(inTouch);var id=e.pointerId=inTouch.identifier+2;e.target=this.findTarget(inTouch,id);e.bubbles=true;e.cancelable=true;e.detail=this.clickCount;e.buttons=this.typeToButtons(cte.type);e.width=inTouch.webkitRadiusX||inTouch.radiusX||0;e.height=inTouch.webkitRadiusY||inTouch.radiusY||0;e.pressure=inTouch.webkitForce||inTouch.force||.5;e.isPrimary=this.isPrimaryTouch(inTouch);e.pointerType=this.POINTER_TYPE;e._source="touch";var self=this;e.preventDefault=function(){self.scrolling=false;self.firstXY=null;cte.preventDefault()};return e},processTouches:function(inEvent,inFunction){var tl=inEvent.changedTouches;this.currentTouchEvent=inEvent;for(var i=0,t,p;i<tl.length;i++){t=tl[i];p=this.touchToPointer(t);if(inEvent.type==="touchstart"){pointermap.set(p.pointerId,p.target)}if(pointermap.has(p.pointerId)){inFunction.call(this,p)}if(inEvent.type==="touchend"||inEvent._cancel){this.cleanUpPointer(p)}}},shouldScroll:function(inEvent){if(this.firstXY){var ret;var touchAction=scope.targetFinding.findTouchAction(inEvent);var scrollAxis=this.touchActionToScrollType(touchAction);if(scrollAxis==="none"){ret=false}else if(scrollAxis==="XY"){ret=true}else{var t=inEvent.changedTouches[0];var a=scrollAxis;var oa=scrollAxis==="Y"?"X":"Y";var da=Math.abs(t["client"+a]-this.firstXY[a]);var doa=Math.abs(t["client"+oa]-this.firstXY[oa]);ret=da>=doa}return ret}},findTouch:function(inTL,inId){for(var i=0,l=inTL.length,t;i<l&&(t=inTL[i]);i++){if(t.identifier===inId){return true}}},vacuumTouches:function(inEvent){var tl=inEvent.touches;if(pointermap.pointers()>=tl.length){var d=[];pointermap.forEach(function(value,key){if(key!==1&&!this.findTouch(tl,key-2)){var p=value;d.push(p)}},this);d.forEach(function(p){this.cancel(p);pointermap.delete(p.pointerId)},this)}},touchstart:function(inEvent){this.vacuumTouches(inEvent);this.setPrimaryTouch(inEvent.changedTouches[0]);this.dedupSynthMouse(inEvent);if(!this.scrolling){this.clickCount++;this.processTouches(inEvent,this.down)}},down:function(inPointer){dispatcher.down(inPointer)},touchmove:function(inEvent){if(HAS_TOUCH_ACTION){if(inEvent.cancelable){this.processTouches(inEvent,this.move)}}else{if(!this.scrolling){if(this.scrolling===null&&this.shouldScroll(inEvent)){this.scrolling=true}else{this.scrolling=false;inEvent.preventDefault();this.processTouches(inEvent,this.move)}}else if(this.firstXY){var t=inEvent.changedTouches[0];var dx=t.clientX-this.firstXY.X;var dy=t.clientY-this.firstXY.Y;var dd=Math.sqrt(dx*dx+dy*dy);if(dd>=HYSTERESIS){this.touchcancel(inEvent);this.scrolling=true;this.firstXY=null}}}},move:function(inPointer){dispatcher.move(inPointer)},touchend:function(inEvent){this.dedupSynthMouse(inEvent);this.processTouches(inEvent,this.up)},up:function(inPointer){inPointer.relatedTarget=scope.findTarget(inPointer);dispatcher.up(inPointer)},cancel:function(inPointer){dispatcher.cancel(inPointer)},touchcancel:function(inEvent){inEvent._cancel=true;this.processTouches(inEvent,this.cancel)},cleanUpPointer:function(inPointer){pointermap["delete"](inPointer.pointerId);this.removePrimaryPointer(inPointer)},dedupSynthMouse:function(inEvent){var lts=scope.mouseEvents.lastTouches;var t=inEvent.changedTouches[0];if(this.isPrimaryTouch(t)){var lt={x:t.clientX,y:t.clientY};lts.push(lt);var fn=function(lts,lt){var i=lts.indexOf(lt);if(i>-1){lts.splice(i,1)}}.bind(null,lts,lt);setTimeout(fn,DEDUP_TIMEOUT)}}};var STOP_PROP_FN=Event.prototype.stopImmediatePropagation||Event.prototype.stopPropagation;document.addEventListener("click",function(ev){var x=ev.clientX,y=ev.clientY;var closeTo=function(touch){var dx=Math.abs(x-touch.x),dy=Math.abs(y-touch.y);return dx<=DEDUP_DIST&&dy<=DEDUP_DIST};var wasTouched=scope.mouseEvents.lastTouches.some(closeTo);var path=scope.targetFinding.path(ev);if(wasTouched){for(var i=0;i<path.length;i++){if(path[i]===touchEvents.firstTarget){return}}ev.preventDefault();STOP_PROP_FN.call(ev)}},true);scope.touchEvents=touchEvents})(window.PolymerGestures);(function(scope){var dispatcher=scope.dispatcher;var pointermap=dispatcher.pointermap;var HAS_BITMAP_TYPE=window.MSPointerEvent&&typeof window.MSPointerEvent.MSPOINTER_TYPE_MOUSE==="number";var msEvents={events:["MSPointerDown","MSPointerMove","MSPointerUp","MSPointerCancel"],register:function(target){dispatcher.listen(target,this.events)},unregister:function(target){if(target.nodeType===Node.DOCUMENT_NODE){return}dispatcher.unlisten(target,this.events)},POINTER_TYPES:["","unavailable","touch","pen","mouse"],prepareEvent:function(inEvent){var e=inEvent;e=dispatcher.cloneEvent(inEvent);if(HAS_BITMAP_TYPE){e.pointerType=this.POINTER_TYPES[inEvent.pointerType]}e._source="ms";return e},cleanup:function(id){pointermap["delete"](id)},MSPointerDown:function(inEvent){var e=this.prepareEvent(inEvent);e.target=scope.findTarget(inEvent);pointermap.set(inEvent.pointerId,e.target);dispatcher.down(e)},MSPointerMove:function(inEvent){var target=pointermap.get(inEvent.pointerId);if(target){var e=this.prepareEvent(inEvent);e.target=target;dispatcher.move(e)}},MSPointerUp:function(inEvent){var e=this.prepareEvent(inEvent);e.relatedTarget=scope.findTarget(inEvent);e.target=pointermap.get(e.pointerId);dispatcher.up(e);this.cleanup(inEvent.pointerId)},MSPointerCancel:function(inEvent){var e=this.prepareEvent(inEvent);e.relatedTarget=scope.findTarget(inEvent);e.target=pointermap.get(e.pointerId);dispatcher.cancel(e);this.cleanup(inEvent.pointerId)}};scope.msEvents=msEvents})(window.PolymerGestures);(function(scope){var dispatcher=scope.dispatcher;var pointermap=dispatcher.pointermap;var pointerEvents={events:["pointerdown","pointermove","pointerup","pointercancel"],prepareEvent:function(inEvent){var e=dispatcher.cloneEvent(inEvent);e._source="pointer";return e},register:function(target){dispatcher.listen(target,this.events)},unregister:function(target){if(target.nodeType===Node.DOCUMENT_NODE){return}dispatcher.unlisten(target,this.events)},cleanup:function(id){pointermap["delete"](id)},pointerdown:function(inEvent){var e=this.prepareEvent(inEvent);e.target=scope.findTarget(inEvent);pointermap.set(e.pointerId,e.target);dispatcher.down(e)},pointermove:function(inEvent){var target=pointermap.get(inEvent.pointerId);if(target){var e=this.prepareEvent(inEvent);e.target=target;dispatcher.move(e)}},pointerup:function(inEvent){var e=this.prepareEvent(inEvent);e.relatedTarget=scope.findTarget(inEvent);e.target=pointermap.get(e.pointerId);dispatcher.up(e);this.cleanup(inEvent.pointerId)},pointercancel:function(inEvent){var e=this.prepareEvent(inEvent);e.relatedTarget=scope.findTarget(inEvent);e.target=pointermap.get(e.pointerId);dispatcher.cancel(e);this.cleanup(inEvent.pointerId)}};scope.pointerEvents=pointerEvents})(window.PolymerGestures);(function(scope){var dispatcher=scope.dispatcher;var nav=window.navigator;if(window.PointerEvent){dispatcher.registerSource("pointer",scope.pointerEvents)}else if(nav.msPointerEnabled){dispatcher.registerSource("ms",scope.msEvents)}else{dispatcher.registerSource("mouse",scope.mouseEvents);if(window.ontouchstart!==undefined){dispatcher.registerSource("touch",scope.touchEvents)}}var ua=navigator.userAgent;var IS_IOS=ua.match(/iPad|iPhone|iPod/)&&"ontouchstart"in window;dispatcher.IS_IOS=IS_IOS;scope.touchEvents.IS_IOS=IS_IOS;dispatcher.register(document,true)})(window.PolymerGestures);(function(scope){var dispatcher=scope.dispatcher;var eventFactory=scope.eventFactory;var pointermap=new scope.PointerMap;var track={events:["down","move","up"],exposes:["trackstart","track","trackx","tracky","trackend"],defaultActions:{track:"none",trackx:"pan-y",tracky:"pan-x"},WIGGLE_THRESHOLD:4,clampDir:function(inDelta){return inDelta>0?1:-1},calcPositionDelta:function(inA,inB){var x=0,y=0;if(inA&&inB){x=inB.pageX-inA.pageX;y=inB.pageY-inA.pageY}return{x:x,y:y}},fireTrack:function(inType,inEvent,inTrackingData){var t=inTrackingData;var d=this.calcPositionDelta(t.downEvent,inEvent);var dd=this.calcPositionDelta(t.lastMoveEvent,inEvent);if(dd.x){t.xDirection=this.clampDir(dd.x)}else if(inType==="trackx"){return}if(dd.y){t.yDirection=this.clampDir(dd.y)}else if(inType==="tracky"){return}var gestureProto={bubbles:true,cancelable:true,trackInfo:t.trackInfo,relatedTarget:inEvent.relatedTarget,pointerType:inEvent.pointerType,pointerId:inEvent.pointerId,_source:"track"};if(inType!=="tracky"){gestureProto.x=inEvent.x;gestureProto.dx=d.x;gestureProto.ddx=dd.x;gestureProto.clientX=inEvent.clientX;gestureProto.pageX=inEvent.pageX;gestureProto.screenX=inEvent.screenX;gestureProto.xDirection=t.xDirection}if(inType!=="trackx"){gestureProto.dy=d.y;gestureProto.ddy=dd.y;gestureProto.y=inEvent.y;gestureProto.clientY=inEvent.clientY;gestureProto.pageY=inEvent.pageY;gestureProto.screenY=inEvent.screenY;gestureProto.yDirection=t.yDirection}var e=eventFactory.makeGestureEvent(inType,gestureProto);t.downTarget.dispatchEvent(e)},down:function(inEvent){if(inEvent.isPrimary&&(inEvent.pointerType==="mouse"?inEvent.buttons===1:true)){var p={downEvent:inEvent,downTarget:inEvent.target,trackInfo:{},lastMoveEvent:null,xDirection:0,yDirection:0,tracking:false};pointermap.set(inEvent.pointerId,p)}},move:function(inEvent){var p=pointermap.get(inEvent.pointerId);if(p){if(!p.tracking){var d=this.calcPositionDelta(p.downEvent,inEvent);var move=d.x*d.x+d.y*d.y;if(move>this.WIGGLE_THRESHOLD){p.tracking=true;p.lastMoveEvent=p.downEvent;this.fireTrack("trackstart",inEvent,p)}}if(p.tracking){this.fireTrack("track",inEvent,p);this.fireTrack("trackx",inEvent,p);this.fireTrack("tracky",inEvent,p)}p.lastMoveEvent=inEvent}},up:function(inEvent){var p=pointermap.get(inEvent.pointerId);if(p){if(p.tracking){this.fireTrack("trackend",inEvent,p)}pointermap.delete(inEvent.pointerId)}}};dispatcher.registerGesture("track",track)})(window.PolymerGestures);(function(scope){var dispatcher=scope.dispatcher;var eventFactory=scope.eventFactory;var hold={HOLD_DELAY:200,WIGGLE_THRESHOLD:16,events:["down","move","up"],exposes:["hold","holdpulse","release"],heldPointer:null,holdJob:null,pulse:function(){var hold=Date.now()-this.heldPointer.timeStamp;var type=this.held?"holdpulse":"hold";this.fireHold(type,hold);this.held=true},cancel:function(){clearInterval(this.holdJob);if(this.held){this.fireHold("release")}this.held=false;this.heldPointer=null;this.target=null;this.holdJob=null},down:function(inEvent){if(inEvent.isPrimary&&!this.heldPointer){this.heldPointer=inEvent;this.target=inEvent.target;this.holdJob=setInterval(this.pulse.bind(this),this.HOLD_DELAY)}},up:function(inEvent){if(this.heldPointer&&this.heldPointer.pointerId===inEvent.pointerId){this.cancel()}},move:function(inEvent){if(this.heldPointer&&this.heldPointer.pointerId===inEvent.pointerId){var x=inEvent.clientX-this.heldPointer.clientX;var y=inEvent.clientY-this.heldPointer.clientY;if(x*x+y*y>this.WIGGLE_THRESHOLD){this.cancel()}}},fireHold:function(inType,inHoldTime){var p={bubbles:true,cancelable:true,pointerType:this.heldPointer.pointerType,pointerId:this.heldPointer.pointerId,x:this.heldPointer.clientX,y:this.heldPointer.clientY,_source:"hold"};if(inHoldTime){p.holdTime=inHoldTime}var e=eventFactory.makeGestureEvent(inType,p);this.target.dispatchEvent(e)}};dispatcher.registerGesture("hold",hold)})(window.PolymerGestures);(function(scope){var dispatcher=scope.dispatcher;var eventFactory=scope.eventFactory;var pointermap=new scope.PointerMap;var tap={events:["down","up"],exposes:["tap"],down:function(inEvent){if(inEvent.isPrimary&&!inEvent.tapPrevented){pointermap.set(inEvent.pointerId,{target:inEvent.target,buttons:inEvent.buttons,x:inEvent.clientX,y:inEvent.clientY})}},shouldTap:function(e,downState){var tap=true;if(e.pointerType==="mouse"){tap=e.buttons^1&&downState.buttons&1}return tap&&!e.tapPrevented},up:function(inEvent){var start=pointermap.get(inEvent.pointerId);if(start&&this.shouldTap(inEvent,start)){var t=scope.targetFinding.LCA(start.target,inEvent.relatedTarget);if(t){var e=eventFactory.makeGestureEvent("tap",{bubbles:true,cancelable:true,x:inEvent.clientX,y:inEvent.clientY,detail:inEvent.detail,pointerType:inEvent.pointerType,pointerId:inEvent.pointerId,altKey:inEvent.altKey,ctrlKey:inEvent.ctrlKey,metaKey:inEvent.metaKey,shiftKey:inEvent.shiftKey,_source:"tap"});t.dispatchEvent(e)}}pointermap.delete(inEvent.pointerId)}};eventFactory.preventTap=function(e){return function(){e.tapPrevented=true;pointermap.delete(e.pointerId)}};dispatcher.registerGesture("tap",tap)})(window.PolymerGestures);(function(scope){var dispatcher=scope.dispatcher;var eventFactory=scope.eventFactory;var pointermap=new scope.PointerMap;var RAD_TO_DEG=180/Math.PI;var pinch={events:["down","up","move","cancel"],exposes:["pinchstart","pinch","pinchend","rotate"],defaultActions:{pinch:"none",rotate:"none"},reference:{},down:function(inEvent){pointermap.set(inEvent.pointerId,inEvent);if(pointermap.pointers()==2){var points=this.calcChord();var angle=this.calcAngle(points);this.reference={angle:angle,diameter:points.diameter,target:scope.targetFinding.LCA(points.a.target,points.b.target)};this.firePinch("pinchstart",points.diameter,points)}},up:function(inEvent){var p=pointermap.get(inEvent.pointerId);var num=pointermap.pointers();if(p){if(num===2){var points=this.calcChord();this.firePinch("pinchend",points.diameter,points)}pointermap.delete(inEvent.pointerId)}},move:function(inEvent){if(pointermap.has(inEvent.pointerId)){pointermap.set(inEvent.pointerId,inEvent);if(pointermap.pointers()>1){this.calcPinchRotate()}}},cancel:function(inEvent){this.up(inEvent)},firePinch:function(type,diameter,points){var zoom=diameter/this.reference.diameter;var e=eventFactory.makeGestureEvent(type,{bubbles:true,cancelable:true,scale:zoom,centerX:points.center.x,centerY:points.center.y,_source:"pinch"});this.reference.target.dispatchEvent(e)},fireRotate:function(angle,points){var diff=Math.round((angle-this.reference.angle)%360);var e=eventFactory.makeGestureEvent("rotate",{bubbles:true,cancelable:true,angle:diff,centerX:points.center.x,centerY:points.center.y,_source:"pinch"});this.reference.target.dispatchEvent(e)},calcPinchRotate:function(){var points=this.calcChord();var diameter=points.diameter;var angle=this.calcAngle(points);if(diameter!=this.reference.diameter){this.firePinch("pinch",diameter,points)}if(angle!=this.reference.angle){this.fireRotate(angle,points)}},calcChord:function(){var pointers=[];pointermap.forEach(function(p){pointers.push(p)});var dist=0;var points={a:pointers[0],b:pointers[1]};var x,y,d;for(var i=0;i<pointers.length;i++){var a=pointers[i];for(var j=i+1;j<pointers.length;j++){
var b=pointers[j];x=Math.abs(a.clientX-b.clientX);y=Math.abs(a.clientY-b.clientY);d=x+y;if(d>dist){dist=d;points={a:a,b:b}}}}x=Math.abs(points.a.clientX+points.b.clientX)/2;y=Math.abs(points.a.clientY+points.b.clientY)/2;points.center={x:x,y:y};points.diameter=dist;return points},calcAngle:function(points){var x=points.a.clientX-points.b.clientX;var y=points.a.clientY-points.b.clientY;return(360+Math.atan2(y,x)*RAD_TO_DEG)%360}};dispatcher.registerGesture("pinch",pinch)})(window.PolymerGestures);(function(global){"use strict";var Token,TokenName,Syntax,Messages,source,index,length,delegate,lookahead,state;Token={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8};TokenName={};TokenName[Token.BooleanLiteral]="Boolean";TokenName[Token.EOF]="<end>";TokenName[Token.Identifier]="Identifier";TokenName[Token.Keyword]="Keyword";TokenName[Token.NullLiteral]="Null";TokenName[Token.NumericLiteral]="Numeric";TokenName[Token.Punctuator]="Punctuator";TokenName[Token.StringLiteral]="String";Syntax={ArrayExpression:"ArrayExpression",BinaryExpression:"BinaryExpression",CallExpression:"CallExpression",ConditionalExpression:"ConditionalExpression",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",Identifier:"Identifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ThisExpression:"ThisExpression",UnaryExpression:"UnaryExpression"};Messages={UnexpectedToken:"Unexpected token %0",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared"};function assert(condition,message){if(!condition){throw new Error("ASSERT: "+message)}}function isDecimalDigit(ch){return ch>=48&&ch<=57}function isWhiteSpace(ch){return ch===32||ch===9||ch===11||ch===12||ch===160||ch>=5760&&" ᠎             　\ufeff".indexOf(String.fromCharCode(ch))>0}function isLineTerminator(ch){return ch===10||ch===13||ch===8232||ch===8233}function isIdentifierStart(ch){return ch===36||ch===95||ch>=65&&ch<=90||ch>=97&&ch<=122}function isIdentifierPart(ch){return ch===36||ch===95||ch>=65&&ch<=90||ch>=97&&ch<=122||ch>=48&&ch<=57}function isKeyword(id){return id==="this"}function skipWhitespace(){while(index<length&&isWhiteSpace(source.charCodeAt(index))){++index}}function getIdentifier(){var start,ch;start=index++;while(index<length){ch=source.charCodeAt(index);if(isIdentifierPart(ch)){++index}else{break}}return source.slice(start,index)}function scanIdentifier(){var start,id,type;start=index;id=getIdentifier();if(id.length===1){type=Token.Identifier}else if(isKeyword(id)){type=Token.Keyword}else if(id==="null"){type=Token.NullLiteral}else if(id==="true"||id==="false"){type=Token.BooleanLiteral}else{type=Token.Identifier}return{type:type,value:id,range:[start,index]}}function scanPunctuator(){var start=index,code=source.charCodeAt(index),code2,ch1=source[index],ch2;switch(code){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:++index;return{type:Token.Punctuator,value:String.fromCharCode(code),range:[start,index]};default:code2=source.charCodeAt(index+1);if(code2===61){switch(code){case 37:case 38:case 42:case 43:case 45:case 47:case 60:case 62:case 124:index+=2;return{type:Token.Punctuator,value:String.fromCharCode(code)+String.fromCharCode(code2),range:[start,index]};case 33:case 61:index+=2;if(source.charCodeAt(index)===61){++index}return{type:Token.Punctuator,value:source.slice(start,index),range:[start,index]};default:break}}break}ch2=source[index+1];if(ch1===ch2&&"&|".indexOf(ch1)>=0){index+=2;return{type:Token.Punctuator,value:ch1+ch2,range:[start,index]}}if("<>=!+-*%&|^/".indexOf(ch1)>=0){++index;return{type:Token.Punctuator,value:ch1,range:[start,index]}}throwError({},Messages.UnexpectedToken,"ILLEGAL")}function scanNumericLiteral(){var number,start,ch;ch=source[index];assert(isDecimalDigit(ch.charCodeAt(0))||ch===".","Numeric literal must start with a decimal digit or a decimal point");start=index;number="";if(ch!=="."){number=source[index++];ch=source[index];if(number==="0"){if(ch&&isDecimalDigit(ch.charCodeAt(0))){throwError({},Messages.UnexpectedToken,"ILLEGAL")}}while(isDecimalDigit(source.charCodeAt(index))){number+=source[index++]}ch=source[index]}if(ch==="."){number+=source[index++];while(isDecimalDigit(source.charCodeAt(index))){number+=source[index++]}ch=source[index]}if(ch==="e"||ch==="E"){number+=source[index++];ch=source[index];if(ch==="+"||ch==="-"){number+=source[index++]}if(isDecimalDigit(source.charCodeAt(index))){while(isDecimalDigit(source.charCodeAt(index))){number+=source[index++]}}else{throwError({},Messages.UnexpectedToken,"ILLEGAL")}}if(isIdentifierStart(source.charCodeAt(index))){throwError({},Messages.UnexpectedToken,"ILLEGAL")}return{type:Token.NumericLiteral,value:parseFloat(number),range:[start,index]}}function scanStringLiteral(){var str="",quote,start,ch,octal=false;quote=source[index];assert(quote==="'"||quote==='"',"String literal must starts with a quote");start=index;++index;while(index<length){ch=source[index++];if(ch===quote){quote="";break}else if(ch==="\\"){ch=source[index++];if(!ch||!isLineTerminator(ch.charCodeAt(0))){switch(ch){case"n":str+="\n";break;case"r":str+="\r";break;case"t":str+="	";break;case"b":str+="\b";break;case"f":str+="\f";break;case"v":str+="";break;default:str+=ch;break}}else{if(ch==="\r"&&source[index]==="\n"){++index}}}else if(isLineTerminator(ch.charCodeAt(0))){break}else{str+=ch}}if(quote!==""){throwError({},Messages.UnexpectedToken,"ILLEGAL")}return{type:Token.StringLiteral,value:str,octal:octal,range:[start,index]}}function isIdentifierName(token){return token.type===Token.Identifier||token.type===Token.Keyword||token.type===Token.BooleanLiteral||token.type===Token.NullLiteral}function advance(){var ch;skipWhitespace();if(index>=length){return{type:Token.EOF,range:[index,index]}}ch=source.charCodeAt(index);if(ch===40||ch===41||ch===58){return scanPunctuator()}if(ch===39||ch===34){return scanStringLiteral()}if(isIdentifierStart(ch)){return scanIdentifier()}if(ch===46){if(isDecimalDigit(source.charCodeAt(index+1))){return scanNumericLiteral()}return scanPunctuator()}if(isDecimalDigit(ch)){return scanNumericLiteral()}return scanPunctuator()}function lex(){var token;token=lookahead;index=token.range[1];lookahead=advance();index=token.range[1];return token}function peek(){var pos;pos=index;lookahead=advance();index=pos}function throwError(token,messageFormat){var error,args=Array.prototype.slice.call(arguments,2),msg=messageFormat.replace(/%(\d)/g,function(whole,index){assert(index<args.length,"Message reference must be in range");return args[index]});error=new Error(msg);error.index=index;error.description=msg;throw error}function throwUnexpected(token){throwError(token,Messages.UnexpectedToken,token.value)}function expect(value){var token=lex();if(token.type!==Token.Punctuator||token.value!==value){throwUnexpected(token)}}function match(value){return lookahead.type===Token.Punctuator&&lookahead.value===value}function matchKeyword(keyword){return lookahead.type===Token.Keyword&&lookahead.value===keyword}function consumeSemicolon(){if(source.charCodeAt(index)===59){lex();return}skipWhitespace();if(match(";")){lex();return}if(lookahead.type!==Token.EOF&&!match("}")){throwUnexpected(lookahead)}}function parseArrayInitialiser(){var elements=[];expect("[");while(!match("]")){if(match(",")){lex();elements.push(null)}else{elements.push(parseExpression());if(!match("]")){expect(",")}}}expect("]");return delegate.createArrayExpression(elements)}function parseObjectPropertyKey(){var token;skipWhitespace();token=lex();if(token.type===Token.StringLiteral||token.type===Token.NumericLiteral){return delegate.createLiteral(token)}return delegate.createIdentifier(token.value)}function parseObjectProperty(){var token,key;token=lookahead;skipWhitespace();if(token.type===Token.EOF||token.type===Token.Punctuator){throwUnexpected(token)}key=parseObjectPropertyKey();expect(":");return delegate.createProperty("init",key,parseExpression())}function parseObjectInitialiser(){var properties=[];expect("{");while(!match("}")){properties.push(parseObjectProperty());if(!match("}")){expect(",")}}expect("}");return delegate.createObjectExpression(properties)}function parseGroupExpression(){var expr;expect("(");expr=parseExpression();expect(")");return expr}function parsePrimaryExpression(){var type,token,expr;if(match("(")){return parseGroupExpression()}type=lookahead.type;if(type===Token.Identifier){expr=delegate.createIdentifier(lex().value)}else if(type===Token.StringLiteral||type===Token.NumericLiteral){expr=delegate.createLiteral(lex())}else if(type===Token.Keyword){if(matchKeyword("this")){lex();expr=delegate.createThisExpression()}}else if(type===Token.BooleanLiteral){token=lex();token.value=token.value==="true";expr=delegate.createLiteral(token)}else if(type===Token.NullLiteral){token=lex();token.value=null;expr=delegate.createLiteral(token)}else if(match("[")){expr=parseArrayInitialiser()}else if(match("{")){expr=parseObjectInitialiser()}if(expr){return expr}throwUnexpected(lex())}function parseArguments(){var args=[];expect("(");if(!match(")")){while(index<length){args.push(parseExpression());if(match(")")){break}expect(",")}}expect(")");return args}function parseNonComputedProperty(){var token;token=lex();if(!isIdentifierName(token)){throwUnexpected(token)}return delegate.createIdentifier(token.value)}function parseNonComputedMember(){expect(".");return parseNonComputedProperty()}function parseComputedMember(){var expr;expect("[");expr=parseExpression();expect("]");return expr}function parseLeftHandSideExpression(){var expr,args,property;expr=parsePrimaryExpression();while(true){if(match("[")){property=parseComputedMember();expr=delegate.createMemberExpression("[",expr,property)}else if(match(".")){property=parseNonComputedMember();expr=delegate.createMemberExpression(".",expr,property)}else if(match("(")){args=parseArguments();expr=delegate.createCallExpression(expr,args)}else{break}}return expr}var parsePostfixExpression=parseLeftHandSideExpression;function parseUnaryExpression(){var token,expr;if(lookahead.type!==Token.Punctuator&&lookahead.type!==Token.Keyword){expr=parsePostfixExpression()}else if(match("+")||match("-")||match("!")){token=lex();expr=parseUnaryExpression();expr=delegate.createUnaryExpression(token.value,expr)}else if(matchKeyword("delete")||matchKeyword("void")||matchKeyword("typeof")){throwError({},Messages.UnexpectedToken)}else{expr=parsePostfixExpression()}return expr}function binaryPrecedence(token){var prec=0;if(token.type!==Token.Punctuator&&token.type!==Token.Keyword){return 0}switch(token.value){case"||":prec=1;break;case"&&":prec=2;break;case"==":case"!=":case"===":case"!==":prec=6;break;case"<":case">":case"<=":case">=":case"instanceof":prec=7;break;case"in":prec=7;break;case"+":case"-":prec=9;break;case"*":case"/":case"%":prec=11;break;default:break}return prec}function parseBinaryExpression(){var expr,token,prec,stack,right,operator,left,i;left=parseUnaryExpression();token=lookahead;prec=binaryPrecedence(token);if(prec===0){return left}token.prec=prec;lex();right=parseUnaryExpression();stack=[left,token,right];while((prec=binaryPrecedence(lookahead))>0){while(stack.length>2&&prec<=stack[stack.length-2].prec){right=stack.pop();operator=stack.pop().value;left=stack.pop();expr=delegate.createBinaryExpression(operator,left,right);stack.push(expr)}token=lex();token.prec=prec;stack.push(token);expr=parseUnaryExpression();stack.push(expr)}i=stack.length-1;expr=stack[i];while(i>1){expr=delegate.createBinaryExpression(stack[i-1].value,stack[i-2],expr);i-=2}return expr}function parseConditionalExpression(){var expr,consequent,alternate;expr=parseBinaryExpression();if(match("?")){lex();consequent=parseConditionalExpression();expect(":");alternate=parseConditionalExpression();expr=delegate.createConditionalExpression(expr,consequent,alternate)}return expr}var parseExpression=parseConditionalExpression;function parseFilter(){var identifier,args;identifier=lex();if(identifier.type!==Token.Identifier){throwUnexpected(identifier)}args=match("(")?parseArguments():[];return delegate.createFilter(identifier.value,args)}function parseFilters(){while(match("|")){lex();parseFilter()}}function parseTopLevel(){skipWhitespace();peek();var expr=parseExpression();if(expr){if(lookahead.value===","||lookahead.value=="in"&&expr.type===Syntax.Identifier){parseInExpression(expr)}else{parseFilters();if(lookahead.value==="as"){parseAsExpression(expr)}else{delegate.createTopLevel(expr)}}}if(lookahead.type!==Token.EOF){throwUnexpected(lookahead)}}function parseAsExpression(expr){lex();var identifier=lex().value;delegate.createAsExpression(expr,identifier)}function parseInExpression(identifier){var indexName;if(lookahead.value===","){lex();if(lookahead.type!==Token.Identifier)throwUnexpected(lookahead);indexName=lex().value}lex();var expr=parseExpression();parseFilters();delegate.createInExpression(identifier.name,indexName,expr)}function parse(code,inDelegate){delegate=inDelegate;source=code;index=0;length=source.length;lookahead=null;state={labelSet:{}};return parseTopLevel()}global.esprima={parse:parse}})(this);(function(global){"use strict";function prepareBinding(expressionText,name,node,filterRegistry){var expression;try{expression=getExpression(expressionText);if(expression.scopeIdent&&(node.nodeType!==Node.ELEMENT_NODE||node.tagName!=="TEMPLATE"||name!=="bind"&&name!=="repeat")){throw Error("as and in can only be used within <template bind/repeat>")}}catch(ex){console.error("Invalid expression syntax: "+expressionText,ex);return}return function(model,node,oneTime){var binding=expression.getBinding(model,filterRegistry,oneTime);if(expression.scopeIdent&&binding){node.polymerExpressionScopeIdent_=expression.scopeIdent;if(expression.indexIdent)node.polymerExpressionIndexIdent_=expression.indexIdent}return binding}}var expressionParseCache=Object.create(null);function getExpression(expressionText){var expression=expressionParseCache[expressionText];if(!expression){var delegate=new ASTDelegate;esprima.parse(expressionText,delegate);expression=new Expression(delegate);expressionParseCache[expressionText]=expression}return expression}function Literal(value){this.value=value;this.valueFn_=undefined}Literal.prototype={valueFn:function(){if(!this.valueFn_){var value=this.value;this.valueFn_=function(){return value}}return this.valueFn_}};function IdentPath(name){this.name=name;this.path=Path.get(name)}IdentPath.prototype={valueFn:function(){if(!this.valueFn_){var name=this.name;var path=this.path;this.valueFn_=function(model,observer){if(observer)observer.addPath(model,path);return path.getValueFrom(model)}}return this.valueFn_},setValue:function(model,newValue){if(this.path.length==1)model=findScope(model,this.path[0]);return this.path.setValueFrom(model,newValue)}};function MemberExpression(object,property,accessor){this.computed=accessor=="[";this.dynamicDeps=typeof object=="function"||object.dynamicDeps||this.computed&&!(property instanceof Literal);this.simplePath=!this.dynamicDeps&&(property instanceof IdentPath||property instanceof Literal)&&(object instanceof MemberExpression||object instanceof IdentPath);this.object=this.simplePath?object:getFn(object);this.property=!this.computed||this.simplePath?property:getFn(property)}MemberExpression.prototype={get fullPath(){if(!this.fullPath_){var parts=this.object instanceof MemberExpression?this.object.fullPath.slice():[this.object.name];parts.push(this.property instanceof IdentPath?this.property.name:this.property.value);this.fullPath_=Path.get(parts)}return this.fullPath_},valueFn:function(){if(!this.valueFn_){var object=this.object;if(this.simplePath){var path=this.fullPath;this.valueFn_=function(model,observer){if(observer)observer.addPath(model,path);return path.getValueFrom(model)}}else if(!this.computed){var path=Path.get(this.property.name);this.valueFn_=function(model,observer,filterRegistry){var context=object(model,observer,filterRegistry);if(observer)observer.addPath(context,path);return path.getValueFrom(context)}}else{var property=this.property;this.valueFn_=function(model,observer,filterRegistry){var context=object(model,observer,filterRegistry);var propName=property(model,observer,filterRegistry);if(observer)observer.addPath(context,[propName]);return context?context[propName]:undefined}}}return this.valueFn_},setValue:function(model,newValue){if(this.simplePath){this.fullPath.setValueFrom(model,newValue);return newValue}var object=this.object(model);var propName=this.property instanceof IdentPath?this.property.name:this.property(model);return object[propName]=newValue}};function Filter(name,args){this.name=name;this.args=[];for(var i=0;i<args.length;i++){this.args[i]=getFn(args[i])}}Filter.prototype={transform:function(model,observer,filterRegistry,toModelDirection,initialArgs){var context=model;var fn=context[this.name];if(!fn){fn=filterRegistry[this.name];if(!fn){console.error("Cannot find function or filter: "+this.name);return}}if(toModelDirection){fn=fn.toModel}else if(typeof fn.toDOM=="function"){fn=fn.toDOM}if(typeof fn!="function"){console.error("Cannot find function or filter: "+this.name);return}var args=initialArgs||[];for(var i=0;i<this.args.length;i++){args.push(getFn(this.args[i])(model,observer,filterRegistry))}return fn.apply(context,args)}};function notImplemented(){throw Error("Not Implemented")}var unaryOperators={"+":function(v){return+v},"-":function(v){return-v},"!":function(v){return!v}};var binaryOperators={"+":function(l,r){return l+r},"-":function(l,r){return l-r},"*":function(l,r){return l*r},"/":function(l,r){return l/r},"%":function(l,r){return l%r},"<":function(l,r){return l<r},">":function(l,r){return l>r},"<=":function(l,r){return l<=r},">=":function(l,r){return l>=r},"==":function(l,r){return l==r},"!=":function(l,r){return l!=r},"===":function(l,r){return l===r},"!==":function(l,r){return l!==r},"&&":function(l,r){return l&&r},"||":function(l,r){return l||r}};function getFn(arg){return typeof arg=="function"?arg:arg.valueFn()}function ASTDelegate(){this.expression=null;this.filters=[];this.deps={};this.currentPath=undefined;this.scopeIdent=undefined;this.indexIdent=undefined;this.dynamicDeps=false}ASTDelegate.prototype={createUnaryExpression:function(op,argument){if(!unaryOperators[op])throw Error("Disallowed operator: "+op);argument=getFn(argument);return function(model,observer,filterRegistry){return unaryOperators[op](argument(model,observer,filterRegistry))}},createBinaryExpression:function(op,left,right){if(!binaryOperators[op])throw Error("Disallowed operator: "+op);left=getFn(left);right=getFn(right);switch(op){case"||":this.dynamicDeps=true;return function(model,observer,filterRegistry){return left(model,observer,filterRegistry)||right(model,observer,filterRegistry)};case"&&":this.dynamicDeps=true;return function(model,observer,filterRegistry){return left(model,observer,filterRegistry)&&right(model,observer,filterRegistry)}}return function(model,observer,filterRegistry){return binaryOperators[op](left(model,observer,filterRegistry),right(model,observer,filterRegistry))}},createConditionalExpression:function(test,consequent,alternate){test=getFn(test);consequent=getFn(consequent);alternate=getFn(alternate);this.dynamicDeps=true;return function(model,observer,filterRegistry){return test(model,observer,filterRegistry)?consequent(model,observer,filterRegistry):alternate(model,observer,filterRegistry)}},createIdentifier:function(name){var ident=new IdentPath(name);ident.type="Identifier";return ident},createMemberExpression:function(accessor,object,property){var ex=new MemberExpression(object,property,accessor);if(ex.dynamicDeps)this.dynamicDeps=true;return ex},createCallExpression:function(expression,args){if(!(expression instanceof IdentPath))throw Error("Only identifier function invocations are allowed");var filter=new Filter(expression.name,args);return function(model,observer,filterRegistry){return filter.transform(model,observer,filterRegistry,false)}},createLiteral:function(token){return new Literal(token.value)},createArrayExpression:function(elements){for(var i=0;i<elements.length;i++)elements[i]=getFn(elements[i]);return function(model,observer,filterRegistry){var arr=[];for(var i=0;i<elements.length;i++)arr.push(elements[i](model,observer,filterRegistry));return arr}},createProperty:function(kind,key,value){return{key:key instanceof IdentPath?key.name:key.value,value:value}},createObjectExpression:function(properties){for(var i=0;i<properties.length;i++)properties[i].value=getFn(properties[i].value);return function(model,observer,filterRegistry){var obj={};for(var i=0;i<properties.length;i++)obj[properties[i].key]=properties[i].value(model,observer,filterRegistry);return obj}},createFilter:function(name,args){this.filters.push(new Filter(name,args))},createAsExpression:function(expression,scopeIdent){this.expression=expression;this.scopeIdent=scopeIdent},createInExpression:function(scopeIdent,indexIdent,expression){this.expression=expression;this.scopeIdent=scopeIdent;this.indexIdent=indexIdent},createTopLevel:function(expression){this.expression=expression},createThisExpression:notImplemented};function ConstantObservable(value){this.value_=value}ConstantObservable.prototype={open:function(){return this.value_},discardChanges:function(){return this.value_},deliver:function(){},close:function(){}};function Expression(delegate){this.scopeIdent=delegate.scopeIdent;this.indexIdent=delegate.indexIdent;if(!delegate.expression)throw Error("No expression found.");this.expression=delegate.expression;getFn(this.expression);this.filters=delegate.filters;this.dynamicDeps=delegate.dynamicDeps}Expression.prototype={getBinding:function(model,filterRegistry,oneTime){if(oneTime)return this.getValue(model,undefined,filterRegistry);var observer=new CompoundObserver;var firstValue=this.getValue(model,observer,filterRegistry);var firstTime=true;var self=this;function valueFn(){if(firstTime){firstTime=false;return firstValue}if(self.dynamicDeps)observer.startReset();var value=self.getValue(model,self.dynamicDeps?observer:undefined,filterRegistry);if(self.dynamicDeps)observer.finishReset();return value}function setValueFn(newValue){self.setValue(model,newValue,filterRegistry);return newValue}return new ObserverTransform(observer,valueFn,setValueFn,true)},getValue:function(model,observer,filterRegistry){var value=getFn(this.expression)(model,observer,filterRegistry);for(var i=0;i<this.filters.length;i++){value=this.filters[i].transform(model,observer,filterRegistry,false,[value])}return value},setValue:function(model,newValue,filterRegistry){var count=this.filters?this.filters.length:0;while(count-->0){newValue=this.filters[count].transform(model,undefined,filterRegistry,true,[newValue])}if(this.expression.setValue)return this.expression.setValue(model,newValue)}};function convertStylePropertyName(name){return String(name).replace(/[A-Z]/g,function(c){return"-"+c.toLowerCase()})}var parentScopeName="@"+Math.random().toString(36).slice(2);function findScope(model,prop){while(model[parentScopeName]&&!Object.prototype.hasOwnProperty.call(model,prop)){model=model[parentScopeName]}return model}function isLiteralExpression(pathString){switch(pathString){case"":return false;case"false":case"null":case"true":return true}if(!isNaN(Number(pathString)))return true;return false}function PolymerExpressions(){}PolymerExpressions.prototype={styleObject:function(value){var parts=[];for(var key in value){parts.push(convertStylePropertyName(key)+": "+value[key])}return parts.join("; ")},tokenList:function(value){var tokens=[];for(var key in value){if(value[key])tokens.push(key)}return tokens.join(" ")},prepareInstancePositionChanged:function(template){var indexIdent=template.polymerExpressionIndexIdent_;if(!indexIdent)return;return function(templateInstance,index){templateInstance.model[indexIdent]=index}},prepareBinding:function(pathString,name,node){var path=Path.get(pathString);if(!isLiteralExpression(pathString)&&path.valid){if(path.length==1){return function(model,node,oneTime){if(oneTime)return path.getValueFrom(model);var scope=findScope(model,path[0]);return new PathObserver(scope,path)}}return}return prepareBinding(pathString,name,node,this)},prepareInstanceModel:function(template){var scopeName=template.polymerExpressionScopeIdent_;if(!scopeName)return;var parentScope=template.templateInstance?template.templateInstance.model:template.model;var indexName=template.polymerExpressionIndexIdent_;return function(model){return createScopeObject(parentScope,model,scopeName,indexName)}}};var createScopeObject="__proto__"in{}?function(parentScope,model,scopeName,indexName){var scope={};scope[scopeName]=model;scope[indexName]=undefined;scope[parentScopeName]=parentScope;scope.__proto__=parentScope;return scope}:function(parentScope,model,scopeName,indexName){var scope=Object.create(parentScope);Object.defineProperty(scope,scopeName,{value:model,configurable:true,writable:true});Object.defineProperty(scope,indexName,{value:undefined,configurable:true,writable:true});Object.defineProperty(scope,parentScopeName,{value:parentScope,configurable:true,writable:true});return scope};global.PolymerExpressions=PolymerExpressions;PolymerExpressions.getExpression=getExpression})(this);Polymer={version:"0.5.5"};if(typeof window.Polymer==="function"){Polymer={}}(function(scope){function withDependencies(task,depends){depends=depends||[];if(!depends.map){depends=[depends]}return task.apply(this,depends.map(marshal))}function module(name,dependsOrFactory,moduleFactory){var module;switch(arguments.length){case 0:return;case 1:module=null;break;case 2:module=dependsOrFactory.apply(this);break;default:module=withDependencies(moduleFactory,dependsOrFactory);break}modules[name]=module}function marshal(name){return modules[name]}var modules={};function using(depends,task){HTMLImports.whenImportsReady(function(){withDependencies(task,depends)})}scope.marshal=marshal;scope.modularize=module;scope.using=using})(window);if(!window.WebComponents){if(!window.WebComponents){WebComponents={flush:function(){},flags:{log:{}}};Platform=WebComponents;CustomElements={useNative:true,ready:true,takeRecords:function(){},"instanceof":function(obj,base){return obj instanceof base}};HTMLImports={useNative:true};addEventListener("HTMLImportsLoaded",function(){document.dispatchEvent(new CustomEvent("WebComponentsReady",{bubbles:true}))});ShadowDOMPolyfill=null;wrap=unwrap=function(n){return n}}window.HTMLImports=window.HTMLImports||{flags:{}};(function(scope){var IMPORT_LINK_TYPE="import";var useNative=Boolean(IMPORT_LINK_TYPE in document.createElement("link"));var hasShadowDOMPolyfill=Boolean(window.ShadowDOMPolyfill);var wrap=function(node){return hasShadowDOMPolyfill?ShadowDOMPolyfill.wrapIfNeeded(node):node};var rootDocument=wrap(document);var currentScriptDescriptor={get:function(){var script=HTMLImports.currentScript||document.currentScript||(document.readyState!=="complete"?document.scripts[document.scripts.length-1]:null);return wrap(script)},configurable:true};Object.defineProperty(document,"_currentScript",currentScriptDescriptor);Object.defineProperty(rootDocument,"_currentScript",currentScriptDescriptor);var isIE=/Trident/.test(navigator.userAgent);function whenReady(callback,doc){doc=doc||rootDocument;whenDocumentReady(function(){watchImportsLoad(callback,doc)},doc)}var requiredReadyState=isIE?"complete":"interactive";var READY_EVENT="readystatechange";function isDocumentReady(doc){return doc.readyState==="complete"||doc.readyState===requiredReadyState}function whenDocumentReady(callback,doc){if(!isDocumentReady(doc)){var checkReady=function(){if(doc.readyState==="complete"||doc.readyState===requiredReadyState){doc.removeEventListener(READY_EVENT,checkReady);whenDocumentReady(callback,doc)}};doc.addEventListener(READY_EVENT,checkReady)}else if(callback){callback()}}function markTargetLoaded(event){event.target.__loaded=true}function watchImportsLoad(callback,doc){var imports=doc.querySelectorAll("link[rel=import]");var loaded=0,l=imports.length;function checkDone(d){if(loaded==l&&callback){callback()}}function loadedImport(e){markTargetLoaded(e);loaded++;checkDone()}if(l){for(var i=0,imp;i<l&&(imp=imports[i]);i++){if(isImportLoaded(imp)){loadedImport.call(imp,{target:imp})}else{imp.addEventListener("load",loadedImport);imp.addEventListener("error",loadedImport)}}}else{checkDone()}}function isImportLoaded(link){return useNative?link.__loaded||link.import&&link.import.readyState!=="loading":link.__importParsed}if(useNative){new MutationObserver(function(mxns){for(var i=0,l=mxns.length,m;i<l&&(m=mxns[i]);i++){if(m.addedNodes){handleImports(m.addedNodes)}}}).observe(document.head,{childList:true});function handleImports(nodes){for(var i=0,l=nodes.length,n;i<l&&(n=nodes[i]);i++){if(isImport(n)){handleImport(n)}}}function isImport(element){return element.localName==="link"&&element.rel==="import"}function handleImport(element){var loaded=element.import;if(loaded){markTargetLoaded({target:element})}else{element.addEventListener("load",markTargetLoaded);element.addEventListener("error",markTargetLoaded)}}(function(){if(document.readyState==="loading"){var imports=document.querySelectorAll("link[rel=import]");for(var i=0,l=imports.length,imp;i<l&&(imp=imports[i]);i++){handleImport(imp)}}})()}whenReady(function(){HTMLImports.ready=true;HTMLImports.readyTime=(new Date).getTime();rootDocument.dispatchEvent(new CustomEvent("HTMLImportsLoaded",{bubbles:true}))});scope.IMPORT_LINK_TYPE=IMPORT_LINK_TYPE;scope.useNative=useNative;scope.rootDocument=rootDocument;scope.whenReady=whenReady;scope.isIE=isIE})(HTMLImports);(function(scope){var style=document.createElement("style");style.textContent=""+"body {"+"transition: opacity ease-in 0.2s;"+" } \n"+"body[unresolved] {"+"opacity: 0; display: block; overflow: hidden;"+" } \n";var head=document.querySelector("head");head.insertBefore(style,head.firstChild)})(Platform)}(function(global){"use strict";var testingExposeCycleCount=global.testingExposeCycleCount;function detectObjectObserve(){if(typeof Object.observe!=="function"||typeof Array.observe!=="function"){return false}var records=[];function callback(recs){records=recs}var test={};var arr=[];Object.observe(test,callback);Array.observe(arr,callback);test.id=1;test.id=2;delete test.id;arr.push(1,2);arr.length=0;Object.deliverChangeRecords(callback);if(records.length!==5)return false;if(records[0].type!="add"||records[1].type!="update"||records[2].type!="delete"||records[3].type!="splice"||records[4].type!="splice"){return false}Object.unobserve(test,callback);Array.unobserve(arr,callback);return true}var hasObserve=detectObjectObserve();function detectEval(){if(typeof chrome!=="undefined"&&chrome.app&&chrome.app.runtime){return false}if(typeof navigator!="undefined"&&navigator.getDeviceStorage){return false}try{var f=new Function("","return true;");return f()}catch(ex){return false}}var hasEval=detectEval();function isIndex(s){return+s===s>>>0&&s!==""}function toNumber(s){return+s}function isObject(obj){return obj===Object(obj)}var numberIsNaN=global.Number.isNaN||function(value){return typeof value==="number"&&global.isNaN(value)};function areSameValue(left,right){if(left===right)return left!==0||1/left===1/right;if(numberIsNaN(left)&&numberIsNaN(right))return true;return left!==left&&right!==right}var createObject="__proto__"in{}?function(obj){return obj}:function(obj){var proto=obj.__proto__;if(!proto)return obj;var newObject=Object.create(proto);Object.getOwnPropertyNames(obj).forEach(function(name){Object.defineProperty(newObject,name,Object.getOwnPropertyDescriptor(obj,name))});return newObject};var identStart="[$_a-zA-Z]";var identPart="[$_a-zA-Z0-9]";var identRegExp=new RegExp("^"+identStart+"+"+identPart+"*"+"$");
function getPathCharType(char){if(char===undefined)return"eof";var code=char.charCodeAt(0);switch(code){case 91:case 93:case 46:case 34:case 39:case 48:return char;case 95:case 36:return"ident";case 32:case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"ws"}if(97<=code&&code<=122||65<=code&&code<=90)return"ident";if(49<=code&&code<=57)return"number";return"else"}var pathStateMachine={beforePath:{ws:["beforePath"],ident:["inIdent","append"],"[":["beforeElement"],eof:["afterPath"]},inPath:{ws:["inPath"],".":["beforeIdent"],"[":["beforeElement"],eof:["afterPath"]},beforeIdent:{ws:["beforeIdent"],ident:["inIdent","append"]},inIdent:{ident:["inIdent","append"],0:["inIdent","append"],number:["inIdent","append"],ws:["inPath","push"],".":["beforeIdent","push"],"[":["beforeElement","push"],eof:["afterPath","push"]},beforeElement:{ws:["beforeElement"],0:["afterZero","append"],number:["inIndex","append"],"'":["inSingleQuote","append",""],'"':["inDoubleQuote","append",""]},afterZero:{ws:["afterElement","push"],"]":["inPath","push"]},inIndex:{0:["inIndex","append"],number:["inIndex","append"],ws:["afterElement"],"]":["inPath","push"]},inSingleQuote:{"'":["afterElement"],eof:["error"],"else":["inSingleQuote","append"]},inDoubleQuote:{'"':["afterElement"],eof:["error"],"else":["inDoubleQuote","append"]},afterElement:{ws:["afterElement"],"]":["inPath","push"]}};function noop(){}function parsePath(path){var keys=[];var index=-1;var c,newChar,key,type,transition,action,typeMap,mode="beforePath";var actions={push:function(){if(key===undefined)return;keys.push(key);key=undefined},append:function(){if(key===undefined)key=newChar;else key+=newChar}};function maybeUnescapeQuote(){if(index>=path.length)return;var nextChar=path[index+1];if(mode=="inSingleQuote"&&nextChar=="'"||mode=="inDoubleQuote"&&nextChar=='"'){index++;newChar=nextChar;actions.append();return true}}while(mode){index++;c=path[index];if(c=="\\"&&maybeUnescapeQuote(mode))continue;type=getPathCharType(c);typeMap=pathStateMachine[mode];transition=typeMap[type]||typeMap["else"]||"error";if(transition=="error")return;mode=transition[0];action=actions[transition[1]]||noop;newChar=transition[2]===undefined?c:transition[2];action();if(mode==="afterPath"){return keys}}return}function isIdent(s){return identRegExp.test(s)}var constructorIsPrivate={};function Path(parts,privateToken){if(privateToken!==constructorIsPrivate)throw Error("Use Path.get to retrieve path objects");for(var i=0;i<parts.length;i++){this.push(String(parts[i]))}if(hasEval&&this.length){this.getValueFrom=this.compiledGetValueFromFn()}}var pathCache={};function getPath(pathString){if(pathString instanceof Path)return pathString;if(pathString==null||pathString.length==0)pathString="";if(typeof pathString!="string"){if(isIndex(pathString.length)){return new Path(pathString,constructorIsPrivate)}pathString=String(pathString)}var path=pathCache[pathString];if(path)return path;var parts=parsePath(pathString);if(!parts)return invalidPath;var path=new Path(parts,constructorIsPrivate);pathCache[pathString]=path;return path}Path.get=getPath;function formatAccessor(key){if(isIndex(key)){return"["+key+"]"}else{return'["'+key.replace(/"/g,'\\"')+'"]'}}Path.prototype=createObject({__proto__:[],valid:true,toString:function(){var pathString="";for(var i=0;i<this.length;i++){var key=this[i];if(isIdent(key)){pathString+=i?"."+key:key}else{pathString+=formatAccessor(key)}}return pathString},getValueFrom:function(obj,directObserver){for(var i=0;i<this.length;i++){if(obj==null)return;obj=obj[this[i]]}return obj},iterateObjects:function(obj,observe){for(var i=0;i<this.length;i++){if(i)obj=obj[this[i-1]];if(!isObject(obj))return;observe(obj,this[i])}},compiledGetValueFromFn:function(){var str="";var pathString="obj";str+="if (obj != null";var i=0;var key;for(;i<this.length-1;i++){key=this[i];pathString+=isIdent(key)?"."+key:formatAccessor(key);str+=" &&\n     "+pathString+" != null"}str+=")\n";var key=this[i];pathString+=isIdent(key)?"."+key:formatAccessor(key);str+="  return "+pathString+";\nelse\n  return undefined;";return new Function("obj",str)},setValueFrom:function(obj,value){if(!this.length)return false;for(var i=0;i<this.length-1;i++){if(!isObject(obj))return false;obj=obj[this[i]]}if(!isObject(obj))return false;obj[this[i]]=value;return true}});var invalidPath=new Path("",constructorIsPrivate);invalidPath.valid=false;invalidPath.getValueFrom=invalidPath.setValueFrom=function(){};var MAX_DIRTY_CHECK_CYCLES=1e3;function dirtyCheck(observer){var cycles=0;while(cycles<MAX_DIRTY_CHECK_CYCLES&&observer.check_()){cycles++}if(testingExposeCycleCount)global.dirtyCheckCycleCount=cycles;return cycles>0}function objectIsEmpty(object){for(var prop in object)return false;return true}function diffIsEmpty(diff){return objectIsEmpty(diff.added)&&objectIsEmpty(diff.removed)&&objectIsEmpty(diff.changed)}function diffObjectFromOldObject(object,oldObject){var added={};var removed={};var changed={};for(var prop in oldObject){var newValue=object[prop];if(newValue!==undefined&&newValue===oldObject[prop])continue;if(!(prop in object)){removed[prop]=undefined;continue}if(newValue!==oldObject[prop])changed[prop]=newValue}for(var prop in object){if(prop in oldObject)continue;added[prop]=object[prop]}if(Array.isArray(object)&&object.length!==oldObject.length)changed.length=object.length;return{added:added,removed:removed,changed:changed}}var eomTasks=[];function runEOMTasks(){if(!eomTasks.length)return false;for(var i=0;i<eomTasks.length;i++){eomTasks[i]()}eomTasks.length=0;return true}var runEOM=hasObserve?function(){return function(fn){return Promise.resolve().then(fn)}}():function(){return function(fn){eomTasks.push(fn)}}();var observedObjectCache=[];function newObservedObject(){var observer;var object;var discardRecords=false;var first=true;function callback(records){if(observer&&observer.state_===OPENED&&!discardRecords)observer.check_(records)}return{open:function(obs){if(observer)throw Error("ObservedObject in use");if(!first)Object.deliverChangeRecords(callback);observer=obs;first=false},observe:function(obj,arrayObserve){object=obj;if(arrayObserve)Array.observe(object,callback);else Object.observe(object,callback)},deliver:function(discard){discardRecords=discard;Object.deliverChangeRecords(callback);discardRecords=false},close:function(){observer=undefined;Object.unobserve(object,callback);observedObjectCache.push(this)}}}function getObservedObject(observer,object,arrayObserve){var dir=observedObjectCache.pop()||newObservedObject();dir.open(observer);dir.observe(object,arrayObserve);return dir}var observedSetCache=[];function newObservedSet(){var observerCount=0;var observers=[];var objects=[];var rootObj;var rootObjProps;function observe(obj,prop){if(!obj)return;if(obj===rootObj)rootObjProps[prop]=true;if(objects.indexOf(obj)<0){objects.push(obj);Object.observe(obj,callback)}observe(Object.getPrototypeOf(obj),prop)}function allRootObjNonObservedProps(recs){for(var i=0;i<recs.length;i++){var rec=recs[i];if(rec.object!==rootObj||rootObjProps[rec.name]||rec.type==="setPrototype"){return false}}return true}function callback(recs){if(allRootObjNonObservedProps(recs))return;var observer;for(var i=0;i<observers.length;i++){observer=observers[i];if(observer.state_==OPENED){observer.iterateObjects_(observe)}}for(var i=0;i<observers.length;i++){observer=observers[i];if(observer.state_==OPENED){observer.check_()}}}var record={objects:objects,get rootObject(){return rootObj},set rootObject(value){rootObj=value;rootObjProps={}},open:function(obs,object){observers.push(obs);observerCount++;obs.iterateObjects_(observe)},close:function(obs){observerCount--;if(observerCount>0){return}for(var i=0;i<objects.length;i++){Object.unobserve(objects[i],callback);Observer.unobservedCount++}observers.length=0;objects.length=0;rootObj=undefined;rootObjProps=undefined;observedSetCache.push(this);if(lastObservedSet===this)lastObservedSet=null}};return record}var lastObservedSet;function getObservedSet(observer,obj){if(!lastObservedSet||lastObservedSet.rootObject!==obj){lastObservedSet=observedSetCache.pop()||newObservedSet();lastObservedSet.rootObject=obj}lastObservedSet.open(observer,obj);return lastObservedSet}var UNOPENED=0;var OPENED=1;var CLOSED=2;var RESETTING=3;var nextObserverId=1;function Observer(){this.state_=UNOPENED;this.callback_=undefined;this.target_=undefined;this.directObserver_=undefined;this.value_=undefined;this.id_=nextObserverId++}Observer.prototype={open:function(callback,target){if(this.state_!=UNOPENED)throw Error("Observer has already been opened.");addToAll(this);this.callback_=callback;this.target_=target;this.connect_();this.state_=OPENED;return this.value_},close:function(){if(this.state_!=OPENED)return;removeFromAll(this);this.disconnect_();this.value_=undefined;this.callback_=undefined;this.target_=undefined;this.state_=CLOSED},deliver:function(){if(this.state_!=OPENED)return;dirtyCheck(this)},report_:function(changes){try{this.callback_.apply(this.target_,changes)}catch(ex){Observer._errorThrownDuringCallback=true;console.error("Exception caught during observer callback: "+(ex.stack||ex))}},discardChanges:function(){this.check_(undefined,true);return this.value_}};var collectObservers=!hasObserve;var allObservers;Observer._allObserversCount=0;if(collectObservers){allObservers=[]}function addToAll(observer){Observer._allObserversCount++;if(!collectObservers)return;allObservers.push(observer)}function removeFromAll(observer){Observer._allObserversCount--}var runningMicrotaskCheckpoint=false;global.Platform=global.Platform||{};global.Platform.performMicrotaskCheckpoint=function(){if(runningMicrotaskCheckpoint)return;if(!collectObservers)return;runningMicrotaskCheckpoint=true;var cycles=0;var anyChanged,toCheck;do{cycles++;toCheck=allObservers;allObservers=[];anyChanged=false;for(var i=0;i<toCheck.length;i++){var observer=toCheck[i];if(observer.state_!=OPENED)continue;if(observer.check_())anyChanged=true;allObservers.push(observer)}if(runEOMTasks())anyChanged=true}while(cycles<MAX_DIRTY_CHECK_CYCLES&&anyChanged);if(testingExposeCycleCount)global.dirtyCheckCycleCount=cycles;runningMicrotaskCheckpoint=false};if(collectObservers){global.Platform.clearObservers=function(){allObservers=[]}}function ObjectObserver(object){Observer.call(this);this.value_=object;this.oldObject_=undefined}ObjectObserver.prototype=createObject({__proto__:Observer.prototype,arrayObserve:false,connect_:function(callback,target){if(hasObserve){this.directObserver_=getObservedObject(this,this.value_,this.arrayObserve)}else{this.oldObject_=this.copyObject(this.value_)}},copyObject:function(object){var copy=Array.isArray(object)?[]:{};for(var prop in object){copy[prop]=object[prop]}if(Array.isArray(object))copy.length=object.length;return copy},check_:function(changeRecords,skipChanges){var diff;var oldValues;if(hasObserve){if(!changeRecords)return false;oldValues={};diff=diffObjectFromChangeRecords(this.value_,changeRecords,oldValues)}else{oldValues=this.oldObject_;diff=diffObjectFromOldObject(this.value_,this.oldObject_)}if(diffIsEmpty(diff))return false;if(!hasObserve)this.oldObject_=this.copyObject(this.value_);this.report_([diff.added||{},diff.removed||{},diff.changed||{},function(property){return oldValues[property]}]);return true},disconnect_:function(){if(hasObserve){this.directObserver_.close();this.directObserver_=undefined}else{this.oldObject_=undefined}},deliver:function(){if(this.state_!=OPENED)return;if(hasObserve)this.directObserver_.deliver(false);else dirtyCheck(this)},discardChanges:function(){if(this.directObserver_)this.directObserver_.deliver(true);else this.oldObject_=this.copyObject(this.value_);return this.value_}});function ArrayObserver(array){if(!Array.isArray(array))throw Error("Provided object is not an Array");ObjectObserver.call(this,array)}ArrayObserver.prototype=createObject({__proto__:ObjectObserver.prototype,arrayObserve:true,copyObject:function(arr){return arr.slice()},check_:function(changeRecords){var splices;if(hasObserve){if(!changeRecords)return false;splices=projectArraySplices(this.value_,changeRecords)}else{splices=calcSplices(this.value_,0,this.value_.length,this.oldObject_,0,this.oldObject_.length)}if(!splices||!splices.length)return false;if(!hasObserve)this.oldObject_=this.copyObject(this.value_);this.report_([splices]);return true}});ArrayObserver.applySplices=function(previous,current,splices){splices.forEach(function(splice){var spliceArgs=[splice.index,splice.removed.length];var addIndex=splice.index;while(addIndex<splice.index+splice.addedCount){spliceArgs.push(current[addIndex]);addIndex++}Array.prototype.splice.apply(previous,spliceArgs)})};function PathObserver(object,path){Observer.call(this);this.object_=object;this.path_=getPath(path);this.directObserver_=undefined}PathObserver.prototype=createObject({__proto__:Observer.prototype,get path(){return this.path_},connect_:function(){if(hasObserve)this.directObserver_=getObservedSet(this,this.object_);this.check_(undefined,true)},disconnect_:function(){this.value_=undefined;if(this.directObserver_){this.directObserver_.close(this);this.directObserver_=undefined}},iterateObjects_:function(observe){this.path_.iterateObjects(this.object_,observe)},check_:function(changeRecords,skipChanges){var oldValue=this.value_;this.value_=this.path_.getValueFrom(this.object_);if(skipChanges||areSameValue(this.value_,oldValue))return false;this.report_([this.value_,oldValue,this]);return true},setValue:function(newValue){if(this.path_)this.path_.setValueFrom(this.object_,newValue)}});function CompoundObserver(reportChangesOnOpen){Observer.call(this);this.reportChangesOnOpen_=reportChangesOnOpen;this.value_=[];this.directObserver_=undefined;this.observed_=[]}var observerSentinel={};CompoundObserver.prototype=createObject({__proto__:Observer.prototype,connect_:function(){if(hasObserve){var object;var needsDirectObserver=false;for(var i=0;i<this.observed_.length;i+=2){object=this.observed_[i];if(object!==observerSentinel){needsDirectObserver=true;break}}if(needsDirectObserver)this.directObserver_=getObservedSet(this,object)}this.check_(undefined,!this.reportChangesOnOpen_)},disconnect_:function(){for(var i=0;i<this.observed_.length;i+=2){if(this.observed_[i]===observerSentinel)this.observed_[i+1].close()}this.observed_.length=0;this.value_.length=0;if(this.directObserver_){this.directObserver_.close(this);this.directObserver_=undefined}},addPath:function(object,path){if(this.state_!=UNOPENED&&this.state_!=RESETTING)throw Error("Cannot add paths once started.");var path=getPath(path);this.observed_.push(object,path);if(!this.reportChangesOnOpen_)return;var index=this.observed_.length/2-1;this.value_[index]=path.getValueFrom(object)},addObserver:function(observer){if(this.state_!=UNOPENED&&this.state_!=RESETTING)throw Error("Cannot add observers once started.");this.observed_.push(observerSentinel,observer);if(!this.reportChangesOnOpen_)return;var index=this.observed_.length/2-1;this.value_[index]=observer.open(this.deliver,this)},startReset:function(){if(this.state_!=OPENED)throw Error("Can only reset while open");this.state_=RESETTING;this.disconnect_()},finishReset:function(){if(this.state_!=RESETTING)throw Error("Can only finishReset after startReset");this.state_=OPENED;this.connect_();return this.value_},iterateObjects_:function(observe){var object;for(var i=0;i<this.observed_.length;i+=2){object=this.observed_[i];if(object!==observerSentinel)this.observed_[i+1].iterateObjects(object,observe)}},check_:function(changeRecords,skipChanges){var oldValues;for(var i=0;i<this.observed_.length;i+=2){var object=this.observed_[i];var path=this.observed_[i+1];var value;if(object===observerSentinel){var observable=path;value=this.state_===UNOPENED?observable.open(this.deliver,this):observable.discardChanges()}else{value=path.getValueFrom(object)}if(skipChanges){this.value_[i/2]=value;continue}if(areSameValue(value,this.value_[i/2]))continue;oldValues=oldValues||[];oldValues[i/2]=this.value_[i/2];this.value_[i/2]=value}if(!oldValues)return false;this.report_([this.value_,oldValues,this.observed_]);return true}});function identFn(value){return value}function ObserverTransform(observable,getValueFn,setValueFn,dontPassThroughSet){this.callback_=undefined;this.target_=undefined;this.value_=undefined;this.observable_=observable;this.getValueFn_=getValueFn||identFn;this.setValueFn_=setValueFn||identFn;this.dontPassThroughSet_=dontPassThroughSet}ObserverTransform.prototype={open:function(callback,target){this.callback_=callback;this.target_=target;this.value_=this.getValueFn_(this.observable_.open(this.observedCallback_,this));return this.value_},observedCallback_:function(value){value=this.getValueFn_(value);if(areSameValue(value,this.value_))return;var oldValue=this.value_;this.value_=value;this.callback_.call(this.target_,this.value_,oldValue)},discardChanges:function(){this.value_=this.getValueFn_(this.observable_.discardChanges());return this.value_},deliver:function(){return this.observable_.deliver()},setValue:function(value){value=this.setValueFn_(value);if(!this.dontPassThroughSet_&&this.observable_.setValue)return this.observable_.setValue(value)},close:function(){if(this.observable_)this.observable_.close();this.callback_=undefined;this.target_=undefined;this.observable_=undefined;this.value_=undefined;this.getValueFn_=undefined;this.setValueFn_=undefined}};var expectedRecordTypes={add:true,update:true,"delete":true};function diffObjectFromChangeRecords(object,changeRecords,oldValues){var added={};var removed={};for(var i=0;i<changeRecords.length;i++){var record=changeRecords[i];if(!expectedRecordTypes[record.type]){console.error("Unknown changeRecord type: "+record.type);console.error(record);continue}if(!(record.name in oldValues))oldValues[record.name]=record.oldValue;if(record.type=="update")continue;if(record.type=="add"){if(record.name in removed)delete removed[record.name];else added[record.name]=true;continue}if(record.name in added){delete added[record.name];delete oldValues[record.name]}else{removed[record.name]=true}}for(var prop in added)added[prop]=object[prop];for(var prop in removed)removed[prop]=undefined;var changed={};for(var prop in oldValues){if(prop in added||prop in removed)continue;var newValue=object[prop];if(oldValues[prop]!==newValue)changed[prop]=newValue}return{added:added,removed:removed,changed:changed}}function newSplice(index,removed,addedCount){return{index:index,removed:removed,addedCount:addedCount}}var EDIT_LEAVE=0;var EDIT_UPDATE=1;var EDIT_ADD=2;var EDIT_DELETE=3;function ArraySplice(){}ArraySplice.prototype={calcEditDistances:function(current,currentStart,currentEnd,old,oldStart,oldEnd){var rowCount=oldEnd-oldStart+1;var columnCount=currentEnd-currentStart+1;var distances=new Array(rowCount);for(var i=0;i<rowCount;i++){distances[i]=new Array(columnCount);distances[i][0]=i}for(var j=0;j<columnCount;j++)distances[0][j]=j;for(var i=1;i<rowCount;i++){for(var j=1;j<columnCount;j++){if(this.equals(current[currentStart+j-1],old[oldStart+i-1]))distances[i][j]=distances[i-1][j-1];else{var north=distances[i-1][j]+1;var west=distances[i][j-1]+1;distances[i][j]=north<west?north:west}}}return distances},spliceOperationsFromEditDistances:function(distances){var i=distances.length-1;var j=distances[0].length-1;var current=distances[i][j];var edits=[];while(i>0||j>0){if(i==0){edits.push(EDIT_ADD);j--;continue}if(j==0){edits.push(EDIT_DELETE);i--;continue}var northWest=distances[i-1][j-1];var west=distances[i-1][j];var north=distances[i][j-1];var min;if(west<north)min=west<northWest?west:northWest;else min=north<northWest?north:northWest;if(min==northWest){if(northWest==current){edits.push(EDIT_LEAVE)}else{edits.push(EDIT_UPDATE);current=northWest}i--;j--}else if(min==west){edits.push(EDIT_DELETE);i--;current=west}else{edits.push(EDIT_ADD);j--;current=north}}edits.reverse();return edits},calcSplices:function(current,currentStart,currentEnd,old,oldStart,oldEnd){var prefixCount=0;var suffixCount=0;var minLength=Math.min(currentEnd-currentStart,oldEnd-oldStart);if(currentStart==0&&oldStart==0)prefixCount=this.sharedPrefix(current,old,minLength);if(currentEnd==current.length&&oldEnd==old.length)suffixCount=this.sharedSuffix(current,old,minLength-prefixCount);currentStart+=prefixCount;oldStart+=prefixCount;currentEnd-=suffixCount;oldEnd-=suffixCount;if(currentEnd-currentStart==0&&oldEnd-oldStart==0)return[];if(currentStart==currentEnd){var splice=newSplice(currentStart,[],0);while(oldStart<oldEnd)splice.removed.push(old[oldStart++]);return[splice]}else if(oldStart==oldEnd)return[newSplice(currentStart,[],currentEnd-currentStart)];var ops=this.spliceOperationsFromEditDistances(this.calcEditDistances(current,currentStart,currentEnd,old,oldStart,oldEnd));var splice=undefined;var splices=[];var index=currentStart;var oldIndex=oldStart;for(var i=0;i<ops.length;i++){switch(ops[i]){case EDIT_LEAVE:if(splice){splices.push(splice);splice=undefined}index++;oldIndex++;break;case EDIT_UPDATE:if(!splice)splice=newSplice(index,[],0);splice.addedCount++;index++;splice.removed.push(old[oldIndex]);oldIndex++;break;case EDIT_ADD:if(!splice)splice=newSplice(index,[],0);splice.addedCount++;index++;break;case EDIT_DELETE:if(!splice)splice=newSplice(index,[],0);splice.removed.push(old[oldIndex]);oldIndex++;break}}if(splice){splices.push(splice)}return splices},sharedPrefix:function(current,old,searchLength){for(var i=0;i<searchLength;i++)if(!this.equals(current[i],old[i]))return i;return searchLength},sharedSuffix:function(current,old,searchLength){var index1=current.length;var index2=old.length;var count=0;while(count<searchLength&&this.equals(current[--index1],old[--index2]))count++;return count},calculateSplices:function(current,previous){return this.calcSplices(current,0,current.length,previous,0,previous.length)},equals:function(currentValue,previousValue){return currentValue===previousValue}};var arraySplice=new ArraySplice;function calcSplices(current,currentStart,currentEnd,old,oldStart,oldEnd){return arraySplice.calcSplices(current,currentStart,currentEnd,old,oldStart,oldEnd)}function intersect(start1,end1,start2,end2){if(end1<start2||end2<start1)return-1;if(end1==start2||end2==start1)return 0;if(start1<start2){if(end1<end2)return end1-start2;else return end2-start2}else{if(end2<end1)return end2-start1;else return end1-start1}}function mergeSplice(splices,index,removed,addedCount){var splice=newSplice(index,removed,addedCount);var inserted=false;var insertionOffset=0;for(var i=0;i<splices.length;i++){var current=splices[i];current.index+=insertionOffset;if(inserted)continue;var intersectCount=intersect(splice.index,splice.index+splice.removed.length,current.index,current.index+current.addedCount);if(intersectCount>=0){splices.splice(i,1);i--;insertionOffset-=current.addedCount-current.removed.length;splice.addedCount+=current.addedCount-intersectCount;var deleteCount=splice.removed.length+current.removed.length-intersectCount;if(!splice.addedCount&&!deleteCount){inserted=true}else{var removed=current.removed;if(splice.index<current.index){var prepend=splice.removed.slice(0,current.index-splice.index);Array.prototype.push.apply(prepend,removed);removed=prepend}if(splice.index+splice.removed.length>current.index+current.addedCount){var append=splice.removed.slice(current.index+current.addedCount-splice.index);Array.prototype.push.apply(removed,append)}splice.removed=removed;if(current.index<splice.index){splice.index=current.index}}}else if(splice.index<current.index){inserted=true;splices.splice(i,0,splice);i++;var offset=splice.addedCount-splice.removed.length;current.index+=offset;insertionOffset+=offset}}if(!inserted)splices.push(splice)}function createInitialSplices(array,changeRecords){var splices=[];for(var i=0;i<changeRecords.length;i++){var record=changeRecords[i];switch(record.type){case"splice":mergeSplice(splices,record.index,record.removed.slice(),record.addedCount);break;case"add":case"update":case"delete":if(!isIndex(record.name))continue;var index=toNumber(record.name);if(index<0)continue;mergeSplice(splices,index,[record.oldValue],1);break;default:console.error("Unexpected record type: "+JSON.stringify(record));break}}return splices}function projectArraySplices(array,changeRecords){var splices=[];createInitialSplices(array,changeRecords).forEach(function(splice){if(splice.addedCount==1&&splice.removed.length==1){if(splice.removed[0]!==array[splice.index])splices.push(splice);return}splices=splices.concat(calcSplices(array,splice.index,splice.index+splice.addedCount,splice.removed,0,splice.removed.length))});return splices}var expose=global;if(typeof exports!=="undefined"&&!exports.nodeType){if(typeof module!=="undefined"&&module.exports){exports=module.exports}expose=exports}expose.Observer=Observer;expose.Observer.runEOM_=runEOM;expose.Observer.observerSentinel_=observerSentinel;expose.Observer.hasObjectObserve=hasObserve;expose.ArrayObserver=ArrayObserver;expose.ArrayObserver.calculateSplices=function(current,previous){return arraySplice.calculateSplices(current,previous)};expose.ArraySplice=ArraySplice;expose.ObjectObserver=ObjectObserver;expose.PathObserver=PathObserver;expose.CompoundObserver=CompoundObserver;expose.Path=Path;expose.ObserverTransform=ObserverTransform})(typeof global!=="undefined"&&global&&typeof module!=="undefined"&&module?global:this||window);(function(global){"use strict";var filter=Array.prototype.filter.call.bind(Array.prototype.filter);function getTreeScope(node){while(node.parentNode){node=node.parentNode}return typeof node.getElementById==="function"?node:null}Node.prototype.bind=function(name,observable){console.error("Unhandled binding to Node: ",this,name,observable)};Node.prototype.bindFinished=function(){};function updateBindings(node,name,binding){var bindings=node.bindings_;if(!bindings)bindings=node.bindings_={};if(bindings[name])binding[name].close();return bindings[name]=binding}function returnBinding(node,name,binding){return binding}function sanitizeValue(value){return value==null?"":value}function updateText(node,value){node.data=sanitizeValue(value)}function textBinding(node){return function(value){return updateText(node,value)}}var maybeUpdateBindings=returnBinding;Object.defineProperty(Platform,"enableBindingsReflection",{get:function(){return maybeUpdateBindings===updateBindings},set:function(enable){maybeUpdateBindings=enable?updateBindings:returnBinding;return enable},configurable:true});Text.prototype.bind=function(name,value,oneTime){if(name!=="textContent")return Node.prototype.bind.call(this,name,value,oneTime);if(oneTime)return updateText(this,value);var observable=value;updateText(this,observable.open(textBinding(this)));return maybeUpdateBindings(this,name,observable)};function updateAttribute(el,name,conditional,value){if(conditional){if(value)el.setAttribute(name,"");else el.removeAttribute(name);return}el.setAttribute(name,sanitizeValue(value))}function attributeBinding(el,name,conditional){return function(value){updateAttribute(el,name,conditional,value)}}Element.prototype.bind=function(name,value,oneTime){var conditional=name[name.length-1]=="?";if(conditional){this.removeAttribute(name);name=name.slice(0,-1)}if(oneTime)return updateAttribute(this,name,conditional,value);var observable=value;updateAttribute(this,name,conditional,observable.open(attributeBinding(this,name,conditional)));return maybeUpdateBindings(this,name,observable)};var checkboxEventType;(function(){var div=document.createElement("div");var checkbox=div.appendChild(document.createElement("input"));checkbox.setAttribute("type","checkbox");var first;var count=0;checkbox.addEventListener("click",function(e){count++;first=first||"click"});checkbox.addEventListener("change",function(){count++;first=first||"change"});var event=document.createEvent("MouseEvent");event.initMouseEvent("click",true,true,window,0,0,0,0,0,false,false,false,false,0,null);checkbox.dispatchEvent(event);checkboxEventType=count==1?"change":first})();function getEventForInputType(element){switch(element.type){case"checkbox":return checkboxEventType;case"radio":case"select-multiple":case"select-one":return"change";case"range":if(/Trident|MSIE/.test(navigator.userAgent))return"change";default:return"input"}}function updateInput(input,property,value,santizeFn){input[property]=(santizeFn||sanitizeValue)(value)}function inputBinding(input,property,santizeFn){return function(value){return updateInput(input,property,value,santizeFn)}}function noop(){}function bindInputEvent(input,property,observable,postEventFn){var eventType=getEventForInputType(input);function eventHandler(){var isNum=property=="value"&&input.type=="number";observable.setValue(isNum?input.valueAsNumber:input[property]);observable.discardChanges();(postEventFn||noop)(input);Platform.performMicrotaskCheckpoint()}input.addEventListener(eventType,eventHandler);return{close:function(){input.removeEventListener(eventType,eventHandler);observable.close()},observable_:observable}}function booleanSanitize(value){return Boolean(value)}function getAssociatedRadioButtons(element){if(element.form){return filter(element.form.elements,function(el){return el!=element&&el.tagName=="INPUT"&&el.type=="radio"&&el.name==element.name})}else{var treeScope=getTreeScope(element);if(!treeScope)return[];var radios=treeScope.querySelectorAll('input[type="radio"][name="'+element.name+'"]');return filter(radios,function(el){return el!=element&&!el.form})}}function checkedPostEvent(input){if(input.tagName==="INPUT"&&input.type==="radio"){getAssociatedRadioButtons(input).forEach(function(radio){var checkedBinding=radio.bindings_.checked;if(checkedBinding){checkedBinding.observable_.setValue(false)}})}}HTMLInputElement.prototype.bind=function(name,value,oneTime){if(name!=="value"&&name!=="checked")return HTMLElement.prototype.bind.call(this,name,value,oneTime);this.removeAttribute(name);var sanitizeFn=name=="checked"?booleanSanitize:sanitizeValue;var postEventFn=name=="checked"?checkedPostEvent:noop;if(oneTime)return updateInput(this,name,value,sanitizeFn);var observable=value;var binding=bindInputEvent(this,name,observable,postEventFn);updateInput(this,name,observable.open(inputBinding(this,name,sanitizeFn)),sanitizeFn);return updateBindings(this,name,binding)};HTMLTextAreaElement.prototype.bind=function(name,value,oneTime){if(name!=="value")return HTMLElement.prototype.bind.call(this,name,value,oneTime);this.removeAttribute("value");if(oneTime)return updateInput(this,"value",value);var observable=value;var binding=bindInputEvent(this,"value",observable);updateInput(this,"value",observable.open(inputBinding(this,"value",sanitizeValue)));return maybeUpdateBindings(this,name,binding)};function updateOption(option,value){var parentNode=option.parentNode;var select;var selectBinding;var oldValue;if(parentNode instanceof HTMLSelectElement&&parentNode.bindings_&&parentNode.bindings_.value){select=parentNode;selectBinding=select.bindings_.value;oldValue=select.value}option.value=sanitizeValue(value);if(select&&select.value!=oldValue){selectBinding.observable_.setValue(select.value);selectBinding.observable_.discardChanges();Platform.performMicrotaskCheckpoint()}}function optionBinding(option){return function(value){updateOption(option,value)}}HTMLOptionElement.prototype.bind=function(name,value,oneTime){if(name!=="value")return HTMLElement.prototype.bind.call(this,name,value,oneTime);this.removeAttribute("value");if(oneTime)return updateOption(this,value);var observable=value;var binding=bindInputEvent(this,"value",observable);updateOption(this,observable.open(optionBinding(this)));return maybeUpdateBindings(this,name,binding)};HTMLSelectElement.prototype.bind=function(name,value,oneTime){if(name==="selectedindex")name="selectedIndex";if(name!=="selectedIndex"&&name!=="value")return HTMLElement.prototype.bind.call(this,name,value,oneTime);this.removeAttribute(name);if(oneTime)return updateInput(this,name,value);
var observable=value;var binding=bindInputEvent(this,name,observable);updateInput(this,name,observable.open(inputBinding(this,name)));return updateBindings(this,name,binding)}})(this);(function(global){"use strict";function assert(v){if(!v)throw new Error("Assertion failed")}var forEach=Array.prototype.forEach.call.bind(Array.prototype.forEach);function getFragmentRoot(node){var p;while(p=node.parentNode){node=p}return node}function searchRefId(node,id){if(!id)return;var ref;var selector="#"+id;while(!ref){node=getFragmentRoot(node);if(node.protoContent_)ref=node.protoContent_.querySelector(selector);else if(node.getElementById)ref=node.getElementById(id);if(ref||!node.templateCreator_)break;node=node.templateCreator_}return ref}function getInstanceRoot(node){while(node.parentNode){node=node.parentNode}return node.templateCreator_?node:null}var Map;if(global.Map&&typeof global.Map.prototype.forEach==="function"){Map=global.Map}else{Map=function(){this.keys=[];this.values=[]};Map.prototype={set:function(key,value){var index=this.keys.indexOf(key);if(index<0){this.keys.push(key);this.values.push(value)}else{this.values[index]=value}},get:function(key){var index=this.keys.indexOf(key);if(index<0)return;return this.values[index]},"delete":function(key,value){var index=this.keys.indexOf(key);if(index<0)return false;this.keys.splice(index,1);this.values.splice(index,1);return true},forEach:function(f,opt_this){for(var i=0;i<this.keys.length;i++)f.call(opt_this||this,this.values[i],this.keys[i],this)}}}var createObject="__proto__"in{}?function(obj){return obj}:function(obj){var proto=obj.__proto__;if(!proto)return obj;var newObject=Object.create(proto);Object.getOwnPropertyNames(obj).forEach(function(name){Object.defineProperty(newObject,name,Object.getOwnPropertyDescriptor(obj,name))});return newObject};if(typeof document.contains!="function"){Document.prototype.contains=function(node){if(node===this||node.parentNode===this)return true;return this.documentElement.contains(node)}}var BIND="bind";var REPEAT="repeat";var IF="if";var templateAttributeDirectives={template:true,repeat:true,bind:true,ref:true,"if":true};var semanticTemplateElements={THEAD:true,TBODY:true,TFOOT:true,TH:true,TR:true,TD:true,COLGROUP:true,COL:true,CAPTION:true,OPTION:true,OPTGROUP:true};var hasTemplateElement=typeof HTMLTemplateElement!=="undefined";if(hasTemplateElement){(function(){var t=document.createElement("template");var d=t.content.ownerDocument;var html=d.appendChild(d.createElement("html"));var head=html.appendChild(d.createElement("head"));var base=d.createElement("base");base.href=document.baseURI;head.appendChild(base)})()}var allTemplatesSelectors="template, "+Object.keys(semanticTemplateElements).map(function(tagName){return tagName.toLowerCase()+"[template]"}).join(", ");function isSVGTemplate(el){return el.tagName=="template"&&el.namespaceURI=="http://www.w3.org/2000/svg"}function isHTMLTemplate(el){return el.tagName=="TEMPLATE"&&el.namespaceURI=="http://www.w3.org/1999/xhtml"}function isAttributeTemplate(el){return Boolean(semanticTemplateElements[el.tagName]&&el.hasAttribute("template"))}function isTemplate(el){if(el.isTemplate_===undefined)el.isTemplate_=el.tagName=="TEMPLATE"||isAttributeTemplate(el);return el.isTemplate_}document.addEventListener("DOMContentLoaded",function(e){bootstrapTemplatesRecursivelyFrom(document);Platform.performMicrotaskCheckpoint()},false);function forAllTemplatesFrom(node,fn){var subTemplates=node.querySelectorAll(allTemplatesSelectors);if(isTemplate(node))fn(node);forEach(subTemplates,fn)}function bootstrapTemplatesRecursivelyFrom(node){function bootstrap(template){if(!HTMLTemplateElement.decorate(template))bootstrapTemplatesRecursivelyFrom(template.content)}forAllTemplatesFrom(node,bootstrap)}if(!hasTemplateElement){global.HTMLTemplateElement=function(){throw TypeError("Illegal constructor")}}var hasProto="__proto__"in{};function mixin(to,from){Object.getOwnPropertyNames(from).forEach(function(name){Object.defineProperty(to,name,Object.getOwnPropertyDescriptor(from,name))})}function getOrCreateTemplateContentsOwner(template){var doc=template.ownerDocument;if(!doc.defaultView)return doc;var d=doc.templateContentsOwner_;if(!d){d=doc.implementation.createHTMLDocument("");while(d.lastChild){d.removeChild(d.lastChild)}doc.templateContentsOwner_=d}return d}function getTemplateStagingDocument(template){if(!template.stagingDocument_){var owner=template.ownerDocument;if(!owner.stagingDocument_){owner.stagingDocument_=owner.implementation.createHTMLDocument("");owner.stagingDocument_.isStagingDocument=true;var base=owner.stagingDocument_.createElement("base");base.href=document.baseURI;owner.stagingDocument_.head.appendChild(base);owner.stagingDocument_.stagingDocument_=owner.stagingDocument_}template.stagingDocument_=owner.stagingDocument_}return template.stagingDocument_}function extractTemplateFromAttributeTemplate(el){var template=el.ownerDocument.createElement("template");el.parentNode.insertBefore(template,el);var attribs=el.attributes;var count=attribs.length;while(count-->0){var attrib=attribs[count];if(templateAttributeDirectives[attrib.name]){if(attrib.name!=="template")template.setAttribute(attrib.name,attrib.value);el.removeAttribute(attrib.name)}}return template}function extractTemplateFromSVGTemplate(el){var template=el.ownerDocument.createElement("template");el.parentNode.insertBefore(template,el);var attribs=el.attributes;var count=attribs.length;while(count-->0){var attrib=attribs[count];template.setAttribute(attrib.name,attrib.value);el.removeAttribute(attrib.name)}el.parentNode.removeChild(el);return template}function liftNonNativeTemplateChildrenIntoContent(template,el,useRoot){var content=template.content;if(useRoot){content.appendChild(el);return}var child;while(child=el.firstChild){content.appendChild(child)}}var templateObserver;if(typeof MutationObserver=="function"){templateObserver=new MutationObserver(function(records){for(var i=0;i<records.length;i++){records[i].target.refChanged_()}})}HTMLTemplateElement.decorate=function(el,opt_instanceRef){if(el.templateIsDecorated_)return false;var templateElement=el;templateElement.templateIsDecorated_=true;var isNativeHTMLTemplate=isHTMLTemplate(templateElement)&&hasTemplateElement;var bootstrapContents=isNativeHTMLTemplate;var liftContents=!isNativeHTMLTemplate;var liftRoot=false;if(!isNativeHTMLTemplate){if(isAttributeTemplate(templateElement)){assert(!opt_instanceRef);templateElement=extractTemplateFromAttributeTemplate(el);templateElement.templateIsDecorated_=true;isNativeHTMLTemplate=hasTemplateElement;liftRoot=true}else if(isSVGTemplate(templateElement)){templateElement=extractTemplateFromSVGTemplate(el);templateElement.templateIsDecorated_=true;isNativeHTMLTemplate=hasTemplateElement}}if(!isNativeHTMLTemplate){fixTemplateElementPrototype(templateElement);var doc=getOrCreateTemplateContentsOwner(templateElement);templateElement.content_=doc.createDocumentFragment()}if(opt_instanceRef){templateElement.instanceRef_=opt_instanceRef}else if(liftContents){liftNonNativeTemplateChildrenIntoContent(templateElement,el,liftRoot)}else if(bootstrapContents){bootstrapTemplatesRecursivelyFrom(templateElement.content)}return true};HTMLTemplateElement.bootstrap=bootstrapTemplatesRecursivelyFrom;var htmlElement=global.HTMLUnknownElement||HTMLElement;var contentDescriptor={get:function(){return this.content_},enumerable:true,configurable:true};if(!hasTemplateElement){HTMLTemplateElement.prototype=Object.create(htmlElement.prototype);Object.defineProperty(HTMLTemplateElement.prototype,"content",contentDescriptor)}function fixTemplateElementPrototype(el){if(hasProto)el.__proto__=HTMLTemplateElement.prototype;else mixin(el,HTMLTemplateElement.prototype)}function ensureSetModelScheduled(template){if(!template.setModelFn_){template.setModelFn_=function(){template.setModelFnScheduled_=false;var map=getBindings(template,template.delegate_&&template.delegate_.prepareBinding);processBindings(template,map,template.model_)}}if(!template.setModelFnScheduled_){template.setModelFnScheduled_=true;Observer.runEOM_(template.setModelFn_)}}mixin(HTMLTemplateElement.prototype,{bind:function(name,value,oneTime){if(name!="ref")return Element.prototype.bind.call(this,name,value,oneTime);var self=this;var ref=oneTime?value:value.open(function(ref){self.setAttribute("ref",ref);self.refChanged_()});this.setAttribute("ref",ref);this.refChanged_();if(oneTime)return;if(!this.bindings_){this.bindings_={ref:value}}else{this.bindings_.ref=value}return value},processBindingDirectives_:function(directives){if(this.iterator_)this.iterator_.closeDeps();if(!directives.if&&!directives.bind&&!directives.repeat){if(this.iterator_){this.iterator_.close();this.iterator_=undefined}return}if(!this.iterator_){this.iterator_=new TemplateIterator(this)}this.iterator_.updateDependencies(directives,this.model_);if(templateObserver){templateObserver.observe(this,{attributes:true,attributeFilter:["ref"]})}return this.iterator_},createInstance:function(model,bindingDelegate,delegate_){if(bindingDelegate)delegate_=this.newDelegate_(bindingDelegate);else if(!delegate_)delegate_=this.delegate_;if(!this.refContent_)this.refContent_=this.ref_.content;var content=this.refContent_;if(content.firstChild===null)return emptyInstance;var map=getInstanceBindingMap(content,delegate_);var stagingDocument=getTemplateStagingDocument(this);var instance=stagingDocument.createDocumentFragment();instance.templateCreator_=this;instance.protoContent_=content;instance.bindings_=[];instance.terminator_=null;var instanceRecord=instance.templateInstance_={firstNode:null,lastNode:null,model:model};var i=0;var collectTerminator=false;for(var child=content.firstChild;child;child=child.nextSibling){if(child.nextSibling===null)collectTerminator=true;var clone=cloneAndBindInstance(child,instance,stagingDocument,map.children[i++],model,delegate_,instance.bindings_);clone.templateInstance_=instanceRecord;if(collectTerminator)instance.terminator_=clone}instanceRecord.firstNode=instance.firstChild;instanceRecord.lastNode=instance.lastChild;instance.templateCreator_=undefined;instance.protoContent_=undefined;return instance},get model(){return this.model_},set model(model){this.model_=model;ensureSetModelScheduled(this)},get bindingDelegate(){return this.delegate_&&this.delegate_.raw},refChanged_:function(){if(!this.iterator_||this.refContent_===this.ref_.content)return;this.refContent_=undefined;this.iterator_.valueChanged();this.iterator_.updateIteratedValue(this.iterator_.getUpdatedValue())},clear:function(){this.model_=undefined;this.delegate_=undefined;if(this.bindings_&&this.bindings_.ref)this.bindings_.ref.close();this.refContent_=undefined;if(!this.iterator_)return;this.iterator_.valueChanged();this.iterator_.close();this.iterator_=undefined},setDelegate_:function(delegate){this.delegate_=delegate;this.bindingMap_=undefined;if(this.iterator_){this.iterator_.instancePositionChangedFn_=undefined;this.iterator_.instanceModelFn_=undefined}},newDelegate_:function(bindingDelegate){if(!bindingDelegate)return;function delegateFn(name){var fn=bindingDelegate&&bindingDelegate[name];if(typeof fn!="function")return;return function(){return fn.apply(bindingDelegate,arguments)}}return{bindingMaps:{},raw:bindingDelegate,prepareBinding:delegateFn("prepareBinding"),prepareInstanceModel:delegateFn("prepareInstanceModel"),prepareInstancePositionChanged:delegateFn("prepareInstancePositionChanged")}},set bindingDelegate(bindingDelegate){if(this.delegate_){throw Error("Template must be cleared before a new bindingDelegate "+"can be assigned")}this.setDelegate_(this.newDelegate_(bindingDelegate))},get ref_(){var ref=searchRefId(this,this.getAttribute("ref"));if(!ref)ref=this.instanceRef_;if(!ref)return this;var nextRef=ref.ref_;return nextRef?nextRef:ref}});function parseMustaches(s,name,node,prepareBindingFn){if(!s||!s.length)return;var tokens;var length=s.length;var startIndex=0,lastIndex=0,endIndex=0;var onlyOneTime=true;while(lastIndex<length){var startIndex=s.indexOf("{{",lastIndex);var oneTimeStart=s.indexOf("[[",lastIndex);var oneTime=false;var terminator="}}";if(oneTimeStart>=0&&(startIndex<0||oneTimeStart<startIndex)){startIndex=oneTimeStart;oneTime=true;terminator="]]"}endIndex=startIndex<0?-1:s.indexOf(terminator,startIndex+2);if(endIndex<0){if(!tokens)return;tokens.push(s.slice(lastIndex));break}tokens=tokens||[];tokens.push(s.slice(lastIndex,startIndex));var pathString=s.slice(startIndex+2,endIndex).trim();tokens.push(oneTime);onlyOneTime=onlyOneTime&&oneTime;var delegateFn=prepareBindingFn&&prepareBindingFn(pathString,name,node);if(delegateFn==null){tokens.push(Path.get(pathString))}else{tokens.push(null)}tokens.push(delegateFn);lastIndex=endIndex+2}if(lastIndex===length)tokens.push("");tokens.hasOnePath=tokens.length===5;tokens.isSimplePath=tokens.hasOnePath&&tokens[0]==""&&tokens[4]=="";tokens.onlyOneTime=onlyOneTime;tokens.combinator=function(values){var newValue=tokens[0];for(var i=1;i<tokens.length;i+=4){var value=tokens.hasOnePath?values:values[(i-1)/4];if(value!==undefined)newValue+=value;newValue+=tokens[i+3]}return newValue};return tokens}function processOneTimeBinding(name,tokens,node,model){if(tokens.hasOnePath){var delegateFn=tokens[3];var value=delegateFn?delegateFn(model,node,true):tokens[2].getValueFrom(model);return tokens.isSimplePath?value:tokens.combinator(value)}var values=[];for(var i=1;i<tokens.length;i+=4){var delegateFn=tokens[i+2];values[(i-1)/4]=delegateFn?delegateFn(model,node):tokens[i+1].getValueFrom(model)}return tokens.combinator(values)}function processSinglePathBinding(name,tokens,node,model){var delegateFn=tokens[3];var observer=delegateFn?delegateFn(model,node,false):new PathObserver(model,tokens[2]);return tokens.isSimplePath?observer:new ObserverTransform(observer,tokens.combinator)}function processBinding(name,tokens,node,model){if(tokens.onlyOneTime)return processOneTimeBinding(name,tokens,node,model);if(tokens.hasOnePath)return processSinglePathBinding(name,tokens,node,model);var observer=new CompoundObserver;for(var i=1;i<tokens.length;i+=4){var oneTime=tokens[i];var delegateFn=tokens[i+2];if(delegateFn){var value=delegateFn(model,node,oneTime);if(oneTime)observer.addPath(value);else observer.addObserver(value);continue}var path=tokens[i+1];if(oneTime)observer.addPath(path.getValueFrom(model));else observer.addPath(model,path)}return new ObserverTransform(observer,tokens.combinator)}function processBindings(node,bindings,model,instanceBindings){for(var i=0;i<bindings.length;i+=2){var name=bindings[i];var tokens=bindings[i+1];var value=processBinding(name,tokens,node,model);var binding=node.bind(name,value,tokens.onlyOneTime);if(binding&&instanceBindings)instanceBindings.push(binding)}node.bindFinished();if(!bindings.isTemplate)return;node.model_=model;var iter=node.processBindingDirectives_(bindings);if(instanceBindings&&iter)instanceBindings.push(iter)}function parseWithDefault(el,name,prepareBindingFn){var v=el.getAttribute(name);return parseMustaches(v==""?"{{}}":v,name,el,prepareBindingFn)}function parseAttributeBindings(element,prepareBindingFn){assert(element);var bindings=[];var ifFound=false;var bindFound=false;for(var i=0;i<element.attributes.length;i++){var attr=element.attributes[i];var name=attr.name;var value=attr.value;while(name[0]==="_"){name=name.substring(1)}if(isTemplate(element)&&(name===IF||name===BIND||name===REPEAT)){continue}var tokens=parseMustaches(value,name,element,prepareBindingFn);if(!tokens)continue;bindings.push(name,tokens)}if(isTemplate(element)){bindings.isTemplate=true;bindings.if=parseWithDefault(element,IF,prepareBindingFn);bindings.bind=parseWithDefault(element,BIND,prepareBindingFn);bindings.repeat=parseWithDefault(element,REPEAT,prepareBindingFn);if(bindings.if&&!bindings.bind&&!bindings.repeat)bindings.bind=parseMustaches("{{}}",BIND,element,prepareBindingFn)}return bindings}function getBindings(node,prepareBindingFn){if(node.nodeType===Node.ELEMENT_NODE)return parseAttributeBindings(node,prepareBindingFn);if(node.nodeType===Node.TEXT_NODE){var tokens=parseMustaches(node.data,"textContent",node,prepareBindingFn);if(tokens)return["textContent",tokens]}return[]}function cloneAndBindInstance(node,parent,stagingDocument,bindings,model,delegate,instanceBindings,instanceRecord){var clone=parent.appendChild(stagingDocument.importNode(node,false));var i=0;for(var child=node.firstChild;child;child=child.nextSibling){cloneAndBindInstance(child,clone,stagingDocument,bindings.children[i++],model,delegate,instanceBindings)}if(bindings.isTemplate){HTMLTemplateElement.decorate(clone,node);if(delegate)clone.setDelegate_(delegate)}processBindings(clone,bindings,model,instanceBindings);return clone}function createInstanceBindingMap(node,prepareBindingFn){var map=getBindings(node,prepareBindingFn);map.children={};var index=0;for(var child=node.firstChild;child;child=child.nextSibling){map.children[index++]=createInstanceBindingMap(child,prepareBindingFn)}return map}var contentUidCounter=1;function getContentUid(content){var id=content.id_;if(!id)id=content.id_=contentUidCounter++;return id}function getInstanceBindingMap(content,delegate_){var contentId=getContentUid(content);if(delegate_){var map=delegate_.bindingMaps[contentId];if(!map){map=delegate_.bindingMaps[contentId]=createInstanceBindingMap(content,delegate_.prepareBinding)||[]}return map}var map=content.bindingMap_;if(!map){map=content.bindingMap_=createInstanceBindingMap(content,undefined)||[]}return map}Object.defineProperty(Node.prototype,"templateInstance",{get:function(){var instance=this.templateInstance_;return instance?instance:this.parentNode?this.parentNode.templateInstance:undefined}});var emptyInstance=document.createDocumentFragment();emptyInstance.bindings_=[];emptyInstance.terminator_=null;function TemplateIterator(templateElement){this.closed=false;this.templateElement_=templateElement;this.instances=[];this.deps=undefined;this.iteratedValue=[];this.presentValue=undefined;this.arrayObserver=undefined}TemplateIterator.prototype={closeDeps:function(){var deps=this.deps;if(deps){if(deps.ifOneTime===false)deps.ifValue.close();if(deps.oneTime===false)deps.value.close()}},updateDependencies:function(directives,model){this.closeDeps();var deps=this.deps={};var template=this.templateElement_;var ifValue=true;if(directives.if){deps.hasIf=true;deps.ifOneTime=directives.if.onlyOneTime;deps.ifValue=processBinding(IF,directives.if,template,model);ifValue=deps.ifValue;if(deps.ifOneTime&&!ifValue){this.valueChanged();return}if(!deps.ifOneTime)ifValue=ifValue.open(this.updateIfValue,this)}if(directives.repeat){deps.repeat=true;deps.oneTime=directives.repeat.onlyOneTime;deps.value=processBinding(REPEAT,directives.repeat,template,model)}else{deps.repeat=false;deps.oneTime=directives.bind.onlyOneTime;deps.value=processBinding(BIND,directives.bind,template,model)}var value=deps.value;if(!deps.oneTime)value=value.open(this.updateIteratedValue,this);if(!ifValue){this.valueChanged();return}this.updateValue(value)},getUpdatedValue:function(){var value=this.deps.value;if(!this.deps.oneTime)value=value.discardChanges();return value},updateIfValue:function(ifValue){if(!ifValue){this.valueChanged();return}this.updateValue(this.getUpdatedValue())},updateIteratedValue:function(value){if(this.deps.hasIf){var ifValue=this.deps.ifValue;if(!this.deps.ifOneTime)ifValue=ifValue.discardChanges();if(!ifValue){this.valueChanged();return}}this.updateValue(value)},updateValue:function(value){if(!this.deps.repeat)value=[value];var observe=this.deps.repeat&&!this.deps.oneTime&&Array.isArray(value);this.valueChanged(value,observe)},valueChanged:function(value,observeValue){if(!Array.isArray(value))value=[];if(value===this.iteratedValue)return;this.unobserve();this.presentValue=value;if(observeValue){this.arrayObserver=new ArrayObserver(this.presentValue);this.arrayObserver.open(this.handleSplices,this)}this.handleSplices(ArrayObserver.calculateSplices(this.presentValue,this.iteratedValue))},getLastInstanceNode:function(index){if(index==-1)return this.templateElement_;var instance=this.instances[index];var terminator=instance.terminator_;if(!terminator)return this.getLastInstanceNode(index-1);if(terminator.nodeType!==Node.ELEMENT_NODE||this.templateElement_===terminator){return terminator}var subtemplateIterator=terminator.iterator_;if(!subtemplateIterator)return terminator;return subtemplateIterator.getLastTemplateNode()},getLastTemplateNode:function(){return this.getLastInstanceNode(this.instances.length-1)},insertInstanceAt:function(index,fragment){var previousInstanceLast=this.getLastInstanceNode(index-1);var parent=this.templateElement_.parentNode;this.instances.splice(index,0,fragment);parent.insertBefore(fragment,previousInstanceLast.nextSibling)},extractInstanceAt:function(index){var previousInstanceLast=this.getLastInstanceNode(index-1);var lastNode=this.getLastInstanceNode(index);var parent=this.templateElement_.parentNode;var instance=this.instances.splice(index,1)[0];while(lastNode!==previousInstanceLast){var node=previousInstanceLast.nextSibling;if(node==lastNode)lastNode=previousInstanceLast;instance.appendChild(parent.removeChild(node))}return instance},getDelegateFn:function(fn){fn=fn&&fn(this.templateElement_);return typeof fn==="function"?fn:null},handleSplices:function(splices){if(this.closed||!splices.length)return;var template=this.templateElement_;if(!template.parentNode){this.close();return}ArrayObserver.applySplices(this.iteratedValue,this.presentValue,splices);var delegate=template.delegate_;if(this.instanceModelFn_===undefined){this.instanceModelFn_=this.getDelegateFn(delegate&&delegate.prepareInstanceModel)}if(this.instancePositionChangedFn_===undefined){this.instancePositionChangedFn_=this.getDelegateFn(delegate&&delegate.prepareInstancePositionChanged)}var instanceCache=new Map;var removeDelta=0;for(var i=0;i<splices.length;i++){var splice=splices[i];var removed=splice.removed;for(var j=0;j<removed.length;j++){var model=removed[j];var instance=this.extractInstanceAt(splice.index+removeDelta);if(instance!==emptyInstance){instanceCache.set(model,instance)}}removeDelta-=splice.addedCount}for(var i=0;i<splices.length;i++){var splice=splices[i];var addIndex=splice.index;for(;addIndex<splice.index+splice.addedCount;addIndex++){var model=this.iteratedValue[addIndex];var instance=instanceCache.get(model);if(instance){instanceCache.delete(model)}else{if(this.instanceModelFn_){model=this.instanceModelFn_(model)}if(model===undefined){instance=emptyInstance}else{instance=template.createInstance(model,undefined,delegate)}}this.insertInstanceAt(addIndex,instance)}}instanceCache.forEach(function(instance){this.closeInstanceBindings(instance)},this);if(this.instancePositionChangedFn_)this.reportInstancesMoved(splices)},reportInstanceMoved:function(index){var instance=this.instances[index];if(instance===emptyInstance)return;this.instancePositionChangedFn_(instance.templateInstance_,index)},reportInstancesMoved:function(splices){var index=0;var offset=0;for(var i=0;i<splices.length;i++){var splice=splices[i];if(offset!=0){while(index<splice.index){this.reportInstanceMoved(index);index++}}else{index=splice.index}while(index<splice.index+splice.addedCount){this.reportInstanceMoved(index);index++}offset+=splice.addedCount-splice.removed.length}if(offset==0)return;var length=this.instances.length;while(index<length){this.reportInstanceMoved(index);index++}},closeInstanceBindings:function(instance){var bindings=instance.bindings_;for(var i=0;i<bindings.length;i++){bindings[i].close()}},unobserve:function(){if(!this.arrayObserver)return;this.arrayObserver.close();this.arrayObserver=undefined},close:function(){if(this.closed)return;this.unobserve();for(var i=0;i<this.instances.length;i++){this.closeInstanceBindings(this.instances[i])}this.instances.length=0;this.closeDeps();this.templateElement_.iterator_=undefined;this.closed=true}};HTMLTemplateElement.forAllTemplatesFrom_=forAllTemplatesFrom})(this);(function(scope){"use strict";var hasWorkingUrl=false;if(!scope.forceJURL){try{var u=new URL("b","http://a");u.pathname="c%20d";hasWorkingUrl=u.href==="http://a/c%20d"}catch(e){}}if(hasWorkingUrl)return;var relative=Object.create(null);relative["ftp"]=21;relative["file"]=0;relative["gopher"]=70;relative["http"]=80;relative["https"]=443;relative["ws"]=80;relative["wss"]=443;var relativePathDotMapping=Object.create(null);relativePathDotMapping["%2e"]=".";relativePathDotMapping[".%2e"]="..";relativePathDotMapping["%2e."]="..";relativePathDotMapping["%2e%2e"]="..";function isRelativeScheme(scheme){return relative[scheme]!==undefined}function invalid(){clear.call(this);this._isInvalid=true}function IDNAToASCII(h){if(""==h){invalid.call(this)}return h.toLowerCase()}function percentEscape(c){var unicode=c.charCodeAt(0);if(unicode>32&&unicode<127&&[34,35,60,62,63,96].indexOf(unicode)==-1){return c}return encodeURIComponent(c)}function percentEscapeQuery(c){var unicode=c.charCodeAt(0);if(unicode>32&&unicode<127&&[34,35,60,62,96].indexOf(unicode)==-1){return c}return encodeURIComponent(c)}var EOF=undefined,ALPHA=/[a-zA-Z]/,ALPHANUMERIC=/[a-zA-Z0-9\+\-\.]/;function parse(input,stateOverride,base){function err(message){errors.push(message)}var state=stateOverride||"scheme start",cursor=0,buffer="",seenAt=false,seenBracket=false,errors=[];loop:while((input[cursor-1]!=EOF||cursor==0)&&!this._isInvalid){var c=input[cursor];switch(state){case"scheme start":if(c&&ALPHA.test(c)){buffer+=c.toLowerCase();state="scheme"}else if(!stateOverride){buffer="";state="no scheme";continue}else{err("Invalid scheme.");break loop}break;case"scheme":if(c&&ALPHANUMERIC.test(c)){buffer+=c.toLowerCase()}else if(":"==c){this._scheme=buffer;buffer="";if(stateOverride){break loop}if(isRelativeScheme(this._scheme)){this._isRelative=true}if("file"==this._scheme){state="relative"}else if(this._isRelative&&base&&base._scheme==this._scheme){state="relative or authority"}else if(this._isRelative){state="authority first slash"}else{state="scheme data"}}else if(!stateOverride){buffer="";cursor=0;state="no scheme";continue}else if(EOF==c){break loop}else{err("Code point not allowed in scheme: "+c);break loop}break;case"scheme data":if("?"==c){query="?";state="query"}else if("#"==c){this._fragment="#";state="fragment"}else{if(EOF!=c&&"	"!=c&&"\n"!=c&&"\r"!=c){this._schemeData+=percentEscape(c)}}break;case"no scheme":if(!base||!isRelativeScheme(base._scheme)){err("Missing scheme.");invalid.call(this)}else{state="relative";continue}break;case"relative or authority":if("/"==c&&"/"==input[cursor+1]){state="authority ignore slashes"}else{err("Expected /, got: "+c);state="relative";continue}break;case"relative":this._isRelative=true;if("file"!=this._scheme)this._scheme=base._scheme;if(EOF==c){this._host=base._host;this._port=base._port;this._path=base._path.slice();this._query=base._query;break loop}else if("/"==c||"\\"==c){if("\\"==c)err("\\ is an invalid code point.");state="relative slash"}else if("?"==c){this._host=base._host;this._port=base._port;this._path=base._path.slice();this._query="?";state="query"}else if("#"==c){this._host=base._host;this._port=base._port;this._path=base._path.slice();this._query=base._query;this._fragment="#";state="fragment"}else{var nextC=input[cursor+1];var nextNextC=input[cursor+2];if("file"!=this._scheme||!ALPHA.test(c)||nextC!=":"&&nextC!="|"||EOF!=nextNextC&&"/"!=nextNextC&&"\\"!=nextNextC&&"?"!=nextNextC&&"#"!=nextNextC){this._host=base._host;this._port=base._port;this._path=base._path.slice();this._path.pop()}state="relative path";continue}break;case"relative slash":if("/"==c||"\\"==c){if("\\"==c){err("\\ is an invalid code point.")}if("file"==this._scheme){state="file host"}else{state="authority ignore slashes"}}else{if("file"!=this._scheme){this._host=base._host;this._port=base._port}state="relative path";continue}break;case"authority first slash":if("/"==c){state="authority second slash"}else{err("Expected '/', got: "+c);state="authority ignore slashes";continue}break;case"authority second slash":state="authority ignore slashes";if("/"!=c){err("Expected '/', got: "+c);continue}break;case"authority ignore slashes":if("/"!=c&&"\\"!=c){state="authority";continue}else{err("Expected authority, got: "+c)}break;case"authority":if("@"==c){if(seenAt){err("@ already seen.");buffer+="%40"}seenAt=true;for(var i=0;i<buffer.length;i++){var cp=buffer[i];if("	"==cp||"\n"==cp||"\r"==cp){err("Invalid whitespace in authority.");continue}if(":"==cp&&null===this._password){this._password="";continue}var tempC=percentEscape(cp);null!==this._password?this._password+=tempC:this._username+=tempC}buffer=""}else if(EOF==c||"/"==c||"\\"==c||"?"==c||"#"==c){cursor-=buffer.length;buffer="";state="host";continue}else{buffer+=c}break;case"file host":if(EOF==c||"/"==c||"\\"==c||"?"==c||"#"==c){if(buffer.length==2&&ALPHA.test(buffer[0])&&(buffer[1]==":"||buffer[1]=="|")){state="relative path"}else if(buffer.length==0){state="relative path start"}else{this._host=IDNAToASCII.call(this,buffer);buffer="";state="relative path start"}continue}else if("	"==c||"\n"==c||"\r"==c){err("Invalid whitespace in file host.")}else{buffer+=c}break;case"host":case"hostname":if(":"==c&&!seenBracket){this._host=IDNAToASCII.call(this,buffer);buffer="";state="port";if("hostname"==stateOverride){break loop}}else if(EOF==c||"/"==c||"\\"==c||"?"==c||"#"==c){this._host=IDNAToASCII.call(this,buffer);buffer="";state="relative path start";if(stateOverride){break loop}continue}else if("	"!=c&&"\n"!=c&&"\r"!=c){if("["==c){seenBracket=true}else if("]"==c){seenBracket=false}buffer+=c}else{err("Invalid code point in host/hostname: "+c)}break;case"port":if(/[0-9]/.test(c)){buffer+=c}else if(EOF==c||"/"==c||"\\"==c||"?"==c||"#"==c||stateOverride){if(""!=buffer){var temp=parseInt(buffer,10);if(temp!=relative[this._scheme]){this._port=temp+""}buffer=""}if(stateOverride){break loop}state="relative path start";continue}else if("	"==c||"\n"==c||"\r"==c){err("Invalid code point in port: "+c)}else{invalid.call(this)}break;case"relative path start":if("\\"==c)err("'\\' not allowed in path.");state="relative path";if("/"!=c&&"\\"!=c){continue}break;case"relative path":if(EOF==c||"/"==c||"\\"==c||!stateOverride&&("?"==c||"#"==c)){if("\\"==c){err("\\ not allowed in relative path.")}var tmp;if(tmp=relativePathDotMapping[buffer.toLowerCase()]){buffer=tmp}if(".."==buffer){this._path.pop();if("/"!=c&&"\\"!=c){this._path.push("")}}else if("."==buffer&&"/"!=c&&"\\"!=c){this._path.push("")}else if("."!=buffer){if("file"==this._scheme&&this._path.length==0&&buffer.length==2&&ALPHA.test(buffer[0])&&buffer[1]=="|"){buffer=buffer[0]+":"}this._path.push(buffer)}buffer="";if("?"==c){this._query="?";state="query"}else if("#"==c){this._fragment="#";state="fragment"}}else if("	"!=c&&"\n"!=c&&"\r"!=c){buffer+=percentEscape(c)}break;case"query":if(!stateOverride&&"#"==c){this._fragment="#";state="fragment"}else if(EOF!=c&&"	"!=c&&"\n"!=c&&"\r"!=c){this._query+=percentEscapeQuery(c)}break;case"fragment":if(EOF!=c&&"	"!=c&&"\n"!=c&&"\r"!=c){this._fragment+=c}break}cursor++}}function clear(){this._scheme="";this._schemeData="";this._username="";this._password=null;this._host="";this._port="";this._path=[];this._query="";this._fragment="";this._isInvalid=false;this._isRelative=false}function jURL(url,base){if(base!==undefined&&!(base instanceof jURL))base=new jURL(String(base));this._url=url;clear.call(this);var input=url.replace(/^[ \t\r\n\f]+|[ \t\r\n\f]+$/g,"");parse.call(this,input,null,base)}jURL.prototype={get href(){if(this._isInvalid)return this._url;var authority="";if(""!=this._username||null!=this._password){authority=this._username+(null!=this._password?":"+this._password:"")+"@"}return this.protocol+(this._isRelative?"//"+authority+this.host:"")+this.pathname+this._query+this._fragment},set href(href){clear.call(this);parse.call(this,href)},get protocol(){return this._scheme+":"},set protocol(protocol){if(this._isInvalid)return;
parse.call(this,protocol+":","scheme start")},get host(){return this._isInvalid?"":this._port?this._host+":"+this._port:this._host},set host(host){if(this._isInvalid||!this._isRelative)return;parse.call(this,host,"host")},get hostname(){return this._host},set hostname(hostname){if(this._isInvalid||!this._isRelative)return;parse.call(this,hostname,"hostname")},get port(){return this._port},set port(port){if(this._isInvalid||!this._isRelative)return;parse.call(this,port,"port")},get pathname(){return this._isInvalid?"":this._isRelative?"/"+this._path.join("/"):this._schemeData},set pathname(pathname){if(this._isInvalid||!this._isRelative)return;this._path=[];parse.call(this,pathname,"relative path start")},get search(){return this._isInvalid||!this._query||"?"==this._query?"":this._query},set search(search){if(this._isInvalid||!this._isRelative)return;this._query="?";if("?"==search[0])search=search.slice(1);parse.call(this,search,"query")},get hash(){return this._isInvalid||!this._fragment||"#"==this._fragment?"":this._fragment},set hash(hash){if(this._isInvalid)return;this._fragment="#";if("#"==hash[0])hash=hash.slice(1);parse.call(this,hash,"fragment")},get origin(){var host;if(this._isInvalid||!this._scheme){return""}switch(this._scheme){case"data":case"file":case"javascript":case"mailto":return"null"}host=this.host;if(!host){return""}return this._scheme+"://"+host}};var OriginalURL=scope.URL;if(OriginalURL){jURL.createObjectURL=function(blob){return OriginalURL.createObjectURL.apply(OriginalURL,arguments)};jURL.revokeObjectURL=function(url){OriginalURL.revokeObjectURL(url)}}scope.URL=jURL})(this);(function(scope){var iterations=0;var callbacks=[];var twiddle=document.createTextNode("");function endOfMicrotask(callback){twiddle.textContent=iterations++;callbacks.push(callback)}function atEndOfMicrotask(){while(callbacks.length){callbacks.shift()()}}new(window.MutationObserver||JsMutationObserver)(atEndOfMicrotask).observe(twiddle,{characterData:true});scope.endOfMicrotask=endOfMicrotask;Platform.endOfMicrotask=endOfMicrotask})(Polymer);(function(scope){var endOfMicrotask=scope.endOfMicrotask;var log=window.WebComponents?WebComponents.flags.log:{};var style=document.createElement("style");style.textContent="template {display: none !important;} /* injected by platform.js */";var head=document.querySelector("head");head.insertBefore(style,head.firstChild);var flushing;function flush(){if(!flushing){flushing=true;endOfMicrotask(function(){flushing=false;log.data&&console.group("flush");Platform.performMicrotaskCheckpoint();log.data&&console.groupEnd()})}}if(!Observer.hasObjectObserve){var FLUSH_POLL_INTERVAL=125;window.addEventListener("WebComponentsReady",function(){flush();var visibilityHandler=function(){if(document.visibilityState==="hidden"){if(scope.flushPoll){clearInterval(scope.flushPoll)}}else{scope.flushPoll=setInterval(flush,FLUSH_POLL_INTERVAL)}};if(typeof document.visibilityState==="string"){document.addEventListener("visibilitychange",visibilityHandler)}visibilityHandler()})}else{flush=function(){}}if(window.CustomElements&&!CustomElements.useNative){var originalImportNode=Document.prototype.importNode;Document.prototype.importNode=function(node,deep){var imported=originalImportNode.call(this,node,deep);CustomElements.upgradeAll(imported);return imported}}scope.flush=flush;Platform.flush=flush})(window.Polymer);(function(scope){var urlResolver={resolveDom:function(root,url){url=url||baseUrl(root);this.resolveAttributes(root,url);this.resolveStyles(root,url);var templates=root.querySelectorAll("template");if(templates){for(var i=0,l=templates.length,t;i<l&&(t=templates[i]);i++){if(t.content){this.resolveDom(t.content,url)}}}},resolveTemplate:function(template){this.resolveDom(template.content,baseUrl(template))},resolveStyles:function(root,url){var styles=root.querySelectorAll("style");if(styles){for(var i=0,l=styles.length,s;i<l&&(s=styles[i]);i++){this.resolveStyle(s,url)}}},resolveStyle:function(style,url){url=url||baseUrl(style);style.textContent=this.resolveCssText(style.textContent,url)},resolveCssText:function(cssText,baseUrl,keepAbsolute){cssText=replaceUrlsInCssText(cssText,baseUrl,keepAbsolute,CSS_URL_REGEXP);return replaceUrlsInCssText(cssText,baseUrl,keepAbsolute,CSS_IMPORT_REGEXP)},resolveAttributes:function(root,url){if(root.hasAttributes&&root.hasAttributes()){this.resolveElementAttributes(root,url)}var nodes=root&&root.querySelectorAll(URL_ATTRS_SELECTOR);if(nodes){for(var i=0,l=nodes.length,n;i<l&&(n=nodes[i]);i++){this.resolveElementAttributes(n,url)}}},resolveElementAttributes:function(node,url){url=url||baseUrl(node);URL_ATTRS.forEach(function(v){var attr=node.attributes[v];var value=attr&&attr.value;var replacement;if(value&&value.search(URL_TEMPLATE_SEARCH)<0){if(v==="style"){replacement=replaceUrlsInCssText(value,url,false,CSS_URL_REGEXP)}else{replacement=resolveRelativeUrl(url,value)}attr.value=replacement}})}};var CSS_URL_REGEXP=/(url\()([^)]*)(\))/g;var CSS_IMPORT_REGEXP=/(@import[\s]+(?!url\())([^;]*)(;)/g;var URL_ATTRS=["href","src","action","style","url"];var URL_ATTRS_SELECTOR="["+URL_ATTRS.join("],[")+"]";var URL_TEMPLATE_SEARCH="{{.*}}";var URL_HASH="#";function baseUrl(node){var u=new URL(node.ownerDocument.baseURI);u.search="";u.hash="";return u}function replaceUrlsInCssText(cssText,baseUrl,keepAbsolute,regexp){return cssText.replace(regexp,function(m,pre,url,post){var urlPath=url.replace(/["']/g,"");urlPath=resolveRelativeUrl(baseUrl,urlPath,keepAbsolute);return pre+"'"+urlPath+"'"+post})}function resolveRelativeUrl(baseUrl,url,keepAbsolute){if(url&&url[0]==="/"){return url}if(url&&url[0]==="#"){return url}var u=new URL(url,baseUrl);return keepAbsolute?u.href:makeDocumentRelPath(u.href)}function makeDocumentRelPath(url){var root=baseUrl(document.documentElement);var u=new URL(url,root);if(u.host===root.host&&u.port===root.port&&u.protocol===root.protocol){return makeRelPath(root,u)}else{return url}}function makeRelPath(sourceUrl,targetUrl){var source=sourceUrl.pathname;var target=targetUrl.pathname;var s=source.split("/");var t=target.split("/");while(s.length&&s[0]===t[0]){s.shift();t.shift()}for(var i=0,l=s.length-1;i<l;i++){t.unshift("..")}var hash=targetUrl.href.slice(-1)===URL_HASH?URL_HASH:targetUrl.hash;return t.join("/")+targetUrl.search+hash}scope.urlResolver=urlResolver})(Polymer);(function(scope){var endOfMicrotask=Polymer.endOfMicrotask;function Loader(regex){this.cache=Object.create(null);this.map=Object.create(null);this.requests=0;this.regex=regex}Loader.prototype={extractUrls:function(text,base){var matches=[];var matched,u;while(matched=this.regex.exec(text)){u=new URL(matched[1],base);matches.push({matched:matched[0],url:u.href})}return matches},process:function(text,root,callback){var matches=this.extractUrls(text,root);var done=callback.bind(null,this.map);this.fetch(matches,done)},fetch:function(matches,callback){var inflight=matches.length;if(!inflight){return callback()}var done=function(){if(--inflight===0){callback()}};var m,req,url;for(var i=0;i<inflight;i++){m=matches[i];url=m.url;req=this.cache[url];if(!req){req=this.xhr(url);req.match=m;this.cache[url]=req}req.wait(done)}},handleXhr:function(request){var match=request.match;var url=match.url;var response=request.response||request.responseText||"";this.map[url]=response;this.fetch(this.extractUrls(response,url),request.resolve)},xhr:function(url){this.requests++;var request=new XMLHttpRequest;request.open("GET",url,true);request.send();request.onerror=request.onload=this.handleXhr.bind(this,request);request.pending=[];request.resolve=function(){var pending=request.pending;for(var i=0;i<pending.length;i++){pending[i]()}request.pending=null};request.wait=function(fn){if(request.pending){request.pending.push(fn)}else{endOfMicrotask(fn)}};return request}};scope.Loader=Loader})(Polymer);(function(scope){var urlResolver=scope.urlResolver;var Loader=scope.Loader;function StyleResolver(){this.loader=new Loader(this.regex)}StyleResolver.prototype={regex:/@import\s+(?:url)?["'\(]*([^'"\)]*)['"\)]*;/g,resolve:function(text,url,callback){var done=function(map){callback(this.flatten(text,url,map))}.bind(this);this.loader.process(text,url,done)},resolveNode:function(style,url,callback){var text=style.textContent;var done=function(text){style.textContent=text;callback(style)};this.resolve(text,url,done)},flatten:function(text,base,map){var matches=this.loader.extractUrls(text,base);var match,url,intermediate;for(var i=0;i<matches.length;i++){match=matches[i];url=match.url;intermediate=urlResolver.resolveCssText(map[url],url,true);intermediate=this.flatten(intermediate,base,map);text=text.replace(match.matched,intermediate)}return text},loadStyles:function(styles,base,callback){var loaded=0,l=styles.length;function loadedStyle(style){loaded++;if(loaded===l&&callback){callback()}}for(var i=0,s;i<l&&(s=styles[i]);i++){this.resolveNode(s,base,loadedStyle)}}};var styleResolver=new StyleResolver;scope.styleResolver=styleResolver})(Polymer);(function(scope){function extend(prototype,api){if(prototype&&api){Object.getOwnPropertyNames(api).forEach(function(n){var pd=Object.getOwnPropertyDescriptor(api,n);if(pd){Object.defineProperty(prototype,n,pd);if(typeof pd.value=="function"){pd.value.nom=n}}})}return prototype}function mixin(inObj){var obj=inObj||{};for(var i=1;i<arguments.length;i++){var p=arguments[i];try{for(var n in p){copyProperty(n,p,obj)}}catch(x){}}return obj}function copyProperty(inName,inSource,inTarget){var pd=getPropertyDescriptor(inSource,inName);Object.defineProperty(inTarget,inName,pd)}function getPropertyDescriptor(inObject,inName){if(inObject){var pd=Object.getOwnPropertyDescriptor(inObject,inName);return pd||getPropertyDescriptor(Object.getPrototypeOf(inObject),inName)}}scope.extend=extend;scope.mixin=mixin;Platform.mixin=mixin})(Polymer);(function(scope){var Job=function(inContext){this.context=inContext;this.boundComplete=this.complete.bind(this)};Job.prototype={go:function(callback,wait){this.callback=callback;var h;if(!wait){h=requestAnimationFrame(this.boundComplete);this.handle=function(){cancelAnimationFrame(h)}}else{h=setTimeout(this.boundComplete,wait);this.handle=function(){clearTimeout(h)}}},stop:function(){if(this.handle){this.handle();this.handle=null}},complete:function(){if(this.handle){this.stop();this.callback.call(this.context)}}};function job(job,callback,wait){if(job){job.stop()}else{job=new Job(this)}job.go(callback,wait);return job}scope.job=job})(Polymer);(function(scope){var registry={};HTMLElement.register=function(tag,prototype){registry[tag]=prototype};HTMLElement.getPrototypeForTag=function(tag){var prototype=!tag?HTMLElement.prototype:registry[tag];return prototype||Object.getPrototypeOf(document.createElement(tag))};var originalStopPropagation=Event.prototype.stopPropagation;Event.prototype.stopPropagation=function(){this.cancelBubble=true;originalStopPropagation.apply(this,arguments)};var add=DOMTokenList.prototype.add;var remove=DOMTokenList.prototype.remove;DOMTokenList.prototype.add=function(){for(var i=0;i<arguments.length;i++){add.call(this,arguments[i])}};DOMTokenList.prototype.remove=function(){for(var i=0;i<arguments.length;i++){remove.call(this,arguments[i])}};DOMTokenList.prototype.toggle=function(name,bool){if(arguments.length==1){bool=!this.contains(name)}bool?this.add(name):this.remove(name)};DOMTokenList.prototype.switch=function(oldName,newName){oldName&&this.remove(oldName);newName&&this.add(newName)};var ArraySlice=function(){return Array.prototype.slice.call(this)};var namedNodeMap=window.NamedNodeMap||window.MozNamedAttrMap||{};NodeList.prototype.array=ArraySlice;namedNodeMap.prototype.array=ArraySlice;HTMLCollection.prototype.array=ArraySlice;function createDOM(inTagOrNode,inHTML,inAttrs){var dom=typeof inTagOrNode=="string"?document.createElement(inTagOrNode):inTagOrNode.cloneNode(true);dom.innerHTML=inHTML;if(inAttrs){for(var n in inAttrs){dom.setAttribute(n,inAttrs[n])}}return dom}scope.createDOM=createDOM})(Polymer);(function(scope){function $super(arrayOfArgs){var caller=$super.caller;var nom=caller.nom;var _super=caller._super;if(!_super){if(!nom){nom=caller.nom=nameInThis.call(this,caller)}if(!nom){console.warn("called super() on a method not installed declaratively (has no .nom property)")}_super=memoizeSuper(caller,nom,getPrototypeOf(this))}var fn=_super[nom];if(fn){if(!fn._super){memoizeSuper(fn,nom,_super)}return fn.apply(this,arrayOfArgs||[])}}function nameInThis(value){var p=this.__proto__;while(p&&p!==HTMLElement.prototype){var n$=Object.getOwnPropertyNames(p);for(var i=0,l=n$.length,n;i<l&&(n=n$[i]);i++){var d=Object.getOwnPropertyDescriptor(p,n);if(typeof d.value==="function"&&d.value===value){return n}}p=p.__proto__}}function memoizeSuper(method,name,proto){var s=nextSuper(proto,name,method);if(s[name]){s[name].nom=name}return method._super=s}function nextSuper(proto,name,caller){while(proto){if(proto[name]!==caller&&proto[name]){return proto}proto=getPrototypeOf(proto)}return Object}function getPrototypeOf(prototype){return prototype.__proto__}function hintSuper(prototype){for(var n in prototype){var pd=Object.getOwnPropertyDescriptor(prototype,n);if(pd&&typeof pd.value==="function"){pd.value.nom=n}}}scope.super=$super})(Polymer);(function(scope){function noopHandler(value){return value}var typeHandlers={string:noopHandler,undefined:noopHandler,date:function(value){return new Date(Date.parse(value)||Date.now())},"boolean":function(value){if(value===""){return true}return value==="false"?false:!!value},number:function(value){var n=parseFloat(value);if(n===0){n=parseInt(value)}return isNaN(n)?value:n},object:function(value,currentValue){if(currentValue===null){return value}try{return JSON.parse(value.replace(/'/g,'"'))}catch(e){return value}},"function":function(value,currentValue){return currentValue}};function deserializeValue(value,currentValue){var inferredType=typeof currentValue;if(currentValue instanceof Date){inferredType="date"}return typeHandlers[inferredType](value,currentValue)}scope.deserializeValue=deserializeValue})(Polymer);(function(scope){var extend=scope.extend;var api={};api.declaration={};api.instance={};api.publish=function(apis,prototype){for(var n in apis){extend(prototype,apis[n])}};scope.api=api})(Polymer);(function(scope){var utils={async:function(method,args,timeout){Polymer.flush();args=args&&args.length?args:[args];var fn=function(){(this[method]||method).apply(this,args)}.bind(this);var handle=timeout?setTimeout(fn,timeout):requestAnimationFrame(fn);return timeout?handle:~handle},cancelAsync:function(handle){if(handle<0){cancelAnimationFrame(~handle)}else{clearTimeout(handle)}},fire:function(type,detail,onNode,bubbles,cancelable){var node=onNode||this;var detail=detail===null||detail===undefined?{}:detail;var event=new CustomEvent(type,{bubbles:bubbles!==undefined?bubbles:true,cancelable:cancelable!==undefined?cancelable:true,detail:detail});node.dispatchEvent(event);return event},asyncFire:function(){this.async("fire",arguments)},classFollows:function(anew,old,className){if(old){old.classList.remove(className)}if(anew){anew.classList.add(className)}},injectBoundHTML:function(html,element){var template=document.createElement("template");template.innerHTML=html;var fragment=this.instanceTemplate(template);if(element){element.textContent="";element.appendChild(fragment)}return fragment}};var nop=function(){};var nob={};utils.asyncMethod=utils.async;scope.api.instance.utils=utils;scope.nop=nop;scope.nob=nob})(Polymer);(function(scope){var log=window.WebComponents?WebComponents.flags.log:{};var EVENT_PREFIX="on-";var events={EVENT_PREFIX:EVENT_PREFIX,addHostListeners:function(){var events=this.eventDelegates;log.events&&Object.keys(events).length>0&&console.log("[%s] addHostListeners:",this.localName,events);for(var type in events){var methodName=events[type];PolymerGestures.addEventListener(this,type,this.element.getEventHandler(this,this,methodName))}},dispatchMethod:function(obj,method,args){if(obj){log.events&&console.group("[%s] dispatch [%s]",obj.localName,method);var fn=typeof method==="function"?method:obj[method];if(fn){fn[args?"apply":"call"](obj,args)}log.events&&console.groupEnd();Polymer.flush()}}};scope.api.instance.events=events;scope.addEventListener=function(node,eventType,handlerFn,capture){PolymerGestures.addEventListener(wrap(node),eventType,handlerFn,capture)};scope.removeEventListener=function(node,eventType,handlerFn,capture){PolymerGestures.removeEventListener(wrap(node),eventType,handlerFn,capture)}})(Polymer);(function(scope){var attributes={copyInstanceAttributes:function(){var a$=this._instanceAttributes;for(var k in a$){if(!this.hasAttribute(k)){this.setAttribute(k,a$[k])}}},takeAttributes:function(){if(this._publishLC){for(var i=0,a$=this.attributes,l=a$.length,a;(a=a$[i])&&i<l;i++){this.attributeToProperty(a.name,a.value)}}},attributeToProperty:function(name,value){var name=this.propertyForAttribute(name);if(name){if(value&&value.search(scope.bindPattern)>=0){return}var currentValue=this[name];var value=this.deserializeValue(value,currentValue);if(value!==currentValue){this[name]=value}}},propertyForAttribute:function(name){var match=this._publishLC&&this._publishLC[name];return match},deserializeValue:function(stringValue,currentValue){return scope.deserializeValue(stringValue,currentValue)},serializeValue:function(value,inferredType){if(inferredType==="boolean"){return value?"":undefined}else if(inferredType!=="object"&&inferredType!=="function"&&value!==undefined){return value}},reflectPropertyToAttribute:function(name){var inferredType=typeof this[name];var serializedValue=this.serializeValue(this[name],inferredType);if(serializedValue!==undefined){this.setAttribute(name,serializedValue)}else if(inferredType==="boolean"){this.removeAttribute(name)}}};scope.api.instance.attributes=attributes})(Polymer);(function(scope){var log=window.WebComponents?WebComponents.flags.log:{};var OBSERVE_SUFFIX="Changed";var empty=[];var updateRecord={object:undefined,type:"update",name:undefined,oldValue:undefined};var numberIsNaN=Number.isNaN||function(value){return typeof value==="number"&&isNaN(value)};function areSameValue(left,right){if(left===right)return left!==0||1/left===1/right;if(numberIsNaN(left)&&numberIsNaN(right))return true;return left!==left&&right!==right}function resolveBindingValue(oldValue,value){if(value===undefined&&oldValue===null){return value}return value===null||value===undefined?oldValue:value}var properties={createPropertyObserver:function(){var n$=this._observeNames;if(n$&&n$.length){var o=this._propertyObserver=new CompoundObserver(true);this.registerObserver(o);for(var i=0,l=n$.length,n;i<l&&(n=n$[i]);i++){o.addPath(this,n);this.observeArrayValue(n,this[n],null)}}},openPropertyObserver:function(){if(this._propertyObserver){this._propertyObserver.open(this.notifyPropertyChanges,this)}},notifyPropertyChanges:function(newValues,oldValues,paths){var name,method,called={};for(var i in oldValues){name=paths[2*i+1];method=this.observe[name];if(method){var ov=oldValues[i],nv=newValues[i];this.observeArrayValue(name,nv,ov);if(!called[method]){if(ov!==undefined&&ov!==null||nv!==undefined&&nv!==null){called[method]=true;this.invokeMethod(method,[ov,nv,arguments])}}}}},invokeMethod:function(method,args){var fn=this[method]||method;if(typeof fn==="function"){fn.apply(this,args)}},deliverChanges:function(){if(this._propertyObserver){this._propertyObserver.deliver()}},observeArrayValue:function(name,value,old){var callbackName=this.observe[name];if(callbackName){if(Array.isArray(old)){log.observe&&console.log("[%s] observeArrayValue: unregister observer [%s]",this.localName,name);this.closeNamedObserver(name+"__array")}if(Array.isArray(value)){log.observe&&console.log("[%s] observeArrayValue: register observer [%s]",this.localName,name,value);var observer=new ArrayObserver(value);observer.open(function(splices){this.invokeMethod(callbackName,[splices])},this);this.registerNamedObserver(name+"__array",observer)}}},emitPropertyChangeRecord:function(name,value,oldValue){var object=this;if(areSameValue(value,oldValue)){return}this._propertyChanged(name,value,oldValue);if(!Observer.hasObjectObserve){return}var notifier=this._objectNotifier;if(!notifier){notifier=this._objectNotifier=Object.getNotifier(this)}updateRecord.object=this;updateRecord.name=name;updateRecord.oldValue=oldValue;notifier.notify(updateRecord)},_propertyChanged:function(name,value,oldValue){if(this.reflect[name]){this.reflectPropertyToAttribute(name)}},bindProperty:function(property,observable,oneTime){if(oneTime){this[property]=observable;return}var computed=this.element.prototype.computed;if(computed&&computed[property]){var privateComputedBoundValue=property+"ComputedBoundObservable_";this[privateComputedBoundValue]=observable;return}return this.bindToAccessor(property,observable,resolveBindingValue)},bindToAccessor:function(name,observable,resolveFn){var privateName=name+"_";var privateObservable=name+"Observable_";var privateComputedBoundValue=name+"ComputedBoundObservable_";this[privateObservable]=observable;var oldValue=this[privateName];var self=this;function updateValue(value,oldValue){self[privateName]=value;var setObserveable=self[privateComputedBoundValue];if(setObserveable&&typeof setObserveable.setValue=="function"){setObserveable.setValue(value)}self.emitPropertyChangeRecord(name,value,oldValue)}var value=observable.open(updateValue);if(resolveFn&&!areSameValue(oldValue,value)){var resolvedValue=resolveFn(oldValue,value);if(!areSameValue(value,resolvedValue)){value=resolvedValue;if(observable.setValue){observable.setValue(value)}}}updateValue(value,oldValue);var observer={close:function(){observable.close();self[privateObservable]=undefined;self[privateComputedBoundValue]=undefined}};this.registerObserver(observer);return observer},createComputedProperties:function(){if(!this._computedNames){return}for(var i=0;i<this._computedNames.length;i++){var name=this._computedNames[i];var expressionText=this.computed[name];try{var expression=PolymerExpressions.getExpression(expressionText);var observable=expression.getBinding(this,this.element.syntax);this.bindToAccessor(name,observable)}catch(ex){console.error("Failed to create computed property",ex)}}},registerObserver:function(observer){if(!this._observers){this._observers=[observer];return}this._observers.push(observer)},closeObservers:function(){if(!this._observers){return}var observers=this._observers;for(var i=0;i<observers.length;i++){var observer=observers[i];if(observer&&typeof observer.close=="function"){observer.close()}}this._observers=[]},registerNamedObserver:function(name,observer){var o$=this._namedObservers||(this._namedObservers={});o$[name]=observer},closeNamedObserver:function(name){var o$=this._namedObservers;if(o$&&o$[name]){o$[name].close();o$[name]=null;return true}},closeNamedObservers:function(){if(this._namedObservers){for(var i in this._namedObservers){this.closeNamedObserver(i)}this._namedObservers={}}}};var LOG_OBSERVE="[%s] watching [%s]";var LOG_OBSERVED="[%s#%s] watch: [%s] now [%s] was [%s]";var LOG_CHANGED="[%s#%s] propertyChanged: [%s] now [%s] was [%s]";scope.api.instance.properties=properties})(Polymer);(function(scope){var log=window.WebComponents?WebComponents.flags.log:{};var mdv={instanceTemplate:function(template){HTMLTemplateElement.decorate(template);var syntax=this.syntax||!template.bindingDelegate&&this.element.syntax;var dom=template.createInstance(this,syntax);var observers=dom.bindings_;for(var i=0;i<observers.length;i++){this.registerObserver(observers[i])}return dom},bind:function(name,observable,oneTime){var property=this.propertyForAttribute(name);if(!property){return this.mixinSuper(arguments)}else{var observer=this.bindProperty(property,observable,oneTime);if(Platform.enableBindingsReflection&&observer){observer.path=observable.path_;this._recordBinding(property,observer)}if(this.reflect[property]){this.reflectPropertyToAttribute(property)}return observer}},_recordBinding:function(name,observer){this.bindings_=this.bindings_||{};this.bindings_[name]=observer},bindFinished:function(){this.makeElementReady()},asyncUnbindAll:function(){if(!this._unbound){log.unbind&&console.log("[%s] asyncUnbindAll",this.localName);this._unbindAllJob=this.job(this._unbindAllJob,this.unbindAll,0)}},unbindAll:function(){if(!this._unbound){this.closeObservers();this.closeNamedObservers();this._unbound=true}},cancelUnbindAll:function(){if(this._unbound){log.unbind&&console.warn("[%s] already unbound, cannot cancel unbindAll",this.localName);return}log.unbind&&console.log("[%s] cancelUnbindAll",this.localName);if(this._unbindAllJob){this._unbindAllJob=this._unbindAllJob.stop()}}};function unbindNodeTree(node){forNodeTree(node,_nodeUnbindAll)}function _nodeUnbindAll(node){node.unbindAll()}function forNodeTree(node,callback){if(node){callback(node);for(var child=node.firstChild;child;child=child.nextSibling){forNodeTree(child,callback)}}}var mustachePattern=/\{\{([^{}]*)}}/;scope.bindPattern=mustachePattern;scope.api.instance.mdv=mdv})(Polymer);(function(scope){var base={PolymerBase:true,job:function(job,callback,wait){if(typeof job==="string"){var n="___"+job;this[n]=Polymer.job.call(this,this[n],callback,wait)}else{return Polymer.job.call(this,job,callback,wait)}},"super":Polymer.super,created:function(){},ready:function(){},createdCallback:function(){if(this.templateInstance&&this.templateInstance.model){console.warn("Attributes on "+this.localName+" were data bound "+"prior to Polymer upgrading the element. This may result in "+"incorrect binding types.")}this.created();this.prepareElement();if(!this.ownerDocument.isStagingDocument){this.makeElementReady()}},prepareElement:function(){if(this._elementPrepared){console.warn("Element already prepared",this.localName);return}this._elementPrepared=true;this.shadowRoots={};this.createPropertyObserver();this.openPropertyObserver();this.copyInstanceAttributes();this.takeAttributes();this.addHostListeners()},makeElementReady:function(){if(this._readied){return}this._readied=true;this.createComputedProperties();this.parseDeclarations(this.__proto__);this.removeAttribute("unresolved");this.ready()},attributeChangedCallback:function(name,oldValue){if(name!=="class"&&name!=="style"){this.attributeToProperty(name,this.getAttribute(name))}if(this.attributeChanged){this.attributeChanged.apply(this,arguments)}},attachedCallback:function(){this.cancelUnbindAll();if(this.attached){this.attached()}if(!this.hasBeenAttached){this.hasBeenAttached=true;if(this.domReady){this.async("domReady")}}},detachedCallback:function(){if(!this.preventDispose){this.asyncUnbindAll()}if(this.detached){this.detached()}if(this.leftView){this.leftView()}},parseDeclarations:function(p){if(p&&p.element){this.parseDeclarations(p.__proto__);p.parseDeclaration.call(this,p.element)}},parseDeclaration:function(elementElement){var template=this.fetchTemplate(elementElement);if(template){var root=this.shadowFromTemplate(template);this.shadowRoots[elementElement.name]=root}},fetchTemplate:function(elementElement){return elementElement.querySelector("template")},shadowFromTemplate:function(template){if(template){var root=this.createShadowRoot();var dom=this.instanceTemplate(template);root.appendChild(dom);this.shadowRootReady(root,template);return root}},lightFromTemplate:function(template,refNode){if(template){this.eventController=this;var dom=this.instanceTemplate(template);if(refNode){this.insertBefore(dom,refNode)}else{this.appendChild(dom)}this.shadowRootReady(this);return dom}},shadowRootReady:function(root){this.marshalNodeReferences(root)},marshalNodeReferences:function(root){var $=this.$=this.$||{};if(root){var n$=root.querySelectorAll("[id]");for(var i=0,l=n$.length,n;i<l&&(n=n$[i]);i++){$[n.id]=n}}},onMutation:function(node,listener){var observer=new MutationObserver(function(mutations){listener.call(this,observer,mutations);observer.disconnect()}.bind(this));observer.observe(node,{childList:true,subtree:true})}};function isBase(object){return object.hasOwnProperty("PolymerBase")}function PolymerBase(){}PolymerBase.prototype=base;base.constructor=PolymerBase;scope.Base=PolymerBase;scope.isBase=isBase;scope.api.instance.base=base})(Polymer);(function(scope){var log=window.WebComponents?WebComponents.flags.log:{};var hasShadowDOMPolyfill=window.ShadowDOMPolyfill;var STYLE_SCOPE_ATTRIBUTE="element";var STYLE_CONTROLLER_SCOPE="controller";var styles={STYLE_SCOPE_ATTRIBUTE:STYLE_SCOPE_ATTRIBUTE,installControllerStyles:function(){var scope=this.findStyleScope();if(scope&&!this.scopeHasNamedStyle(scope,this.localName)){var proto=getPrototypeOf(this),cssText="";while(proto&&proto.element){cssText+=proto.element.cssTextForScope(STYLE_CONTROLLER_SCOPE);proto=getPrototypeOf(proto)}if(cssText){this.installScopeCssText(cssText,scope)}}},installScopeStyle:function(style,name,scope){var scope=scope||this.findStyleScope(),name=name||"";if(scope&&!this.scopeHasNamedStyle(scope,this.localName+name)){var cssText="";if(style instanceof Array){for(var i=0,l=style.length,s;i<l&&(s=style[i]);i++){cssText+=s.textContent+"\n\n"}}else{cssText=style.textContent}this.installScopeCssText(cssText,scope,name)}},installScopeCssText:function(cssText,scope,name){scope=scope||this.findStyleScope();name=name||"";if(!scope){return}if(hasShadowDOMPolyfill){cssText=shimCssText(cssText,scope.host)}var style=this.element.cssTextToScopeStyle(cssText,STYLE_CONTROLLER_SCOPE);Polymer.applyStyleToScope(style,scope);this.styleCacheForScope(scope)[this.localName+name]=true},findStyleScope:function(node){var n=node||this;while(n.parentNode){n=n.parentNode}return n},scopeHasNamedStyle:function(scope,name){var cache=this.styleCacheForScope(scope);return cache[name]},styleCacheForScope:function(scope){if(hasShadowDOMPolyfill){var scopeName=scope.host?scope.host.localName:scope.localName;return polyfillScopeStyleCache[scopeName]||(polyfillScopeStyleCache[scopeName]={})}else{return scope._scopeStyles=scope._scopeStyles||{}}}};var polyfillScopeStyleCache={};function getPrototypeOf(prototype){return prototype.__proto__}function shimCssText(cssText,host){var name="",is=false;if(host){name=host.localName;is=host.hasAttribute("is")}var selector=WebComponents.ShadowCSS.makeScopeSelector(name,is);return WebComponents.ShadowCSS.shimCssText(cssText,selector)}scope.api.instance.styles=styles})(Polymer);(function(scope){var extend=scope.extend;var api=scope.api;function element(name,prototype){if(typeof name!=="string"){var script=prototype||document._currentScript;prototype=name;name=script&&script.parentNode&&script.parentNode.getAttribute?script.parentNode.getAttribute("name"):"";if(!name){throw"Element name could not be inferred."}}if(getRegisteredPrototype(name)){throw"Already registered (Polymer) prototype for element "+name}registerPrototype(name,prototype);notifyPrototype(name)}function waitingForPrototype(name,client){waitPrototype[name]=client}var waitPrototype={};function notifyPrototype(name){if(waitPrototype[name]){waitPrototype[name].registerWhenReady();delete waitPrototype[name]}}var prototypesByName={};function registerPrototype(name,prototype){return prototypesByName[name]=prototype||{}}function getRegisteredPrototype(name){return prototypesByName[name]}function instanceOfType(element,type){if(typeof type!=="string"){return false}var proto=HTMLElement.getPrototypeForTag(type);var ctor=proto&&proto.constructor;if(!ctor){return false}if(CustomElements.instanceof){return CustomElements.instanceof(element,ctor)}return element instanceof ctor}scope.getRegisteredPrototype=getRegisteredPrototype;scope.waitingForPrototype=waitingForPrototype;scope.instanceOfType=instanceOfType;window.Polymer=element;extend(Polymer,scope);if(WebComponents.consumeDeclarations){WebComponents.consumeDeclarations(function(declarations){if(declarations){for(var i=0,l=declarations.length,d;i<l&&(d=declarations[i]);i++){element.apply(null,d)}}})}})(Polymer);
(function(scope){var path={resolveElementPaths:function(node){Polymer.urlResolver.resolveDom(node)},addResolvePathApi:function(){var assetPath=this.getAttribute("assetpath")||"";var root=new URL(assetPath,this.ownerDocument.baseURI);this.prototype.resolvePath=function(urlPath,base){var u=new URL(urlPath,base||root);return u.href}}};scope.api.declaration.path=path})(Polymer);(function(scope){var log=window.WebComponents?WebComponents.flags.log:{};var api=scope.api.instance.styles;var STYLE_SCOPE_ATTRIBUTE=api.STYLE_SCOPE_ATTRIBUTE;var hasShadowDOMPolyfill=window.ShadowDOMPolyfill;var STYLE_SELECTOR="style";var STYLE_LOADABLE_MATCH="@import";var SHEET_SELECTOR="link[rel=stylesheet]";var STYLE_GLOBAL_SCOPE="global";var SCOPE_ATTR="polymer-scope";var styles={loadStyles:function(callback){var template=this.fetchTemplate();var content=template&&this.templateContent();if(content){this.convertSheetsToStyles(content);var styles=this.findLoadableStyles(content);if(styles.length){var templateUrl=template.ownerDocument.baseURI;return Polymer.styleResolver.loadStyles(styles,templateUrl,callback)}}if(callback){callback()}},convertSheetsToStyles:function(root){var s$=root.querySelectorAll(SHEET_SELECTOR);for(var i=0,l=s$.length,s,c;i<l&&(s=s$[i]);i++){c=createStyleElement(importRuleForSheet(s,this.ownerDocument.baseURI),this.ownerDocument);this.copySheetAttributes(c,s);s.parentNode.replaceChild(c,s)}},copySheetAttributes:function(style,link){for(var i=0,a$=link.attributes,l=a$.length,a;(a=a$[i])&&i<l;i++){if(a.name!=="rel"&&a.name!=="href"){style.setAttribute(a.name,a.value)}}},findLoadableStyles:function(root){var loadables=[];if(root){var s$=root.querySelectorAll(STYLE_SELECTOR);for(var i=0,l=s$.length,s;i<l&&(s=s$[i]);i++){if(s.textContent.match(STYLE_LOADABLE_MATCH)){loadables.push(s)}}}return loadables},installSheets:function(){this.cacheSheets();this.cacheStyles();this.installLocalSheets();this.installGlobalStyles()},cacheSheets:function(){this.sheets=this.findNodes(SHEET_SELECTOR);this.sheets.forEach(function(s){if(s.parentNode){s.parentNode.removeChild(s)}})},cacheStyles:function(){this.styles=this.findNodes(STYLE_SELECTOR+"["+SCOPE_ATTR+"]");this.styles.forEach(function(s){if(s.parentNode){s.parentNode.removeChild(s)}})},installLocalSheets:function(){var sheets=this.sheets.filter(function(s){return!s.hasAttribute(SCOPE_ATTR)});var content=this.templateContent();if(content){var cssText="";sheets.forEach(function(sheet){cssText+=cssTextFromSheet(sheet)+"\n"});if(cssText){var style=createStyleElement(cssText,this.ownerDocument);content.insertBefore(style,content.firstChild)}}},findNodes:function(selector,matcher){var nodes=this.querySelectorAll(selector).array();var content=this.templateContent();if(content){var templateNodes=content.querySelectorAll(selector).array();nodes=nodes.concat(templateNodes)}return matcher?nodes.filter(matcher):nodes},installGlobalStyles:function(){var style=this.styleForScope(STYLE_GLOBAL_SCOPE);applyStyleToScope(style,document.head)},cssTextForScope:function(scopeDescriptor){var cssText="";var selector="["+SCOPE_ATTR+"="+scopeDescriptor+"]";var matcher=function(s){return matchesSelector(s,selector)};var sheets=this.sheets.filter(matcher);sheets.forEach(function(sheet){cssText+=cssTextFromSheet(sheet)+"\n\n"});var styles=this.styles.filter(matcher);styles.forEach(function(style){cssText+=style.textContent+"\n\n"});return cssText},styleForScope:function(scopeDescriptor){var cssText=this.cssTextForScope(scopeDescriptor);return this.cssTextToScopeStyle(cssText,scopeDescriptor)},cssTextToScopeStyle:function(cssText,scopeDescriptor){if(cssText){var style=createStyleElement(cssText);style.setAttribute(STYLE_SCOPE_ATTRIBUTE,this.getAttribute("name")+"-"+scopeDescriptor);return style}}};function importRuleForSheet(sheet,baseUrl){var href=new URL(sheet.getAttribute("href"),baseUrl).href;return"@import '"+href+"';"}function applyStyleToScope(style,scope){if(style){if(scope===document){scope=document.head}if(hasShadowDOMPolyfill){scope=document.head}var clone=createStyleElement(style.textContent);var attr=style.getAttribute(STYLE_SCOPE_ATTRIBUTE);if(attr){clone.setAttribute(STYLE_SCOPE_ATTRIBUTE,attr)}var refNode=scope.firstElementChild;if(scope===document.head){var selector="style["+STYLE_SCOPE_ATTRIBUTE+"]";var s$=document.head.querySelectorAll(selector);if(s$.length){refNode=s$[s$.length-1].nextElementSibling}}scope.insertBefore(clone,refNode)}}function createStyleElement(cssText,scope){scope=scope||document;scope=scope.createElement?scope:scope.ownerDocument;var style=scope.createElement("style");style.textContent=cssText;return style}function cssTextFromSheet(sheet){return sheet&&sheet.__resource||""}function matchesSelector(node,inSelector){if(matches){return matches.call(node,inSelector)}}var p=HTMLElement.prototype;var matches=p.matches||p.matchesSelector||p.webkitMatchesSelector||p.mozMatchesSelector;scope.api.declaration.styles=styles;scope.applyStyleToScope=applyStyleToScope})(Polymer);(function(scope){var log=window.WebComponents?WebComponents.flags.log:{};var api=scope.api.instance.events;var EVENT_PREFIX=api.EVENT_PREFIX;var mixedCaseEventTypes={};["webkitAnimationStart","webkitAnimationEnd","webkitTransitionEnd","DOMFocusOut","DOMFocusIn","DOMMouseScroll"].forEach(function(e){mixedCaseEventTypes[e.toLowerCase()]=e});var events={parseHostEvents:function(){var delegates=this.prototype.eventDelegates;this.addAttributeDelegates(delegates)},addAttributeDelegates:function(delegates){for(var i=0,a;a=this.attributes[i];i++){if(this.hasEventPrefix(a.name)){delegates[this.removeEventPrefix(a.name)]=a.value.replace("{{","").replace("}}","").trim()}}},hasEventPrefix:function(n){return n&&n[0]==="o"&&n[1]==="n"&&n[2]==="-"},removeEventPrefix:function(n){return n.slice(prefixLength)},findController:function(node){while(node.parentNode){if(node.eventController){return node.eventController}node=node.parentNode}return node.host},getEventHandler:function(controller,target,method){var events=this;return function(e){if(!controller||!controller.PolymerBase){controller=events.findController(target)}var args=[e,e.detail,e.currentTarget];controller.dispatchMethod(controller,method,args)}},prepareEventBinding:function(pathString,name,node){if(!this.hasEventPrefix(name))return;var eventType=this.removeEventPrefix(name);eventType=mixedCaseEventTypes[eventType]||eventType;var events=this;return function(model,node,oneTime){var handler=events.getEventHandler(undefined,node,pathString);PolymerGestures.addEventListener(node,eventType,handler);if(oneTime)return;function bindingValue(){return"{{ "+pathString+" }}"}return{open:bindingValue,discardChanges:bindingValue,close:function(){PolymerGestures.removeEventListener(node,eventType,handler)}}}}};var prefixLength=EVENT_PREFIX.length;scope.api.declaration.events=events})(Polymer);(function(scope){var observationBlacklist=["attribute"];var properties={inferObservers:function(prototype){var observe=prototype.observe,property;for(var n in prototype){if(n.slice(-7)==="Changed"){property=n.slice(0,-7);if(this.canObserveProperty(property)){if(!observe){observe=prototype.observe={}}observe[property]=observe[property]||n}}}},canObserveProperty:function(property){return observationBlacklist.indexOf(property)<0},explodeObservers:function(prototype){var o=prototype.observe;if(o){var exploded={};for(var n in o){var names=n.split(" ");for(var i=0,ni;ni=names[i];i++){exploded[ni]=o[n]}}prototype.observe=exploded}},optimizePropertyMaps:function(prototype){if(prototype.observe){var a=prototype._observeNames=[];for(var n in prototype.observe){var names=n.split(" ");for(var i=0,ni;ni=names[i];i++){a.push(ni)}}}if(prototype.publish){var a=prototype._publishNames=[];for(var n in prototype.publish){a.push(n)}}if(prototype.computed){var a=prototype._computedNames=[];for(var n in prototype.computed){a.push(n)}}},publishProperties:function(prototype,base){var publish=prototype.publish;if(publish){this.requireProperties(publish,prototype,base);this.filterInvalidAccessorNames(publish);prototype._publishLC=this.lowerCaseMap(publish)}var computed=prototype.computed;if(computed){this.filterInvalidAccessorNames(computed)}},filterInvalidAccessorNames:function(propertyNames){for(var name in propertyNames){if(this.propertyNameBlacklist[name]){console.warn('Cannot define property "'+name+'" for element "'+this.name+'" because it has the same name as an HTMLElement '+"property, and not all browsers support overriding that. "+"Consider giving it a different name.");delete propertyNames[name]}}},requireProperties:function(propertyInfos,prototype,base){prototype.reflect=prototype.reflect||{};for(var n in propertyInfos){var value=propertyInfos[n];if(value&&value.reflect!==undefined){prototype.reflect[n]=Boolean(value.reflect);value=value.value}if(value!==undefined){prototype[n]=value}}},lowerCaseMap:function(properties){var map={};for(var n in properties){map[n.toLowerCase()]=n}return map},createPropertyAccessor:function(name,ignoreWrites){var proto=this.prototype;var privateName=name+"_";var privateObservable=name+"Observable_";proto[privateName]=proto[name];Object.defineProperty(proto,name,{get:function(){var observable=this[privateObservable];if(observable)observable.deliver();return this[privateName]},set:function(value){if(ignoreWrites){return this[privateName]}var observable=this[privateObservable];if(observable){observable.setValue(value);return}var oldValue=this[privateName];this[privateName]=value;this.emitPropertyChangeRecord(name,value,oldValue);return value},configurable:true})},createPropertyAccessors:function(prototype){var n$=prototype._computedNames;if(n$&&n$.length){for(var i=0,l=n$.length,n,fn;i<l&&(n=n$[i]);i++){this.createPropertyAccessor(n,true)}}var n$=prototype._publishNames;if(n$&&n$.length){for(var i=0,l=n$.length,n,fn;i<l&&(n=n$[i]);i++){if(!prototype.computed||!prototype.computed[n]){this.createPropertyAccessor(n)}}}},propertyNameBlacklist:{children:1,"class":1,id:1,hidden:1,style:1,title:1}};scope.api.declaration.properties=properties})(Polymer);(function(scope){var ATTRIBUTES_ATTRIBUTE="attributes";var ATTRIBUTES_REGEX=/\s|,/;var attributes={inheritAttributesObjects:function(prototype){this.inheritObject(prototype,"publishLC");this.inheritObject(prototype,"_instanceAttributes")},publishAttributes:function(prototype,base){var attributes=this.getAttribute(ATTRIBUTES_ATTRIBUTE);if(attributes){var publish=prototype.publish||(prototype.publish={});var names=attributes.split(ATTRIBUTES_REGEX);for(var i=0,l=names.length,n;i<l;i++){n=names[i].trim();if(n&&publish[n]===undefined){publish[n]=undefined}}}},accumulateInstanceAttributes:function(){var clonable=this.prototype._instanceAttributes;var a$=this.attributes;for(var i=0,l=a$.length,a;i<l&&(a=a$[i]);i++){if(this.isInstanceAttribute(a.name)){clonable[a.name]=a.value}}},isInstanceAttribute:function(name){return!this.blackList[name]&&name.slice(0,3)!=="on-"},blackList:{name:1,"extends":1,constructor:1,noscript:1,assetpath:1,"cache-csstext":1}};attributes.blackList[ATTRIBUTES_ATTRIBUTE]=1;scope.api.declaration.attributes=attributes})(Polymer);(function(scope){var events=scope.api.declaration.events;var syntax=new PolymerExpressions;var prepareBinding=syntax.prepareBinding;syntax.prepareBinding=function(pathString,name,node){return events.prepareEventBinding(pathString,name,node)||prepareBinding.call(syntax,pathString,name,node)};var mdv={syntax:syntax,fetchTemplate:function(){return this.querySelector("template")},templateContent:function(){var template=this.fetchTemplate();return template&&template.content},installBindingDelegate:function(template){if(template){template.bindingDelegate=this.syntax}}};scope.api.declaration.mdv=mdv})(Polymer);(function(scope){var api=scope.api;var isBase=scope.isBase;var extend=scope.extend;var hasShadowDOMPolyfill=window.ShadowDOMPolyfill;var prototype={register:function(name,extendeeName){this.buildPrototype(name,extendeeName);this.registerPrototype(name,extendeeName);this.publishConstructor()},buildPrototype:function(name,extendeeName){var extension=scope.getRegisteredPrototype(name);var base=this.generateBasePrototype(extendeeName);this.desugarBeforeChaining(extension,base);this.prototype=this.chainPrototypes(extension,base);this.desugarAfterChaining(name,extendeeName)},desugarBeforeChaining:function(prototype,base){prototype.element=this;this.publishAttributes(prototype,base);this.publishProperties(prototype,base);this.inferObservers(prototype);this.explodeObservers(prototype)},chainPrototypes:function(prototype,base){this.inheritMetaData(prototype,base);var chained=this.chainObject(prototype,base);ensurePrototypeTraversal(chained);return chained},inheritMetaData:function(prototype,base){this.inheritObject("observe",prototype,base);this.inheritObject("publish",prototype,base);this.inheritObject("reflect",prototype,base);this.inheritObject("_publishLC",prototype,base);this.inheritObject("_instanceAttributes",prototype,base);this.inheritObject("eventDelegates",prototype,base)},desugarAfterChaining:function(name,extendee){this.optimizePropertyMaps(this.prototype);this.createPropertyAccessors(this.prototype);this.installBindingDelegate(this.fetchTemplate());this.installSheets();this.resolveElementPaths(this);this.accumulateInstanceAttributes();this.parseHostEvents();this.addResolvePathApi();if(hasShadowDOMPolyfill){WebComponents.ShadowCSS.shimStyling(this.templateContent(),name,extendee)}if(this.prototype.registerCallback){this.prototype.registerCallback(this)}},publishConstructor:function(){var symbol=this.getAttribute("constructor");if(symbol){window[symbol]=this.ctor}},generateBasePrototype:function(extnds){var prototype=this.findBasePrototype(extnds);if(!prototype){var prototype=HTMLElement.getPrototypeForTag(extnds);prototype=this.ensureBaseApi(prototype);memoizedBases[extnds]=prototype}return prototype},findBasePrototype:function(name){return memoizedBases[name]},ensureBaseApi:function(prototype){if(prototype.PolymerBase){return prototype}var extended=Object.create(prototype);api.publish(api.instance,extended);this.mixinMethod(extended,prototype,api.instance.mdv,"bind");return extended},mixinMethod:function(extended,prototype,api,name){var $super=function(args){return prototype[name].apply(this,args)};extended[name]=function(){this.mixinSuper=$super;return api[name].apply(this,arguments)}},inheritObject:function(name,prototype,base){var source=prototype[name]||{};prototype[name]=this.chainObject(source,base[name])},registerPrototype:function(name,extendee){var info={prototype:this.prototype};var typeExtension=this.findTypeExtension(extendee);if(typeExtension){info.extends=typeExtension}HTMLElement.register(name,this.prototype);this.ctor=document.registerElement(name,info)},findTypeExtension:function(name){if(name&&name.indexOf("-")<0){return name}else{var p=this.findBasePrototype(name);if(p.element){return this.findTypeExtension(p.element.extends)}}}};var memoizedBases={};if(Object.__proto__){prototype.chainObject=function(object,inherited){if(object&&inherited&&object!==inherited){object.__proto__=inherited}return object}}else{prototype.chainObject=function(object,inherited){if(object&&inherited&&object!==inherited){var chained=Object.create(inherited);object=extend(chained,object)}return object}}function ensurePrototypeTraversal(prototype){if(!Object.__proto__){var ancestor=Object.getPrototypeOf(prototype);prototype.__proto__=ancestor;if(isBase(ancestor)){ancestor.__proto__=Object.getPrototypeOf(ancestor)}}}api.declaration.prototype=prototype})(Polymer);(function(scope){var queue={wait:function(element){if(!element.__queue){element.__queue={};elements.push(element)}},enqueue:function(element,check,go){var shouldAdd=element.__queue&&!element.__queue.check;if(shouldAdd){queueForElement(element).push(element);element.__queue.check=check;element.__queue.go=go}return this.indexOf(element)!==0},indexOf:function(element){var i=queueForElement(element).indexOf(element);if(i>=0&&document.contains(element)){i+=HTMLImports.useNative||HTMLImports.ready?importQueue.length:1e9}return i},go:function(element){var readied=this.remove(element);if(readied){element.__queue.flushable=true;this.addToFlushQueue(readied);this.check()}},remove:function(element){var i=this.indexOf(element);if(i!==0){return}return queueForElement(element).shift()},check:function(){var element=this.nextElement();if(element){element.__queue.check.call(element)}if(this.canReady()){this.ready();return true}},nextElement:function(){return nextQueued()},canReady:function(){return!this.waitToReady&&this.isEmpty()},isEmpty:function(){for(var i=0,l=elements.length,e;i<l&&(e=elements[i]);i++){if(e.__queue&&!e.__queue.flushable){return}}return true},addToFlushQueue:function(element){flushQueue.push(element)},flush:function(){if(this.flushing){return}this.flushing=true;var element;while(flushQueue.length){element=flushQueue.shift();element.__queue.go.call(element);element.__queue=null}this.flushing=false},ready:function(){var polyfillWasReady=CustomElements.ready;CustomElements.ready=false;this.flush();if(!CustomElements.useNative){CustomElements.upgradeDocumentTree(document)}CustomElements.ready=polyfillWasReady;Polymer.flush();requestAnimationFrame(this.flushReadyCallbacks)},addReadyCallback:function(callback){if(callback){readyCallbacks.push(callback)}},flushReadyCallbacks:function(){if(readyCallbacks){var fn;while(readyCallbacks.length){fn=readyCallbacks.shift();fn()}}},waitingFor:function(){var e$=[];for(var i=0,l=elements.length,e;i<l&&(e=elements[i]);i++){if(e.__queue&&!e.__queue.flushable){e$.push(e)}}return e$},waitToReady:true};var elements=[];var flushQueue=[];var importQueue=[];var mainQueue=[];var readyCallbacks=[];function queueForElement(element){return document.contains(element)?mainQueue:importQueue}function nextQueued(){return importQueue.length?importQueue[0]:mainQueue[0]}function whenReady(callback){queue.waitToReady=true;Polymer.endOfMicrotask(function(){HTMLImports.whenReady(function(){queue.addReadyCallback(callback);queue.waitToReady=false;queue.check()})})}function forceReady(timeout){if(timeout===undefined){queue.ready();return}var handle=setTimeout(function(){queue.ready()},timeout);Polymer.whenReady(function(){clearTimeout(handle)})}scope.elements=elements;scope.waitingFor=queue.waitingFor.bind(queue);scope.forceReady=forceReady;scope.queue=queue;scope.whenReady=scope.whenPolymerReady=whenReady})(Polymer);(function(scope){var extend=scope.extend;var api=scope.api;var queue=scope.queue;var whenReady=scope.whenReady;var getRegisteredPrototype=scope.getRegisteredPrototype;var waitingForPrototype=scope.waitingForPrototype;var prototype=extend(Object.create(HTMLElement.prototype),{createdCallback:function(){if(this.getAttribute("name")){this.init()}},init:function(){this.name=this.getAttribute("name");this.extends=this.getAttribute("extends");queue.wait(this);this.loadResources();this.registerWhenReady()},registerWhenReady:function(){if(this.registered||this.waitingForPrototype(this.name)||this.waitingForQueue()||this.waitingForResources()){return}queue.go(this)},_register:function(){if(isCustomTag(this.extends)&&!isRegistered(this.extends)){console.warn("%s is attempting to extend %s, an unregistered element "+"or one that was not registered with Polymer.",this.name,this.extends)}this.register(this.name,this.extends);this.registered=true},waitingForPrototype:function(name){if(!getRegisteredPrototype(name)){waitingForPrototype(name,this);this.handleNoScript(name);return true}},handleNoScript:function(name){if(this.hasAttribute("noscript")&&!this.noscript){this.noscript=true;Polymer(name)}},waitingForResources:function(){return this._needsResources},waitingForQueue:function(){return queue.enqueue(this,this.registerWhenReady,this._register)},loadResources:function(){this._needsResources=true;this.loadStyles(function(){this._needsResources=false;this.registerWhenReady()}.bind(this))}});api.publish(api.declaration,prototype);function isRegistered(name){return Boolean(HTMLElement.getPrototypeForTag(name))}function isCustomTag(name){return name&&name.indexOf("-")>=0}whenReady(function(){document.body.removeAttribute("unresolved");document.dispatchEvent(new CustomEvent("polymer-ready",{bubbles:true}))});document.registerElement("polymer-element",{prototype:prototype})})(Polymer);(function(scope){var whenReady=scope.whenReady;function importElements(node,callback){if(node){document.head.appendChild(node);whenReady(callback)}else if(callback){callback()}}function _import(urls,callback){if(urls&&urls.length){var frag=document.createDocumentFragment();for(var i=0,l=urls.length,url,link;i<l&&(url=urls[i]);i++){link=document.createElement("link");link.rel="import";link.href=url;frag.appendChild(link)}importElements(frag,callback)}else if(callback){callback()}}scope.import=_import;scope.importElements=importElements})(Polymer);(function(){var element=document.createElement("polymer-element");element.setAttribute("name","auto-binding");element.setAttribute("extends","template");element.init();Polymer("auto-binding",{createdCallback:function(){this.syntax=this.bindingDelegate=this.makeSyntax();Polymer.whenPolymerReady(function(){this.model=this;this.setAttribute("bind","");this.async(function(){this.marshalNodeReferences(this.parentNode);this.fire("template-bound")})}.bind(this))},makeSyntax:function(){var events=Object.create(Polymer.api.declaration.events);var self=this;events.findController=function(){return self.model};var syntax=new PolymerExpressions;var prepareBinding=syntax.prepareBinding;syntax.prepareBinding=function(pathString,name,node){return events.prepareEventBinding(pathString,name,node)||prepareBinding.call(syntax,pathString,name,node)};return syntax}})})();</script><style type="text/css">:host{display:block;position:relative}</style><script>(function(){function a(a){this._value=a}function b(a,b,c,d){var e,f,g=Math.pow(10,b);return f=(c(a*g)/g).toFixed(b),d&&(e=new RegExp("0{1,"+d+"}$"),f=f.replace(e,"")),f}function c(a,b,c){var d;return d=b.indexOf("$")>-1?e(a,b,c):b.indexOf("%")>-1?f(a,b,c):b.indexOf(":")>-1?g(a,b):i(a._value,b,c)}function d(a,b){var c,d,e,f,g,i=b,j=["KB","MB","GB","TB","PB","EB","ZB","YB"],k=!1;if(b.indexOf(":")>-1)a._value=h(b);else if(b===q)a._value=0;else{for("."!==o[p].delimiters.decimal&&(b=b.replace(/\./g,"").replace(o[p].delimiters.decimal,".")),c=new RegExp("[^a-zA-Z]"+o[p].abbreviations.thousand+"(?:\\)|(\\"+o[p].currency.symbol+")?(?:\\))?)?$"),d=new RegExp("[^a-zA-Z]"+o[p].abbreviations.million+"(?:\\)|(\\"+o[p].currency.symbol+")?(?:\\))?)?$"),e=new RegExp("[^a-zA-Z]"+o[p].abbreviations.billion+"(?:\\)|(\\"+o[p].currency.symbol+")?(?:\\))?)?$"),f=new RegExp("[^a-zA-Z]"+o[p].abbreviations.trillion+"(?:\\)|(\\"+o[p].currency.symbol+")?(?:\\))?)?$"),g=0;g<=j.length&&!(k=b.indexOf(j[g])>-1?Math.pow(1024,g+1):!1);g++);a._value=(k?k:1)*(i.match(c)?Math.pow(10,3):1)*(i.match(d)?Math.pow(10,6):1)*(i.match(e)?Math.pow(10,9):1)*(i.match(f)?Math.pow(10,12):1)*(b.indexOf("%")>-1?.01:1)*((b.split("-").length+Math.min(b.split("(").length-1,b.split(")").length-1))%2?1:-1)*Number(b.replace(/[^0-9\.]+/g,"")),a._value=k?Math.ceil(a._value):a._value}return a._value}function e(a,b,c){var d,e,f=b.indexOf("$"),g=b.indexOf("("),h=b.indexOf("-"),j="";return b.indexOf(" $")>-1?(j=" ",b=b.replace(" $","")):b.indexOf("$ ")>-1?(j=" ",b=b.replace("$ ","")):b=b.replace("$",""),e=i(a._value,b,c),1>=f?e.indexOf("(")>-1||e.indexOf("-")>-1?(e=e.split(""),d=1,(g>f||h>f)&&(d=0),e.splice(d,0,o[p].currency.symbol+j),e=e.join("")):e=o[p].currency.symbol+j+e:e.indexOf(")")>-1?(e=e.split(""),e.splice(-1,0,j+o[p].currency.symbol),e=e.join("")):e=e+j+o[p].currency.symbol,e}function f(a,b,c){var d,e="",f=100*a._value;return b.indexOf(" %")>-1?(e=" ",b=b.replace(" %","")):b=b.replace("%",""),d=i(f,b,c),d.indexOf(")")>-1?(d=d.split(""),d.splice(-1,0,e+"%"),d=d.join("")):d=d+e+"%",d}function g(a){var b=Math.floor(a._value/60/60),c=Math.floor((a._value-60*b*60)/60),d=Math.round(a._value-60*b*60-60*c);return b+":"+(10>c?"0"+c:c)+":"+(10>d?"0"+d:d)}function h(a){var b=a.split(":"),c=0;return 3===b.length?(c+=60*Number(b[0])*60,c+=60*Number(b[1]),c+=Number(b[2])):2===b.length&&(c+=60*Number(b[0]),c+=Number(b[1])),Number(c)}function i(a,c,d){var e,f,g,h,i,j,k=!1,l=!1,m=!1,n="",r=!1,s=!1,t=!1,u=!1,v=!1,w="",x="",y=Math.abs(a),z=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],A="",B=!1;if(0===a&&null!==q)return q;if(c.indexOf("(")>-1?(k=!0,c=c.slice(1,-1)):c.indexOf("+")>-1&&(l=!0,c=c.replace(/\+/g,"")),c.indexOf("a")>-1&&(r=c.indexOf("aK")>=0,s=c.indexOf("aM")>=0,t=c.indexOf("aB")>=0,u=c.indexOf("aT")>=0,v=r||s||t||u,c.indexOf(" a")>-1?(n=" ",c=c.replace(" a","")):c=c.replace("a",""),y>=Math.pow(10,12)&&!v||u?(n+=o[p].abbreviations.trillion,a/=Math.pow(10,12)):y<Math.pow(10,12)&&y>=Math.pow(10,9)&&!v||t?(n+=o[p].abbreviations.billion,a/=Math.pow(10,9)):y<Math.pow(10,9)&&y>=Math.pow(10,6)&&!v||s?(n+=o[p].abbreviations.million,a/=Math.pow(10,6)):(y<Math.pow(10,6)&&y>=Math.pow(10,3)&&!v||r)&&(n+=o[p].abbreviations.thousand,a/=Math.pow(10,3))),c.indexOf("b")>-1)for(c.indexOf(" b")>-1?(w=" ",c=c.replace(" b","")):c=c.replace("b",""),g=0;g<=z.length;g++)if(e=Math.pow(1024,g),f=Math.pow(1024,g+1),a>=e&&f>a){w+=z[g],e>0&&(a/=e);break}return c.indexOf("o")>-1&&(c.indexOf(" o")>-1?(x=" ",c=c.replace(" o","")):c=c.replace("o",""),x+=o[p].ordinal(a)),c.indexOf("[.]")>-1&&(m=!0,c=c.replace("[.]",".")),h=a.toString().split(".")[0],i=c.split(".")[1],j=c.indexOf(","),i?(i.indexOf("[")>-1?(i=i.replace("]",""),i=i.split("["),A=b(a,i[0].length+i[1].length,d,i[1].length)):A=b(a,i.length,d),h=A.split(".")[0],A=A.split(".")[1].length?o[p].delimiters.decimal+A.split(".")[1]:"",m&&0===Number(A.slice(1))&&(A="")):h=b(a,null,d),h.indexOf("-")>-1&&(h=h.slice(1),B=!0),j>-1&&(h=h.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+o[p].delimiters.thousands)),0===c.indexOf(".")&&(h=""),(k&&B?"(":"")+(!k&&B?"-":"")+(!B&&l?"+":"")+h+A+(x?x:"")+(n?n:"")+(w?w:"")+(k&&B?")":"")}function j(a,b){o[a]=b}function k(a){var b=a.toString().split(".");return b.length<2?1:Math.pow(10,b[1].length)}function l(){var a=Array.prototype.slice.call(arguments);return a.reduce(function(a,b){var c=k(a),d=k(b);return c>d?c:d},-1/0)}var m,n="1.5.3",o={},p="en",q=null,r="0,0",s="undefined"!=typeof module&&module.exports;m=function(b){return m.isNumeral(b)?b=b.value():0===b||"undefined"==typeof b?b=0:Number(b)||(b=m.fn.unformat(b)),new a(Number(b))},m.version=n,m.isNumeral=function(b){return b instanceof a},m.language=function(a,b){if(!a)return p;if(a&&!b){if(!o[a])throw new Error("Unknown language : "+a);p=a}return(b||!o[a])&&j(a,b),m},m.languageData=function(a){if(!a)return o[p];if(!o[a])throw new Error("Unknown language : "+a);return o[a]},m.language("en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(a){var b=a%10;return 1===~~(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th"},currency:{symbol:"$"}}),m.zeroFormat=function(a){q="string"==typeof a?a:null},m.defaultFormat=function(a){r="string"==typeof a?a:"0.0"},"function"!=typeof Array.prototype.reduce&&(Array.prototype.reduce=function(a,b){"use strict";if(null===this||"undefined"==typeof this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof a)throw new TypeError(a+" is not a function");var c,d,e=this.length>>>0,f=!1;for(1<arguments.length&&(d=b,f=!0),c=0;e>c;++c)this.hasOwnProperty(c)&&(f?d=a(d,this[c],c,this):(d=this[c],f=!0));if(!f)throw new TypeError("Reduce of empty array with no initial value");return d}),m.fn=a.prototype={clone:function(){return m(this)},format:function(a,b){return c(this,a?a:r,void 0!==b?b:Math.round)},unformat:function(a){return"[object Number]"===Object.prototype.toString.call(a)?a:d(this,a?a:r)},value:function(){return this._value},valueOf:function(){return this._value},set:function(a){return this._value=Number(a),this},add:function(a){function b(a,b){return a+c*b}var c=l.call(null,this._value,a);return this._value=[this._value,a].reduce(b,0)/c,this},subtract:function(a){function b(a,b){return a-c*b}var c=l.call(null,this._value,a);return this._value=[a].reduce(b,this._value*c)/c,this},multiply:function(a){function b(a,b){var c=l(a,b);return a*c*b*c/(c*c)}return this._value=[this._value,a].reduce(b,1),this},divide:function(a){function b(a,b){var c=l(a,b);return a*c/(b*c)}return this._value=[this._value,a].reduce(b),this},difference:function(a){return Math.abs(m(this._value).subtract(a).value())}},s&&(module.exports=m),"undefined"==typeof ender&&(this.numeral=m),"function"==typeof define&&define.amd&&define([],function(){return m})}).call(this);</script></head><body><div hidden=""><polymer-element name="fin-rectangle" assetpath="/dev/fin-rectangle/"><script>"use strict";(function(){function pointEqualsPoint(a,b){return a.x===b.x&&a.y===b.y}function rectangleContains(rect,x,y){var minX=rect.origin.x;var minY=rect.origin.y;var maxX=minX+rect.extent.x;var maxY=minY+rect.extent.y;if(rect.extent.x<0){minX=maxX;maxX=rect.origin.x}if(rect.extent.y<0){minY=maxY;maxY=rect.origin.y}var result=x>=minX&&y>=minY&&x<=maxX&&y<=maxY;return result}function createPoint(x,y){var that={};Object.defineProperty(that,"x",{value:x||0,writable:false,enumerable:true,configurable:false});Object.defineProperty(that,"y",{value:y||0,writable:false,enumerable:true,configurable:false});that.plus=function(point){var result=createPoint(this.x+point.x,this.y+point.y);return result};that.plusXY=function(newX,newY){var result=createPoint(this.x+newX,this.y+newY);return result};that.minus=function(point){var result=createPoint(this.x-point.x,this.y-point.y);return result};that.min=function(point){var result=createPoint(Math.min(this.x,point.x),Math.min(this.y,point.y));return result};that.max=function(point){var result=createPoint(Math.max(this.x,point.x),Math.max(this.y,point.y));return result};that.distance=function(point){var dx=point.x-this.x,dy=point.y-this.y,result=Math.sqrt(dx*dx+dy*dy);return result};that.greaterThan=function(point){var result=this.x>point.x&&this.y>point.y;return result};that.lessThan=function(point){var result=this.x<point.x&&this.y<point.y;return result};that.greaterThanEqualTo=function(point){var result=this.x>=point.x&&this.y>=point.y;return result};that.lessThanEqualTo=function(point){var result=this.x<=point.x&&this.y<=point.y;return result};that.isContainedWithinRectangle=function(rect){return rectangleContains(rect,this.x,this.y)};that.equals=function(point){if(!point){return false}return pointEqualsPoint(this,point)};return that}function createRectangle(x,y,width,height){var that={};var origin=createPoint(x,y);var extent=createPoint(width,height);var corner=createPoint(x+width,y+height);var center=createPoint(x+width/2,y+height/2);Object.defineProperty(that,"origin",{value:origin,writable:false,enumerable:true,configurable:false});Object.defineProperty(that,"extent",{value:extent,writable:false,enumerable:true,configurable:false});Object.defineProperty(that,"corner",{value:corner,writable:false,enumerable:true,configurable:false});Object.defineProperty(that,"center",{value:center,writable:false,enumerable:true,configurable:false});that.top=function(){return this.origin.y};that.left=function(){return this.origin.x};that.bottom=function(){return this.top()+this.extent.y};that.right=function(){return this.left()+this.extent.x};that.width=function(){return this.extent.x};that.height=function(){return this.extent.y};that.area=function(){return this.extent.x*this.extent.y};that.flattenXAt=function(x){var o=this.origin;var e=this.extent;return createRectangle(x,o.y,0,e.y)};that.flattenYAt=function(y){var o=this.origin;var e=this.extent;return createRectangle(o.x,y,e.x,0)};that.contains=function(pointOrRect){var result=pointOrRect.isContainedWithinRectangle(this);return result};that.isContainedWithinRectangle=function(rect){var result=rect.origin.lessThanEqualTo(this.origin)&&rect.corner.greaterThanEqualTo(this.corner);return result};that.insetBy=function(thickness){var result=createRectangle(this.origin.x+thickness,this.origin.y+thickness,this.extent.x-2*thickness,this.extent.y-2*thickness);return result};that.union=function(rectangle){var anOrigin=this.origin.min(rectangle.origin),aCorner=this.corner.max(rectangle.corner),width=aCorner.x-anOrigin.x,height=aCorner.y-anOrigin.y,result=createRectangle(anOrigin.x,anOrigin.y,width,height);return result};that.forEach=function(func){var xstart=this.origin.x;var xstop=this.origin.x+this.extent.x;var ystart=this.origin.y;var ystop=this.origin.y+this.extent.y;for(var x=xstart;x<xstop;x++){for(var y=ystart;y<ystop;y++){func(x,y)}}};that.intersect=function(rectangle,ifNoneAction){var point=rectangle.origin,myCorner=this.corner,left=null,right=null,top=null,bottom=null,result=null;if(ifNoneAction&&!this.intersects(rectangle)){return ifNoneAction.call(this,rectangle)}if(point.x>this.origin.x){left=point.x}else{left=this.origin.x}if(point.y>this.origin.y){top=point.y}else{top=this.origin.y}point=rectangle.corner;if(point.x<myCorner.x){right=point.x}else{right=myCorner.x}if(point.y<myCorner.y){bottom=point.y}else{bottom=myCorner.y}result=createRectangle(left,top,right-left,bottom-top);return result};that.intersects=function(rectangle){var rOrigin=rectangle.origin,rCorner=rectangle.corner;if(rCorner.x<=this.origin.x){return false}if(rCorner.y<=this.origin.y){return false}if(rOrigin.x>=this.corner.x){return false}if(rOrigin.y>=this.corner.y){return false}return true};return that}Polymer("fin-rectangle",{point:{create:createPoint},rectangle:{create:createRectangle,contains:rectangleContains}})})();</script></polymer-element><polymer-element name="fin-canvas" assetpath="/dev/fin-canvas/"><template><style>:host{overflow:hidden;position:absolute;top:0;right:0;bottom:0;left:0}button{position:fixed;top:0;left:0;height:0;width:0;border:none;color:transparent;background-color:transparent;outline:0}div.container{position:relative;top:0;right:0;bottom:0;left:0}</style><button></button><canvas class="canvas" on-tap="{{fintap}}" on-hold="{{finhold}}" on-holdpulse="{{finholdpulse}}" on-flick="{{finflick}}" on-release="{{finrelease}}" on-trackstart="{{fintrackstart}}" on-track="{{fintrack}}" on-trackend="{{fintrackend}}"></canvas></template><script>"use strict";(function(){var paintables=[];var resizables=[];var paintLoopRunning=true;var resizeLoopRunning=true;var paintLoopFunction=function(now){if(!paintLoopRunning){return}for(var i=0;i<paintables.length;i++){try{paintables[i](now)}catch(e){}}requestAnimationFrame(paintLoopFunction)};requestAnimationFrame(paintLoopFunction);var resizablesLoopFunction=function(now){if(!resizeLoopRunning){return}for(var i=0;i<resizables.length;i++){try{resizables[i](now)}catch(e){}}};setInterval(resizablesLoopFunction,200);var charMap=[];var empty=["",""];for(var i=0;i<256;i++){charMap[i]=empty}charMap[27]=["ESC","ESCSHIFT"];charMap[192]=["`","~"];charMap[49]=["1","!"];charMap[50]=["2","@"];charMap[51]=["3","#"];charMap[52]=["4","$"];charMap[53]=["5","%"];charMap[54]=["6","^"];charMap[55]=["7","&"];charMap[56]=["8","*"];charMap[57]=["9","("];charMap[48]=["0",")"];charMap[189]=["-","_"];charMap[187]=["=","+"];charMap[8]=["DELETE","DELETESHIFT"];charMap[9]=["TAB","TABSHIFT"];charMap[81]=["q","Q"];charMap[87]=["w","W"];charMap[69]=["e","E"];charMap[82]=["r","R"];charMap[84]=["t","T"];charMap[89]=["y","Y"];charMap[85]=["u","U"];charMap[73]=["i","I"];charMap[79]=["o","O"];charMap[80]=["p","P"];charMap[219]=["[","{"];charMap[221]=["]","}"];charMap[220]=["\\","|"];charMap[220]=["CAPSLOCK","CAPSLOCKSHIFT"];charMap[65]=["a","A"];charMap[83]=["s","S"];charMap[68]=["d","D"];charMap[70]=["f","F"];charMap[71]=["g","G"];charMap[72]=["h","H"];charMap[74]=["j","J"];charMap[75]=["k","K"];charMap[76]=["l","L"];charMap[186]=[";",":"];charMap[222]=["'","|"];charMap[13]=["RETURN","RETURNSHIFT"];charMap[16]=["SHIFT","SHIFT"];charMap[90]=["z","Z"];charMap[88]=["x","X"];charMap[67]=["c","C"];charMap[86]=["v","V"];charMap[66]=["b","B"];charMap[78]=["n","N"];charMap[77]=["m","M"];charMap[188]=[",","<"];charMap[190]=[".",">"];charMap[191]=["/","?"];charMap[16]=["SHIFT","SHIFT"];charMap[17]=["CTRL","CTRLSHIFT"];charMap[18]=["ALT","ALTSHIFT"];charMap[91]=["COMMANDLEFT","COMMANDLEFTSHIFT"];charMap[32]=["SPACE","SPACESHIFT"];charMap[93]=["COMMANDRIGHT","COMMANDRIGHTSHIFT"];charMap[18]=["ALT","ALTSHIFT"];charMap[38]=["UP","UPSHIFT"];charMap[37]=["LEFT","LEFTSHIFT"];charMap[40]=["DOWN","DOWNSHIFT"];charMap[39]=["RIGHT","RIGHTSHIFT"];charMap[33]=["PAGEUP","PAGEUPSHIFT"];charMap[34]=["PAGEDOWN","PAGEDOWNSHIFT"];charMap[35]=["PAGERIGHT","PAGERIGHTSHIFT"];charMap[36]=["PAGELEFT","PAGELEFTSHIFT"];Polymer("fin-canvas",{g:null,canvas:null,canvasCTX:null,focuser:null,buffer:null,ctx:null,mouseLocation:null,holdPulseCount:-1,dragstart:null,origin:null,bounds:null,repaintNow:false,size:null,mousedown:false,dragging:false,focused:false,repeatKeyCount:0,repeatKey:null,repeatKeyStartTime:0,currentKeys:[],hasMouse:false,lastDoubleClickTime:0,dragEndTime:0,lastRepaintTime:0,ready:function(){var self=this;this.dragEndtime=Date.now();this.g=document.createElement("fin-rectangle");this.canvas=this.shadowRoot.querySelector(".canvas");this.focuser=this.shadowRoot.querySelector("button");this.canvasCTX=this.canvas.getContext("2d");this.buffer=document.createElement("canvas");this.bufferCTX=this.buffer.getContext("2d");this.mouseLocation=this.g.point.create(-1,-1);this.dragstart=this.g.point.create(-1,-1);this.bounds=this.g.rectangle.create(0,0,0,0);this.hasMouse=false;this.onmouseover=function(){self.hasMouse=true};document.addEventListener("mousemove",function(e){if(!self.hasMouse&&!self.isDragging()){return}self.finmousemove(e)});document.addEventListener("mouseup",function(e){self.finmouseup(e)});document.addEventListener("wheel",function(e){self.finwheelmoved(e)});this.focuser.addEventListener("focus",function(e){self.finfocusgained(e)});this.focuser.addEventListener("blur",function(e){self.finfocuslost(e)});this.addEventListener("mousedown",function(e){self.finmousedown(e)});this.addEventListener("mouseout",function(e){self.hasMouse=false;self.finmouseout(e)});document.addEventListener("keydown",function(e){self.finkeydown(e)});document.addEventListener("keyup",function(e){self.finkeyup(e)});this.addEventListener("click",function(e){self.finclick(e)});this.addEventListener("contextmenu",function(e){self.fincontextmenu(e)});this.resize();this.beginResizing();this.beginPainting()},stopPaintThread:function(){paintLoopRunning=false},restartPaintThread:function(){if(paintLoopRunning){return}paintLoopRunning=true;requestAnimationFrame(paintLoopFunction)},stopResizeThread:function(){resizeLoopRunning=false},restartResizeThread:function(){if(resizeLoopRunning){return}resizeLoopRunning=true;setInterval(resizablesLoopFunction,200)},detached:function(){this.stopPainting();this.stopResizing()},isHiDPI:function(){return this.getAttribute("hidpi")!==null},useBitBlit:function(){return this.getAttribute("bitblit")!=="false"},getFPS:function(){var fps=this.getAttribute("fps");if(fps===0||!fps){fps=0}fps=parseInt(fps);return fps},getComponent:function(){var comp=this.children[0];return comp},tickPaint:function(now){var fps=this.getFPS();if(fps===0){return}var interval=1e3/fps;var elapsed=now-this.lastRepaintTime;if(elapsed>interval&&this.repaintNow){this.lastRepaintTime=now-elapsed%interval;this.paintNow()}},beginPainting:function(){var self=this;this.repaintNow=true;this.tickPainter=function(now){self.tickPaint(now)};paintables.push(this.tickPainter)},stopPainting:function(){paintables.splice(paintables.indexOf(this.tickPainter),1)},beginResizing:function(){var self=this;this.tickResizer=function(){self.checksize()};resizables.push(this.tickResizer)},stopResizing:function(){resizables.splice(resizables.indexOf(this.tickResizer),1)},checksize:function(){var sizeNow=this.getBoundingClientRect();if(sizeNow.width!==this.size.width||sizeNow.height!==this.size.height){this.sizeChangedNotification()}},sizeChangedNotification:function(){this.resize()},resize:function(){this.size=this.getBoundingClientRect();this.canvas.width=this.clientWidth;this.canvas.height=this.clientHeight;this.buffer.width=this.clientWidth;this.buffer.height=this.clientHeight;var ratio=1;var useBitBlit=this.useBitBlit();var isHIDPI=window.devicePixelRatio&&this.isHiDPI();if(isHIDPI){var devicePixelRatio=window.devicePixelRatio||1;var backingStoreRatio=this.canvasCTX.webkitBackingStorePixelRatio||this.canvasCTX.mozBackingStorePixelRatio||this.canvasCTX.msBackingStorePixelRatio||this.canvasCTX.oBackingStorePixelRatio||this.canvasCTX.backingStorePixelRatio||1;ratio=devicePixelRatio/backingStoreRatio}var width=this.canvas.getAttribute("width");var height=this.canvas.getAttribute("height");this.canvas.width=width*ratio;this.canvas.height=height*ratio;this.buffer.width=width*ratio;this.buffer.height=height*ratio;this.canvas.style.width=width+"px";this.canvas.style.height=height+"px";this.buffer.style.width=width+"px";this.buffer.style.height=height+"px";this.bufferCTX.scale(ratio,ratio);if(isHIDPI&&!useBitBlit){this.canvasCTX.scale(ratio,ratio)}this.bounds=this.g.rectangle.create(0,0,this.size.width,this.size.height);var comp=this.getComponent();if(comp){comp.setBounds(this.bounds)}this.resizeNotification();this.paintNow()},resizeNotification:function(){},getBounds:function(){return this.bounds},paintNow:function(){var self=this;this.safePaintImmediately(function(gc){gc.clearRect(0,0,self.canvas.width,self.canvas.height);self.paint(gc);self.repaintNow=false})},safePaintImmediately:function(paintFunction){var useBitBlit=this.useBitBlit();var gc=useBitBlit?this.bufferCTX:this.canvasCTX;try{gc.save();paintFunction(gc)}finally{gc.restore()}if(useBitBlit){this.flushBuffer()}},flushBuffer:function(){if(this.buffer.width>0&&this.buffer.height>0){this.canvasCTX.drawImage(this.buffer,0,0)}},paint:function(gc){var comp=this.getComponent();if(comp){comp._paint(gc)}},finmousemove:function(e){if(!this.isDragging()&&this.mousedown){this.beDragging();this.dispatchEvent(new CustomEvent("fin-canvas-dragstart",{detail:{primitiveEvent:e,mouse:this.mouseLocation,keys:this.currentKeys,isRightClick:this.isRightClick(e)}}));this.dragstart=this.g.point.create(this.mouseLocation.x,this.mouseLocation.y)}this.mouseLocation=this.getLocal(e);if(this.isDragging()){this.dispatchEvent(new CustomEvent("fin-canvas-drag",{detail:{primitiveEvent:e,mouse:this.mouseLocation,dragstart:this.dragstart,keys:this.currentKeys,isRightClick:this.isRightClick(e)}}))}if(this.bounds.contains(this.mouseLocation)){this.dispatchEvent(new CustomEvent("fin-canvas-mousemove",{detail:{primitiveEvent:e,mouse:this.mouseLocation,keys:this.currentKeys}}))}},finmousedown:function(e){this.mouseLocation=this.getLocal(e);this.mousedown=true;this.dispatchEvent(new CustomEvent("fin-canvas-mousedown",{detail:{primitiveEvent:e,mouse:this.mouseLocation,keys:this.currentKeys,isRightClick:this.isRightClick(e)}}));this.takeFocus()},finmouseup:function(e){if(this.isDragging()){this.dispatchEvent(new CustomEvent("fin-canvas-dragend",{detail:{primitiveEvent:e,mouse:this.mouseLocation,dragstart:this.dragstart,keys:this.currentKeys,isRightClick:this.isRightClick(e)}}));this.beNotDragging();this.dragEndtime=Date.now()}this.mousedown=false;this.dispatchEvent(new CustomEvent("fin-canvas-mouseup",{detail:{primitiveEvent:e,mouse:this.mouseLocation,keys:this.currentKeys,isRightClick:this.isRightClick(e)}}))},finmouseout:function(e){if(!this.mousedown){this.mouseLocation=this.g.point.create(-1,-1)}this.dispatchEvent(new CustomEvent("fin-canvas-mouseout",{detail:{primitiveEvent:e,mouse:this.mouseLocation,keys:this.currentKeys}}))},finwheelmoved:function(e){if(this.isDragging()||!this.hasFocus()){return}e.preventDefault();this.dispatchEvent(new CustomEvent("fin-canvas-wheelmoved",{detail:{mouse:this.mouseLocation,keys:this.currentKeys,primitiveEvent:e,isRightClick:this.isRightClick(e)}}))},finclick:function(e){if(Date.now()-this.lastClickTime<250){this.findblclick(e);return}this.mouseLocation=this.getLocal(e);this.dispatchEvent(new CustomEvent("fin-canvas-click",{detail:{primitiveEvent:e,mouse:this.mouseLocation,keys:this.currentKeys,isRightClick:this.isRightClick(e)}}));this.lastClickTime=Date.now()},finrelease:function(e){this.holdPulseCount=0;this.mouseLocation=this.getLocal(e);this.dispatchEvent(new CustomEvent("fin-canvas-release",{detail:{primitiveEvent:e,mouse:this.mouseLocation,keys:this.currentKeys}}))},finflick:function(e){if(!this.hasFocus()){return}this.mouseLocation=this.getLocal(e);this.dispatchEvent(new CustomEvent("fin-canvas-flick",{detail:{primitiveEvent:e,mouse:this.mouseLocation,keys:this.currentKeys,isRightClick:this.isRightClick(e)}}))},fintrackstart:function(e){if(!this.hasFocus()){return}this.mouseLocation=this.getLocal(e);this.dispatchEvent(new CustomEvent("fin-canvas-trackstart",{detail:{mouse:this.mouseLocation,keys:this.currentKeys,primitiveEvent:e}}))},fintrack:function(e){if(!this.hasFocus()){return}this.mouseLocation=this.getLocal(e);this.dispatchEvent(new CustomEvent("fin-canvas-track",{detail:{mouse:this.mouseLocation,keys:this.currentKeys,primitiveEvent:e}}))},fintrackend:function(e){this.mouseLocation=this.getLocal(e);this.dispatchEvent(new CustomEvent("fin-canvas-trackend",{detail:{mouse:this.mouseLocation,keys:this.currentKeys,primitiveEvent:e}}))},finhold:function(e){this.mouseLocation=this.getLocal(e);this.dispatchEvent(new CustomEvent("fin-canvas-hold",{detail:{primitiveEvent:e,mouse:this.mouseLocation,keys:this.currentKeys,isRightClick:this.isRightClick(e)}}))},finholdpulse:function(e){this.mouseLocation=this.getLocal(e);this.dispatchEvent(new CustomEvent("fin-canvas-holdpulse",{detail:{primitiveEvent:e,mouse:this.mouseLocation,keys:this.currentKeys,count:this.holdPulseCount++}}))},fintap:function(e){var self=this;var now=Date.now();var dif=now-this.lastDoubleClickTime;if(dif<300){return}if(now-this.dragEndtime<100){return}setTimeout(function(){self._fintap(e)},180)},_fintap:function(e){var now=Date.now();var dif=now-this.lastDoubleClickTime;if(dif<300){return}this.mouseLocation=this.getLocal(e);this.dispatchEvent(new CustomEvent("fin-canvas-tap",{detail:{primitiveEvent:e,mouse:this.mouseLocation,keys:this.currentKeys,isRightClick:this.isRightClick(e)}}))},findblclick:function(e){this.mouseLocation=this.getLocal(e);this.lastDoubleClickTime=Date.now();this.dispatchEvent(new CustomEvent("fin-canvas-dblclick",{detail:{primitiveEvent:e,mouse:this.mouseLocation,keys:this.currentKeys,isRightClick:this.isRightClick(e)}}))},getCharMap:function(){return charMap},finkeydown:function(e){if(!this.hasFocus()){return}var charMap=this.getCharMap();var keyChar=e.shiftKey?charMap[e.keyCode][1]:charMap[e.keyCode][0];if(e.repeat){if(this.repeatKey===keyChar){this.repeatKeyCount++}else{this.repeatKey=keyChar;this.repeatKeyStartTime=Date.now()}}else{this.repeatKey=null;this.repeatKeyCount=0;this.repeatKeyStartTime=0}if(this.currentKeys.indexOf(keyChar)===-1){this.currentKeys.push(keyChar)}this.dispatchEvent(new CustomEvent("fin-canvas-keydown",{detail:{primitiveEvent:e,alt:e.altKey,ctrl:e.ctrlKey,"char":keyChar,code:e.charCode,key:e.keyCode,meta:e.metaKey,repeatCount:this.repeatKeyCount,repeatStartTime:this.repeatKeyStartTime,shift:e.shiftKey,identifier:e.keyIdentifier,currentKeys:this.currentKeys.slice(0)}}))},finkeyup:function(e){var keyChar=e.shiftKey?charMap[e.keyCode][1]:charMap[e.keyCode][0];this.currentKeys.splice(this.currentKeys.indexOf(keyChar),1);if(!this.hasFocus()){return}this.repeatKeyCount=0;this.repeatKey=null;this.repeatKeyStartTime=0;this.dispatchEvent(new CustomEvent("fin-canvas-keyup",{detail:{primitiveEvent:e,alt:e.altKey,ctrl:e.ctrlKey,"char":keyChar,code:e.charCode,key:e.keyCode,meta:e.metaKey,repeat:e.repeat,shift:e.shiftKey,identifier:e.keyIdentifier,currentKeys:this.currentKeys.slice(0)}}))},finfocusgained:function(e){this.focused=true;this.dispatchEvent(new CustomEvent("fin-canvas-focus-gained",{detail:{primitiveEvent:e}}))},finfocuslost:function(e){this.focused=false;this.dispatchEvent(new CustomEvent("fin-canvas-focus-lost",{detail:{primitiveEvent:e}}))},fincontextmenu:function(e){if(e.ctrlKey&&this.currentKeys.indexOf("CTRL")===-1){this.currentKeys.push("CTRL")}if(Date.now()-this.lastClickTime<250){this.findblclick(e);return}this.dispatchEvent(new CustomEvent("fin-canvas-context-menu",{detail:{primitiveEvent:e,mouse:this.mouseLocation,keys:this.currentKeys,isRightClick:this.isRightClick(e)}}));this.lastClickTime=Date.now()},repaint:function(){var fps=this.getFPS();this.repaintNow=true;if(!paintLoopRunning||fps===0){this.paintNow()}},getMouseLocation:function(){return this.mouseLocation},getOrigin:function(){var rect=this.getBoundingClientRect();var p=this.g.point.create(rect.left,rect.top);return p},getLocal:function(e){var rect=this.getBoundingClientRect();var p=this.g.point.create((e.x||e.clientX)-rect.left,(e.y||e.clientY)-rect.top);return p},hasFocus:function(){return this.focused},takeFocus:function(){var self=this;if(document.activeElement!==this.focuser){setTimeout(function(){self.focuser.focus()},10)}},beDragging:function(){this.dragging=true;this.disableDocumentElementSelection()},beNotDragging:function(){this.dragging=false;this.enableDocumentElementSelection()},isDragging:function(){return this.dragging},disableDocumentElementSelection:function(){var style=document.body.style;style.cssText=style.cssText+"-webkit-user-select: none"},enableDocumentElementSelection:function(){var style=document.body.style;style.cssText=style.cssText.replace("-webkit-user-select: none","")},setFocusable:function(boolean){if(boolean===true){this.focuser.style.display=""}else{this.focuser.style.display="none"}},isRightClick:function(e){var isRightMB;e=e||window.event;if("which"in e){isRightMB=e.which===3}else if("button"in e){isRightMB=e.button===2}return isRightMB}})})();</script></polymer-element><polymer-element name="fin-hypergrid-dnd-list" attributes="label list" assetpath="/dev/fin-hypergrid-dnd-list/"><template><style type="text/css">:host{display:block;position:relative}*{user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none}.dnd-header{z-index:1;font-family:Roboto,sans-serif;text-transform:capitalize;position:relative;display:flex;flex-direction:row;justify-content:center;align-items:center;width:90%;height:46px;background-color:#00796b;color:#fff;margin-left:5%;box-shadow:0 3px 6px rgba(0,0,0,.16),0 3px 6px rgba(0,0,0,.23);overflow:hidden}.list{background-color:#fff;position:absolute;top:46px;left:5%;right:5%;overflow-y:auto;list-style-type:none;margin:0;padding-top:0;padding-left:0;bottom:10%;box-shadow:0 1px 3px rgba(0,0,0,.12),0 1px 2px rgba(0,0,0,.24)}.controls{position:absolute;display:flex;flex-direction:row;justify-content:center;align-items:center;width:100%;bottom:0;height:10%}.level1{opacity:.7;z-index:2;position:absolute;box-shadow:0 1px 3px rgba(0,0,0,.12),0 1px 2px rgba(0,0,0,.24);-webkit-transform:translate(-2px,-2px);-moz-transform:translate(-2px,-2px);-ms-transform:translate(-2px,-2px);-o-transform:translate(-2px,-2px);transform:translate(-2px,-2px)}.level2{opacity:.7;z-index:2;position:absolute;border:1px solid #e0e0e0;box-shadow:0 3px 6px rgba(0,0,0,.16),0 3px 6px rgba(0,0,0,.23);-webkit-transform:translate(-4px,-4px);-moz-transform:translate(-4px,-4px);-ms-transform:translate(-4px,-4px);-o-transform:translate(-4px,-4px);transform:translate(-4px,-4px)}.level3{opacity:.7;z-index:2;position:absolute;border:1px solid #e0e0e0;box-shadow:0 10px 20px rgba(0,0,0,.19),0 6px 6px rgba(0,0,0,.23);-webkit-transform:translate(-6px,-6px);-moz-transform:translate(-6px,-6px);-ms-transform:translate(-6px,-6px);-o-transform:translate(-6px,-6px);transform:translate(-6px,-6px)}.level4{opacity:.7;z-index:2;position:absolute;border:1px solid #e0e0e0;box-shadow:0 14px 28px rgba(0,0,0,.25),0 10px 10px rgba(0,0,0,.22);-webkit-transform:translate(-8px,-8px);-moz-transform:translate(-8px,-8px);-ms-transform:translate(-8px,-8px);-o-transform:translate(-8px,-8px);transform:translate(-8px,-8px)}.level5{opacity:.7;z-index:2;position:absolute;border:1px solid #e0e0e0;box-shadow:0 19px 38px rgba(0,0,0,.3),0 15px 12px rgba(0,0,0,.22);-webkit-transform:translate(-10px,-10px);-moz-transform:translate(-10px,-10px);-ms-transform:translate(-10px,-10px);-o-transform:translate(-10px,-10px);transform:translate(-10px,-10px)}.spacer{visibility:hidden;overflow:hidden}.transition{transition:height 200ms ease-in}.beSmall{height:0}.beBig{height:51px}</style><div class="font-special toolbar dnd-header">{{title}}</div><ul id="ulist" class="font-special list" touch-action="pan-y" size="3"><template repeat="{{item, i in list}}"><li value="{{idAdapter(i)}}_spacer" class="spacer beSmall"></li><li value="{{idAdapter(i)}}" class="item" style="-moz-user-select: none;-webkit-user-select: none;-ms-user-select: none;user-select:none;white-space:nowrap;line-height: 46px;list-style-type: none;font-family: 'Roboto', sans-serif;border-bottom: 1px solid #e0e0e0;text-transform: capitalize;cursor: move;background-color: white;color: black;"><span style="font-size: 30px;color: #b6b6b6;margin: 8px;position: relative;top: 2px;cursor: move;">
                ⬤
              </span>
              {{labelAdapter(item)}}
            </li></template><li value="last_spacer" class="spacer beSmall"></li></ul></template><script>"use strict";(function(){var noop=function(){};Polymer("fin-hypergrid-dnd-list",{label:"label",id:"id",attached:function(){this.title=this.title||"title";this.list=this.list||[{id:0,label:"list item zero"},{id:1,label:"list item one"},{id:2,label:"list item two"},{id:3,label:"list item three"},{id:4,label:"list item four"},{id:5,label:"list item five"},{id:6,label:"list item six"},{id:7,label:"list item seven"},{id:8,label:"list item eight"},{id:9,label:"list item nine"}];var parent=this.parentElement;var self=this;parent.oncontextmenu=function(){return false};PolymerGestures.addEventListener(this.$.ulist,"trackstart",function(e){var li=e.path[0];if(li.nodeName!=="LI"){return}self.initiateItemDrag(li,e)})},getRowHeights:function(){var bounds=this.$.ulist.getBoundingClientRect();var items=this.$.ulist.querySelectorAll("li.item").array();if(items.length===0){return[0]}var boundries=items.map(function(e){return e.getBoundingClientRect().top-bounds.top});var last=items[items.length-1];boundries.push(boundries[boundries.length-1]+last.getBoundingClientRect().height);boundries[0]=0;return boundries},labelAdapter:function(item){if(typeof item==="object"){return item[this.label]}return item},idAdapter:function(item){if(typeof item==="object"){return item[this.id]}return item},handleDragHoverEnter:function(dragged,x,y){noop(dragged,x,y)},handleDragHoverExit:function(dragged,x,y){noop(dragged,x,y);this.correctItemState()},handleDragOver:function(dragged,x,y){var self=this;var bounds=this.$.ulist.getBoundingClientRect();var boundries=this.getRowHeights();var localY=y-bounds.top;var minValue=1e6;var minIndex=0;for(var i=0;i<boundries.length;i++){var distance=Math.abs(localY-boundries[i]);if(distance<minValue){minIndex=i;minValue=distance}}var overRow=minIndex;if(this.overRow!==overRow){if(this.isTransition){return}this.isTransition=true;var spacers=this.$.ulist.querySelectorAll("li.spacer");if(this.overRow||this.overRow===0){var previous=this.$.ulist.querySelector("li.spacer.beBig");if(previous){previous.classList.add("transition");requestAnimationFrame(function(){previous.classList.remove("beBig");previous.classList.add("beSmall")})}}this.overRow=overRow;var spacer=spacers[overRow];spacer.classList.add("transition");requestAnimationFrame(function(){spacer.classList.remove("beSmall");spacer.classList.add("beBig");setTimeout(function(){spacer.classList.remove("transition");self.isTransition=false},210)})}},handleDrag:function(e){if(!this.dragFodder){return}var dragFodderRect=this.dragFodder.getBoundingClientRect();var cxo=dragFodderRect.width/2;var cyo=dragFodderRect.height/2;var globalX=(e.x||e.clientX)-this.dragEventStart[0];var globalY=(e.y||e.clientY)-this.dragEventStart[1];this.setCssLocation(this.dragFodder.style,globalX,globalY);this.dragFodder.style.display="none";var dropTarget=document.elementFromPoint(globalX+cxo,globalY+cyo);this.dragFodder.style.display="";if(dropTarget&&dropTarget.handleDragOver){if(this.currentDropTarget!==dropTarget){if(!dropTarget.canDropItem(this.list,dropTarget.list,this.dragFodder.sourceIndex,this.dragFodder.dragItem,e)){return}if(this.currentDropTarget){this.currentDropTarget.handleDragHoverExit(this.dragFodder,globalX+cxo,globalY+cyo)}this.currentDropTarget=dropTarget;this.currentDropTarget.handleDragHoverEnter(this.dragFodder,globalX+cxo,globalY+cyo)}dropTarget.handleDragOver(this.dragFodder,globalX+cxo,globalY+cyo)}},handleDrop:function(e){noop(e);var dropTarget=this.currentDropTarget;var dragFodder=this.dragFodder;dropTarget.listItemDropped(dragFodder)},listItemDropped:function(listItem){var self=this;var dropSpacer=this.$.ulist.querySelector("li.spacer.beBig");var items=this.$.ulist.querySelectorAll("li").array();var sourceItem=listItem.dragItem;var insertIndex=items.indexOf(dropSpacer)/2;var targetRect=dropSpacer.getBoundingClientRect();var targetTop=targetRect.top;var targetLeft=targetRect.left;listItem.style.webkitTransition="-webkit-transform 150ms ease-in";listItem.style.MozTransition="-moz-transform 150ms ease-in";listItem.style.msTransition="-ms-transform 150ms ease-in";listItem.style.oTransition="-o-transform 150ms ease-in";listItem.style.transition="transform 150ms ease-in";requestAnimationFrame(function(){self.setCssLocation(listItem.style,targetLeft,targetTop);setTimeout(function(){listItem.parentElement.removeChild(listItem);dropSpacer.classList.remove("beBig");dropSpacer.classList.add("beSmall");self.list.splice(insertIndex,0,sourceItem);self.overRow=undefined},170)})},canDragItem:function(list,item,index,e){noop(list,item,index,e);return true},canDropItem:function(sourceList,myList,sourceIndex,item,e){noop(sourceList,myList,sourceIndex,item,e);return true},initiateItemDrag:function(li,e){li.dragSource=this;li.dragIndex=parseInt(li.getAttribute("value"));li.dragItem=this.list[li.dragIndex];if(!this.canDragItem(this.list,li.dragItem,li.dragIndex,e)){return}this.overRow=undefined;var transitions=this.$.ulist.querySelectorAll(".transition").array();transitions.forEach(function(e){e.classList.remove("transition")});e.preventDefault();var goAwayer=li.nextElementSibling;var bounds=li.getBoundingClientRect();var self=this;var parent=this.$.ulist;var parentBounds=parent.getBoundingClientRect();li.style.width=parentBounds.width+"px";this.list.splice(li.dragIndex,1);this.dragFodder=li;this.dragEventStart=[(e.x||e.clientX)-bounds.left,(e.y||e.clientY)-bounds.top];goAwayer.classList.add("beBig");goAwayer.classList.remove("beSmall");document.body.appendChild(li);PolymerGestures.addEventListener(li,"track",function(e){self.handleDrag(e)});PolymerGestures.addEventListener(li,"trackend",function(e){self.handleDrop(e)});requestAnimationFrame(function(){setTimeout(function(){goAwayer.classList.remove("transition")},210)})},setCssLocation:function(style,x,y){style.position="fixed";style.zIndex=10;style.top=0;style.left=0;style.webkitTransform="translate("+x+"px, "+y+"px)";style.MozTransform="translate("+x+"px, "+y+"px)";style.mmsTransform="translate("+x+"px, "+y+"px)";style.oTransform="translate("+x+"px, "+y+"px)";style.transform="translate("+x+"px, "+y+"px)";style.border="1px solid #bbbbbb";style.boxShadow="0 10px 20px rgba(0,0,0,0.19), 0 6px 6px rgba(0,0,0,0.23)"},correctItemState:function(){var self=this;var spacer=this.$.ulist.querySelector("li.spacer.beBig");if(spacer){requestAnimationFrame(function(){spacer.classList.remove("beBig");spacer.classList.add("beSmall");spacer.classList.add("transition");setTimeout(function(){spacer.classList.remove("transition");self.overRow=undefined},210)})}}})})();</script></polymer-element><polymer-element name="fin-hypergrid-behavior-base" attributes="" assetpath="/dev/fin-hypergrid/polymer/html/behaviors/"><template><style type="text/css">:host{display:block;position:relative}</style></template><script>"use strict";(function(){var features=fin.hypergrid.features;var hypergrid=fin.hypergrid;function DataModelDecorator(grid,component){this.setComponent(component);this.setGrid(grid)}DataModelDecorator.prototype={component:null,grid:null,getGrid:function(){return this.grid},setGrid:function(newGrid){this.grid=newGrid;this.getComponent().setGrid(newGrid)},getBehavior:function(){return this.getGrid().getBehavior()},changed:function(){this.getBehavior().changed()},getPrivateState:function(){return this.getGrid().getPrivateState()},applyState:function(){},setComponent:function(newComponent){this.component=newComponent},getComponent:function(){return this.component},setGlobalFilter:function(string){return this.getComponent().setGlobalFilter(string)},getValue:function(x,y){return this.getComponent().getValue(x,y)},setValue:function(x,y,value){this.getComponent().setValue(x,y,value)},getColumnCount:function(){return this.getComponent().getColumnCount()},getRowCount:function(){return this.getComponent().getRowCount()},getCellRenderer:function(config,x,y,untranslatedX,untranslatedY){return this.getComponent().getCellRenderer(config,x,y,untranslatedX,untranslatedY)},getRowHeight:function(y){return this.getComponent().getRowHeight(y)},getColumnEdge:function(x,renderer){return this.getComponent().getColumnEdge(x,renderer)},getColumnWidth:function(x){return this.getComponent().getColumnWidth(x)},setColumnWidth:function(x,width){this.getComponent().setColumnWidth(x,width)},toggleSort:function(x,keys){this.getComponent().toggleSort(x,keys)},getColumnProperties:function(columnIndex){return this.getComponent().getColumnProperties(columnIndex)},setColumnProperties:function(columnIndex,properties){this.getComponent().setColumnProperties(columnIndex,properties)},getHeaders:function(){return this.getComponent().getHeaders()},getFields:function(){return this.getComponent().getFields()},setFields:function(fields){this.getComponent().setFields(fields)},getCellProperties:function(x,y){return this.getComponent().getCellProperties(x,y)},setCellProperties:function(x,y,value){this.getComponent().setCellProperties(x,y,value)},getRow:function(y){return this.getComponent().getRow(y)},setTopTotals:function(nestedArray){this.getComponent().setTopTotals(nestedArray)},getTopTotals:function(){return this.getComponent().getTopTotals()},setData:function(y){return this.getComponent().setData(y)},hasHierarchyColumn:function(){return this.getComponent().hasHierarchyColumn()},setHeaders:function(headerLabels){return this.getComponent().setHeaders(headerLabels)},cellClicked:function(cell,event){return this.getComponent().cellClicked(cell,event)},getAvailableGroups:function(){return this.getComponent().getAvailableGroups()},getGroups:function(){return this.getComponent().getGroups()},setGroups:function(groups){this.getComponent().setGroups(groups)},getHiddenColumns:function(){return this.getComponent().getHiddenColumns()},getVisibleColumns:function(){return this.getComponent().getVisibleColumns()},setAggregates:function(aggregates){return this.getComponent().setAggregates(aggregates)}};function Column(behavior,index,label){this.behavior=behavior;this.dataModel=behavior.getDataModel();this.index=index;this.label=label}Column.prototype={getValue:function(y){return this.dataModel.getValue(this.index,y)},setValue:function(y,value){return this.dataModel.setValue(this.index,y,value)},getWidth:function(){var override=this.getProperties().width;if(override){return override}return this.behavior.resolveProperty("defaultColumnWidth")},setWidth:function(width){this.getProperties().width=Math.max(5,width)},getCellRenderer:function(config,y){return this.dataModel.getCellRenderer(config,this.index,y)},getCellProperties:function(y){return this.behavior.getPrivateState().cellProperties[this.index+","+y]},setCellProperties:function(y,value){this.behavior.getPrivateState().cellProperties[this.index+","+y]=value},checkColumnAutosizing:function(force){var properties=this.getProperties();var a,b,d;if(properties){a=properties.width;b=properties.preferredWidth||properties.width;d=properties.columnAutosized&&!force;if(a!==b||!d){properties.width=!d?b:Math.max(a,b);properties.columnAutosized=!isNaN(properties.width)}}},getProperties:function(){return this.behavior.getPrivateState().columnProperties[this.index]},setProperties:function(properties){var current=this.behavior.getPrivateState().columnProperties[this.index];clearObjectProperties(current,noExportProperties);merge(current,properties)},toggleSort:function(keys){this.dataModel.toggleSort(this.index,keys)},getCellEditorAt:function(x,y){return this.dataModel.getCellEditorAt(this.index,y)},getHeader:function(){return this.label},getField:function(){return this.dataModel.getFields()[this.index]}};var noop=function(){};var noExportProperties=["columnHeader","columnHeaderColumnSelection","filterProperties","rowHeader","rowHeaderRowSelection","rowNumbersProperties","treeColumnProperties","treeColumnPropertiesColumnSelection"];var merge=function(target,source){for(var key in source){if(source.hasOwnProperty(key)){target[key]=source[key]}}};var clearObjectProperties=function(obj,except){for(var prop in obj){if(obj.hasOwnProperty(prop)&&except.indexOf(prop)===-1){delete obj[prop]}}};var imageCache={};var imgData=[["1-abs-down","iVBORw0KGgoAAAANSUhEUgAAAA4AAAAKCAYAAACE2W/HAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAOwgAADsIBFShKgAAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMC41ZYUyZQAAAFFJREFUKFNjQAL/oTTD////CWJkgFMjEAgD8Q4gLkMSgwOsGoGgDCQExcRrRFJImo1ICqmnEUSiYJgkMgYCrDYia8TQBFVIJ6cCAXJ0QDGDDQD67OYX9wdp0wAAAABJRU5ErkJggg=="],["1-abs-up","iVBORw0KGgoAAAANSUhEUgAAAA4AAAAKCAYAAACE2W/HAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAOwgAADsIBFShKgAAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMC41ZYUyZQAAAExJREFUKFPtjYEJACAIBN2hdZqr2dqu3tB8C5qghzPxlAQZJ4iWJ9E8DpACOmh7ZkLLwoWDNPJxSMONSwa5fzSBJy8z/9B6RpfVZaRO2oo/zJVRDvIAAAAASUVORK5CYII="],["1-down","iVBORw0KGgoAAAANSUhEUgAAAA4AAAAKCAYAAACE2W/HAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAOwgAADsIBFShKgAAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMC41ZYUyZQAAAGtJREFUKFOtjoEJgDAQA6uiC7iOc3U2t3sT6Uu+XxDBwFliEtoisnYWM3vFtQG6mWZQ2sEJqvy7tQC6FUzdqLaMpCH1OB1KcXgjBZ8HDhSHEuCIZeW/IcRvwEMFyjey7HjQA317KsvMIuW4AFTUEgvs+3wkAAAAAElFTkSuQmCC"],["1-up","iVBORw0KGgoAAAANSUhEUgAAAA4AAAAKCAYAAACE2W/HAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAadEVYdFNvZnR3YXJlAFBhaW50Lk5FVCB2My41LjExR/NCNwAAAFBJREFUKFPtjdsNQCEIQ93BdZzL2dwOjw9CuV93AEmOJbYNxcw2DHL2P5wHcdR0mAoDuvxFyXHzBrp4UZQAEoUvTL4oBpLDyiveXVnh5WVKm6iPR8RbHxLhAAAAAElFTkSuQmCC"],["2-abs-down","iVBORw0KGgoAAAANSUhEUgAAAA4AAAAKCAYAAACE2W/HAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAOwgAADsIBFShKgAAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMC41ZYUyZQAAAH5JREFUKFOVkAsNgDAMROcBBxjAAEJwgAMcYGGmsIAGLJS7piE3FjJ2yRvpxus+SWLxTWbWRFOJyAgyuDgNDjD9EWewAzZgvElTVCJshLJfXED3jjwu77pG7UKBCvHTAPgwWeY8Kn5KLN4i81SyyOOdgHfzqMixQBb9FWvSdgNN871AHwblVAAAAABJRU5ErkJggg=="],["2-abs-up","iVBORw0KGgoAAAANSUhEUgAAAA4AAAAKCAYAAACE2W/HAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAOwgAADsIBFShKgAAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMC41ZYUyZQAAAJVJREFUKFN9kAEVgzAMRPEwBzOAgQnBwRzgYBZqCgtowAL7l6VtILB77zc01yttB7SfQRr+0j8uAugJBTb5sMBoni/QYNSQ91/wAW0g2Sbu9VAlhisubcSUeTCscYdrgt8fg0HJgQrScXXXt82DQckBgR6ghymtF0zKMSBQC2nS+mEBJYV0vBV0N1PzwiJKCtorZob5Cy2RFvXFQAKlAAAAAElFTkSuQmCC"],["2-down","iVBORw0KGgoAAAANSUhEUgAAAA4AAAAKCAYAAACE2W/HAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAOwgAADsIBFShKgAAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMC41ZYUyZQAAAJtJREFUKFOFkAsNAjEQRAsXMIADDJwBhOAABzjAwpnCAhqwUN4s2zJQCJO8bGa3018x1ayl1vqXpi3IrWVsuIcF7mrDFWYPTiC3gZUFD3ABbSDFJh6UumtBJ6WNsB/BtugbqSM8T7QBZQw0kK6rt57C24AyBgTagT5msV687Y02zAU9JNP7OfwV0vVuoLeF+swWUV6h7MUvjpTzA6fM6SVV2CbgAAAAAElFTkSuQmCC"],["2-up","iVBORw0KGgoAAAANSUhEUgAAAA4AAAAKCAYAAACE2W/HAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAadEVYdFNvZnR3YXJlAFBhaW50Lk5FVCB2My41LjExR/NCNwAAAIxJREFUKFOVkFsRgDAMBOsBBxjAAEJwgAMcYAFTWEADFspe+iDQH8jMcrSX6yvEGA0KSf9fSB+k8DBD6GGDUx7sMGTvDhVccIQVtIDKFjHPNSH3bm9yaSGG/4MT/N5Rx9VdZxs7A2kDgupAD7PVOWciz4CgakiDOu8akCak4x2gu1lVzzUhTdBesSUsF/uHHu110bZRAAAAAElFTkSuQmCC"],["3-abs-down","iVBORw0KGgoAAAANSUhEUgAAAA4AAAAKCAYAAACE2W/HAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAOwgAADsIBFShKgAAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMC41ZYUyZQAAAJVJREFUKFONkQENhDAMRecBB2cAAyhAwTnAAQ6wgAa8nIXTcBbGf6NduiyEe8ljadlfOkiBbGvKOT8a6YLiJXf5oy2/8v1PcJKb5ABYJS+8LnTBqMFBFGOpjKfgIBl7t7pyGxQ+InecPcizMYZ8kzFLGnXUGLwLOTS5a6XuCqFFMib3A2p+Tfmq7GgMQU4+vC8/Vy+lEzGdowwHiWM2AAAAAElFTkSuQmCC"],["3-abs-up","iVBORw0KGgoAAAANSUhEUgAAAA4AAAAKCAYAAACE2W/HAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAOwgAADsIBFShKgAAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMC41ZYUyZQAAAJtJREFUKFOFkQERwjAMResBBzOAgSmYAhzgAAdYmAa8YAENWID3SgM5soN/95om6e+lW0OPb5DLTz6bDQOaYIW7fbjBoffGAZdOmEZ9hjN4gTqBjZ6/TUE2B0NeZLLPDUI1BGgHjr32PDUI1SAoRvSNS6+lJqGaJGkBC/9H3ZDFOR8gFNMRHNP3KXN/zZQPEYrRr3ixN7i+aq09ARE7/LLO8L26AAAAAElFTkSuQmCC"],["3-down","iVBORw0KGgoAAAANSUhEUgAAAA4AAAAKCAYAAACE2W/HAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAOwgAADsIBFShKgAAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMC41ZYUyZQAAAKdJREFUKFN1kQERwjAMRQscGMDBDGBgCqYABzjAARamAS9YQAMWyn8hodlt/Xfv0p80uXQrSdXjX7XWLqGTwO3NNQ1iFh9B/S2uufEgcEexI+EaxUMwAN0F98Kb2hjXxmoMwlzMuVRfviMjnQVrz+ZTQWHdAFKsyBsny6WiwroJkiZBwlblsKDTFCI5RrHXdBOsyfsQnl8z5EsKrclzfMUnNef1y5XyBYgdtwl+Lm+LAAAAAElFTkSuQmCC"],["3-up","iVBORw0KGgoAAAANSUhEUgAAAA4AAAAKCAYAAACE2W/HAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAadEVYdFNvZnR3YXJlAFBhaW50Lk5FVCB2My41LjExR/NCNwAAAJpJREFUKFONkQsRwjAQBeMBBzWAgSqoAhzgAAdYqAa8YAENWAi7+cAx6UDfzPaae32ZS5pyzgVEqe97qA9K58tMaYIVnnrwgFPzPqFOCM5wBTdQF9CY4u7vwBZNbuTiGA3KGOigAzj2WtbBoIwBQX1Ez7iUXjApY0iCFrDxf9QN2ZzjB5QhdAbH9HzKtb/m960ib/Gm17jXXkov3zEEuQ7h10oAAAAASUVORK5CYII="],["back","iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAD8GlDQ1BJQ0MgUHJvZmlsZQAAOI2NVd1v21QUP4lvXKQWP6Cxjg4Vi69VU1u5GxqtxgZJk6XpQhq5zdgqpMl1bhpT1za2021Vn/YCbwz4A4CyBx6QeEIaDMT2su0BtElTQRXVJKQ9dNpAaJP2gqpwrq9Tu13GuJGvfznndz7v0TVAx1ea45hJGWDe8l01n5GPn5iWO1YhCc9BJ/RAp6Z7TrpcLgIuxoVH1sNfIcHeNwfa6/9zdVappwMknkJsVz19HvFpgJSpO64PIN5G+fAp30Hc8TziHS4miFhheJbjLMMzHB8POFPqKGKWi6TXtSriJcT9MzH5bAzzHIK1I08t6hq6zHpRdu2aYdJYuk9Q/881bzZa8Xrx6fLmJo/iu4/VXnfH1BB/rmu5ScQvI77m+BkmfxXxvcZcJY14L0DymZp7pML5yTcW61PvIN6JuGr4halQvmjNlCa4bXJ5zj6qhpxrujeKPYMXEd+q00KR5yNAlWZzrF+Ie+uNsdC/MO4tTOZafhbroyXuR3Df08bLiHsQf+ja6gTPWVimZl7l/oUrjl8OcxDWLbNU5D6JRL2gxkDu16fGuC054OMhclsyXTOOFEL+kmMGs4i5kfNuQ62EnBuam8tzP+Q+tSqhz9SuqpZlvR1EfBiOJTSgYMMM7jpYsAEyqJCHDL4dcFFTAwNMlFDUUpQYiadhDmXteeWAw3HEmA2s15k1RmnP4RHuhBybdBOF7MfnICmSQ2SYjIBM3iRvkcMki9IRcnDTthyLz2Ld2fTzPjTQK+Mdg8y5nkZfFO+se9LQr3/09xZr+5GcaSufeAfAww60mAPx+q8u/bAr8rFCLrx7s+vqEkw8qb+p26n11Aruq6m1iJH6PbWGv1VIY25mkNE8PkaQhxfLIF7DZXx80HD/A3l2jLclYs061xNpWCfoB6WHJTjbH0mV35Q/lRXlC+W8cndbl9t2SfhU+Fb4UfhO+F74GWThknBZ+Em4InwjXIyd1ePnY/Psg3pb1TJNu15TMKWMtFt6ScpKL0ivSMXIn9QtDUlj0h7U7N48t3i8eC0GnMC91dX2sTivgloDTgUVeEGHLTizbf5Da9JLhkhh29QOs1luMcScmBXTIIt7xRFxSBxnuJWfuAd1I7jntkyd/pgKaIwVr3MgmDo2q8x6IdB5QH162mcX7ajtnHGN2bov71OU1+U0fqqoXLD0wX5ZM005UHmySz3qLtDqILDvIL+iH6jB9y2x83ok898GOPQX3lk3Itl0A+BrD6D7tUjWh3fis58BXDigN9yF8M5PJH4B8Gr79/F/XRm8m241mw/wvur4BGDj42bzn+Vmc+NL9L8GcMn8F1kAcXgSteGGAAABUUlEQVQ4EWNgGLQgZY12e9oa/S/YHIgsx4JNQdwirXaG/4zljEyMjOjy6HJM6ArCJmr0CQjyVBgr2DH++fMXRRqbHIoLfOpU5nELMyfKCasy/Pv/h+H3d4QBuOTgLnDIkl/CI8aSqCCtyPDmywuGb78+Mfz6+g/sAnxyYBdYREs/4pNklRVX4Gd49u4Jw////xk4WTkZfn35x4BPDmQ62AW/f/y/+Pvbf4YfP38y/Prxh+HX9z8MX359ZvgJdAE+ObgBZ98+C3xx7dva+8c/MTCzMTL8+/ef4fvPbww/P/1hwCcHN4DhAMOf8xufh7y8/m3Vw2NfGFjYmRi+//gBDMT/DHjlgCagxMLFrS/C9f5I/Pz393+srCk3PBBBNuGSQzEApPDSzhdxmn8k/v37yxD/+wckFkDiIIBPDqICidR0EJ2t7y0J9AMmwCeHqZrWIgAZ4PYDxftGYgAAAABJRU5ErkJggg=="],["expand","iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAOwgAADsIBFShKgAAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMC41ZYUyZQAAAQ9JREFUOE9jcIoq/Y+MgYCBFAw2AMahmQEK7UL/kTGyHFFeAGkKOmoLxhgGIHNwYZCm0JMOYIzVACCAC2JzEUhTxFlnMCboAmRvIBsQc8kNjPG6AETjMiD+micYE+UCZAwSA2lKvuUDxnhdgIwLNqWDFcNw+n1/MEYWK9iYjqoJhGE2O8QU/FdplPsfesL+f9bjIBQMErOaqgtUjuYCEA1zNghbpyT815wgBbY570Xo/9znof/T7vn/V++X+N93sB2iB6YYhpENALFBCs2XqP0veB0OxiA2TDMIo2gGYZgXYBgkFrjQ7X/AAWsIXuAKFoNhFM34sN5Ehf8g/Pj9QyAXIY6iCB8GORvZ6RD8nwEA/ZSbmLCRhEoAAAAASUVORK5CYII="],["forth","iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAB3RJTUUH1wkbCxU7wwzUCQAAAAlwSFlzAAAewQAAHsEBw2lUUwAAAARnQU1BAACxjwv8YQUAAACcUExURQAAADhUH3CvOHa3O2igNDZRHl2OLzhUHztYIFF7Kj5dIUBgIkNlJEhtJXi4Pna2Oz1cIUNlJEhtJk94KVF8KlN/K1SBK1WCLFaELVqJLlyOL1+SMGOYMmmiNGmjNG+sN2+tN3GvOHKwOHKxOXOzOXS0OnS1OnW2O3e3PXi4Pn28RH+9RoC+R4bCUInDVJHHXpvMa5zNbqTReabSfVhfgkQAAAAQdFJOUwAEh4eOm56goqSprLPi9P64yPeoAAAAZklEQVQY043FRwKCMAAAwUVAqVYUpAjYY6P9/29eAuSmcxn4ba6rAWIxUQIu3dMYA/K2OU6HgEP9qTK7D0iru3glvgyI3+VJ7D0ZsHsUt8jVZMDmeg6dIWBdbq0xYBXMlIClqfaHL3HSC6GZKibEAAAAAElFTkSuQmCC"],["up","iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAD8GlDQ1BJQ0MgUHJvZmlsZQAAOI2NVd1v21QUP4lvXKQWP6Cxjg4Vi69VU1u5GxqtxgZJk6XpQhq5zdgqpMl1bhpT1za2021Vn/YCbwz4A4CyBx6QeEIaDMT2su0BtElTQRXVJKQ9dNpAaJP2gqpwrq9Tu13GuJGvfznndz7v0TVAx1ea45hJGWDe8l01n5GPn5iWO1YhCc9BJ/RAp6Z7TrpcLgIuxoVH1sNfIcHeNwfa6/9zdVappwMknkJsVz19HvFpgJSpO64PIN5G+fAp30Hc8TziHS4miFhheJbjLMMzHB8POFPqKGKWi6TXtSriJcT9MzH5bAzzHIK1I08t6hq6zHpRdu2aYdJYuk9Q/881bzZa8Xrx6fLmJo/iu4/VXnfH1BB/rmu5ScQvI77m+BkmfxXxvcZcJY14L0DymZp7pML5yTcW61PvIN6JuGr4halQvmjNlCa4bXJ5zj6qhpxrujeKPYMXEd+q00KR5yNAlWZzrF+Ie+uNsdC/MO4tTOZafhbroyXuR3Df08bLiHsQf+ja6gTPWVimZl7l/oUrjl8OcxDWLbNU5D6JRL2gxkDu16fGuC054OMhclsyXTOOFEL+kmMGs4i5kfNuQ62EnBuam8tzP+Q+tSqhz9SuqpZlvR1EfBiOJTSgYMMM7jpYsAEyqJCHDL4dcFFTAwNMlFDUUpQYiadhDmXteeWAw3HEmA2s15k1RmnP4RHuhBybdBOF7MfnICmSQ2SYjIBM3iRvkcMki9IRcnDTthyLz2Ld2fTzPjTQK+Mdg8y5nkZfFO+se9LQr3/09xZr+5GcaSufeAfAww60mAPx+q8u/bAr8rFCLrx7s+vqEkw8qb+p26n11Aruq6m1iJH6PbWGv1VIY25mkNE8PkaQhxfLIF7DZXx80HD/A3l2jLclYs061xNpWCfoB6WHJTjbH0mV35Q/lRXlC+W8cndbl9t2SfhU+Fb4UfhO+F74GWThknBZ+Em4InwjXIyd1ePnY/Psg3pb1TJNu15TMKWMtFt6ScpKL0ivSMXIn9QtDUlj0h7U7N48t3i8eC0GnMC91dX2sTivgloDTgUVeEGHLTizbf5Da9JLhkhh29QOs1luMcScmBXTIIt7xRFxSBxnuJWfuAd1I7jntkyd/pgKaIwVr3MgmDo2q8x6IdB5QH162mcX7ajtnHGN2bov71OU1+U0fqqoXLD0wX5ZM005UHmySz3qLtDqILDvIL+iH6jB9y2x83ok898GOPQX3lk3Itl0A+BrD6D7tUjWh3fis58BXDigN9yF8M5PJH4B8Gr79/F/XRm8m241mw/wvur4BGDj42bzn+Vmc+NL9L8GcMn8F1kAcXgSteGGAAABVUlEQVQ4EWNgoDWouVD5H58dTPgkHU7o/D/9YzM+JbjldLdI/T/6f8r/Bf8T/quvlsLpCkZsRqgtlPo/La6K4dSfLQzfv/1k4ORiZ1iw7BLDrfhnGOoxBCCaC4GajzF8+PYBbj47kLVy+Q2GWxnPUfSghIHhQlWgzYUMTxjuAm2GaP4PdAEI/wDi8EgNBu0Z8ijegZtmsdD4/8vvtxlYuVgZFNWEGOyNdcAuAGn+DrT9yPL7DO+/fwW7SJBTluFC0VWwXhaYG0/En4Ubxr2a57+yuSbD4W8HwNKcQPLL918MD6s/gdU8ZLgK08aA4gW46LffDN9/A+39+hOMQS5ghUuiMrAbAFbzneEHkAZhkEG/wAywBAqB1YBf3/8DAxGHDhTtDAzwMEAWZ+NkZPjO/YOBA+R2EACGHRsHhIlOYjXg8akvDBPvbGP4BTTgP8wQdJ2Dhg8A9SSD4ETIHK4AAAAASUVORK5CYII="],["down","iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAD8GlDQ1BJQ0MgUHJvZmlsZQAAOI2NVd1v21QUP4lvXKQWP6Cxjg4Vi69VU1u5GxqtxgZJk6XpQhq5zdgqpMl1bhpT1za2021Vn/YCbwz4A4CyBx6QeEIaDMT2su0BtElTQRXVJKQ9dNpAaJP2gqpwrq9Tu13GuJGvfznndz7v0TVAx1ea45hJGWDe8l01n5GPn5iWO1YhCc9BJ/RAp6Z7TrpcLgIuxoVH1sNfIcHeNwfa6/9zdVappwMknkJsVz19HvFpgJSpO64PIN5G+fAp30Hc8TziHS4miFhheJbjLMMzHB8POFPqKGKWi6TXtSriJcT9MzH5bAzzHIK1I08t6hq6zHpRdu2aYdJYuk9Q/881bzZa8Xrx6fLmJo/iu4/VXnfH1BB/rmu5ScQvI77m+BkmfxXxvcZcJY14L0DymZp7pML5yTcW61PvIN6JuGr4halQvmjNlCa4bXJ5zj6qhpxrujeKPYMXEd+q00KR5yNAlWZzrF+Ie+uNsdC/MO4tTOZafhbroyXuR3Df08bLiHsQf+ja6gTPWVimZl7l/oUrjl8OcxDWLbNU5D6JRL2gxkDu16fGuC054OMhclsyXTOOFEL+kmMGs4i5kfNuQ62EnBuam8tzP+Q+tSqhz9SuqpZlvR1EfBiOJTSgYMMM7jpYsAEyqJCHDL4dcFFTAwNMlFDUUpQYiadhDmXteeWAw3HEmA2s15k1RmnP4RHuhBybdBOF7MfnICmSQ2SYjIBM3iRvkcMki9IRcnDTthyLz2Ld2fTzPjTQK+Mdg8y5nkZfFO+se9LQr3/09xZr+5GcaSufeAfAww60mAPx+q8u/bAr8rFCLrx7s+vqEkw8qb+p26n11Aruq6m1iJH6PbWGv1VIY25mkNE8PkaQhxfLIF7DZXx80HD/A3l2jLclYs061xNpWCfoB6WHJTjbH0mV35Q/lRXlC+W8cndbl9t2SfhU+Fb4UfhO+F74GWThknBZ+Em4InwjXIyd1ePnY/Psg3pb1TJNu15TMKWMtFt6ScpKL0ivSMXIn9QtDUlj0h7U7N48t3i8eC0GnMC91dX2sTivgloDTgUVeEGHLTizbf5Da9JLhkhh29QOs1luMcScmBXTIIt7xRFxSBxnuJWfuAd1I7jntkyd/pgKaIwVr3MgmDo2q8x6IdB5QH162mcX7ajtnHGN2bov71OU1+U0fqqoXLD0wX5ZM005UHmySz3qLtDqILDvIL+iH6jB9y2x83ok898GOPQX3lk3Itl0A+BrD6D7tUjWh3fis58BXDigN9yF8M5PJH4B8Gr79/F/XRm8m241mw/wvur4BGDj42bzn+Vmc+NL9L8GcMn8F1kAcXgSteGGAAABV0lEQVQ4EWNgGGjAiM0BItl8/7mFGBh+fWdg+A/EMPBi6icM9SwwSWRa1oyHITbKjuHem9sQ4a8MDHtXPmB4gawIysZqwK/v/xk4v3Iw/ABqBAEOIP71A8zEIJgwRIACbJyMDJxcIG2EAVYXQLRxgm0Gs7nZGdhwmIfdAC5WBk5WTgYGoEYQALIYfoNZmATcAIuFxv9ffr/NwArULCbLxnD3z3UGLi52hv/ffjKAIoKHk41BvpXvP8gIQU5ZhgtFV8ExghIthgtV/3fHpTE8YbjLcPfTTYafQMUgA2CAA2jguuX3GK5mPITrgzNgitQWSv2fFlfIcOrPMYYP3z7AhBlAnlm5/AbDrYznKHowYuFW/DPGrEX9DGYszgwCQBtBGkH0yg03MTTDTcfG0N0i9f/o/yn/F/xP+K++Wgrsd2zq8Io5nND57w7EeBURkqy5UEmZAYQsAADbOWDTAxBmkQAAAABJRU5ErkJggg=="],["pause","iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAB3klEQVQ4jX2Tz0sbURzE3wY8xH+j3i1evBSrUhpRQUwURfxZIirEEiF4k1iqYC/VFjwI4smYlBaClqIHqTFojKmmZq2godgWvejBQgV/RqZvNuERYtYHA8PM7Of0XSH4LFIeKZ/UXEb0rx7IC0XWK5XyC6vm14KWgHZlyG8JSlnlRzm5ls5rswFlBr3bFq7Ez9QW/qR+oCZsAzOqJlwlsz3ZbYMbI7fnAvxiyK33IHm3gV93OxjU3ZCZl6L/LTN2br2X+ZBwZAOepgEv9W7s3YaQTEXh0fvTgIDw0idTm7JbBTcGoCEPwJXoQvx6EbvXXzGQ6FMA+t2bFaNzJV6YA3q/t2H94iNilwvo33EqAH3s8jMiF5/AjSnAGW/G8r8ZhM5n0RdvVwD60LnP6LgxBXRu2TF/No4vfyfh3G5WAHpm82cT4MYU0Bqrhe/Ei8DJCDq+1SsA/YfTUdkNgxtTQFP0OaaO3Jg+9qAlWq0A9MzYcXMfkLkDR6Qcbw87MXHoRGPkmboDembsHJGKPHeQAdStPcHrAztGDxpRv1amAPTM2HGTHyDPs3jpEcb22/Bmvx2Pl4rUKdMzY8fN/VMuMQBWSQ5qAXFF0fMHM81tIud1SL2Tep8RveuBvCD92X9NeXkWOHF72gAAAABJRU5ErkJggg=="],["play","iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABGdBTUEAANjr9RwUqgAAACBjSFJNAACHDwAAjA0AAPmTAACE5QAAe4IAAOt1AAA/tAAAIlh1a16cAAAD8GlDQ1BJQ0MgUHJvZmlsZQAASMeNVd1v21QUP4lvXKQWP6Cxjg4Vi69VU1u5GxqtxgZJk6XpQhq5zdgqpMl1bhpT1za2021Vn/YCbwz4A4CyBx6QeEIaDMT2su0BtElTQRXVJKQ9dNpAaJP2gqpwrq9Tu13GuJGvfznndz7v0TVAx1ea45hJGWDe8l01n5GPn5iWO1YhCc9BJ/RAp6Z7TrpcLgIuxoVH1sNfIcHeNwfa6/9zdVappwMknkJsVz19HvFpgJSpO64PIN5G+fAp30Hc8TziHS4miFhheJbjLMMzHB8POFPqKGKWi6TXtSriJcT9MzH5bAzzHIK1I08t6hq6zHpRdu2aYdJYuk9Q/881bzZa8Xrx6fLmJo/iu4/VXnfH1BB/rmu5ScQvI77m+BkmfxXxvcZcJY14L0DymZp7pML5yTcW61PvIN6JuGr4halQvmjNlCa4bXJ5zj6qhpxrujeKPYMXEd+q00KR5yNAlWZzrF+Ie+uNsdC/MO4tTOZafhbroyXuR3Df08bLiHsQf+ja6gTPWVimZl7l/oUrjl8OcxDWLbNU5D6JRL2gxkDu16fGuC054OMhclsyXTOOFEL+kmMGs4i5kfNuQ62EnBuam8tzP+Q+tSqhz9SuqpZlvR1EfBiOJTSgYMMM7jpYsAEyqJCHDL4dcFFTAwNMlFDUUpQYiadhDmXteeWAw3HEmA2s15k1RmnP4RHuhBybdBOF7MfnICmSQ2SYjIBM3iRvkcMki9IRcnDTthyLz2Ld2fTzPjTQK+Mdg8y5nkZfFO+se9LQr3/09xZr+5GcaSufeAfAww60mAPx+q8u/bAr8rFCLrx7s+vqEkw8qb+p26n11Aruq6m1iJH6PbWGv1VIY25mkNE8PkaQhxfLIF7DZXx80HD/A3l2jLclYs061xNpWCfoB6WHJTjbH0mV35Q/lRXlC+W8cndbl9t2SfhU+Fb4UfhO+F74GWThknBZ+Em4InwjXIyd1ePnY/Psg3pb1TJNu15TMKWMtFt6ScpKL0ivSMXIn9QtDUlj0h7U7N48t3i8eC0GnMC91dX2sTivgloDTgUVeEGHLTizbf5Da9JLhkhh29QOs1luMcScmBXTIIt7xRFxSBxnuJWfuAd1I7jntkyd/pgKaIwVr3MgmDo2q8x6IdB5QH162mcX7ajtnHGN2bov71OU1+U0fqqoXLD0wX5ZM005UHmySz3qLtDqILDvIL+iH6jB9y2x83ok898GOPQX3lk3Itl0A+BrD6D7tUjWh3fis58BXDigN9yF8M5PJH4B8Gr79/F/XRm8m241mw/wvur4BGDj42bzn+Vmc+NL9L8GcMn8F1kAcXhLu7iPAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAGHRFWHRTb2Z0d2FyZQBwYWludC5uZXQgNC4wLjVlhTJlAAABPElEQVQ4T2MAgaoTYuJgBrmg+rhcXupCmf9Fe2TDoUKkgYpDChkgA+pOKf4v2il3qWC3pCZUijhQBjUg6Kjt/9CTDv+rDiv8z9skuzRhPgMHVAl+ULwX1YCIs87/Yy65/S/erfA/Z71MGVQZblC4SxarAfHXPP8n3/IBukbudfY6KVeockxQuBm/Aen3/f9nPQ76n7VK+nDGKmFpqDYEyNlInAG5z0P/F7wO/5+5VHomSvjkrJQmyYDURdJbY3eKc0O1MzCkLyfOgKT50rdSl0obQLUhANBEvAakLJD+mTRbIg6qHBMATcZqQMoimf+x0yX7oMpwg4RZkigGgNgxkyX3J0wVlYAqwQ8SZkAMSFsi8z96otSz2EkS9lAp4kDcNKncuKlS/8N7JPOhQqSB6ElCMm4lSNFCNGBgAAAY+v7rj5j+SgAAAABJRU5ErkJggg=="],["swap","iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAI9SURBVDjLpZNBS9RhEMZ/u60aZAdNSXdLrcxNS82DaRQVRBCUGngwwkOnvkB0yEt0qy/QKSrq5DUSQgLTSi01d80gcrXSTTdTViTU//+ded8ORihFYD4wl+FhYOY3T8A5x2YU3Ij54qOmp833zmX+14CWh431vm9OGs+8W9sPXOm49HsHqxarFhXbZ9W2EQxeECNnxUh0W2Y2kdwIcwtzJCbHY8+uvagBCAG0Vl3G4XDOYZ1jbPbj0ffJ0S6xQrT4AFszsxC1qFPycvJYXl45fOxG7ctXNweOB51zWBzW2V+l7MnbS21JLemFNBmhDIwIxhqMGowKxgjGNxkAISuWB2/uoqIE7Rb255dxMHKInO07CLkMxpMTpOZnmE7NEN4ZQUVITIyPDNyK1wEE1mJsud+QLUavl4cr2o5E64glhumJ9ag629TV1ttRd7VGNWQ/Dd6Ol/6VgguCDTjiYzGWvCWiReX4Pwxe2gPAX/Lx5rx1dAKt7c1OjCBGcOIoyC1kMb1IWTjKvqJSJqbGGR6Nk0gkOBitQMQyNDg0kmj/XA0QMr7hRPkp1ClqBbHKXNY88Q9xineVEC6IUFgQwZ62qFUsFm/Fq9p9Pvx66sl0XdD46y8sKiwuLZL6/o3nvd3Mp+cRJ4gVxCliFRFFjBqAQMOdM06MYHxB/FVEYqRPPG3z0/7qI/kazc/Pp7K6kuSXJEP9b2MznbM1f1D4l4oaI/Uq2qViJ1Ods9ENZ2Hy8dd+NdqtRivXUdhsnH8Cn6RstCM01H4AAAAASUVORK5CYII="],["collapse","iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAOwQAADsEBuJFr7QAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMC41ZYUyZQAAAPNJREFUOE9jcIoq/Y+MGXCACUc6/4MwlIsAyJrwGaA3UeE/CEO5CECMAYEL3f4HHLCG4AWuqGpAmpAxVBgOQM42X6L2v+B1OBiD2H0H27FahAFAmjUnSP1Pv+//P/d5KBin3fP/r94vgREecA6ya/Q7lf+HnrD/n/U4CAWDxKym6mJ3BcwbhZsz/iu0C8ExyBUgjCxWsDEdbgiMgRIOMDZIcfItHzAGscGSuADM+TAMEgNpir/mCca4DMBrKkhTzCU3MCbbBRFnncGYkAvgmkAA2YDQkw5gTJQLoEwUA4KO2oIxUQYgY5AYSBMyBiscJICBAQCpROGZ6kqHfwAAAABJRU5ErkJggg=="],["reset","iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAYdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuNWWFMmUAAAL8SURBVDhPbZLZTxNRFMbnDzD65BsurC2tSFlENiG4EARBguzIGkBDwKAsIqA+EAIE45JgogaCxrdqgiQmxhAVjWIEpEioChRKUGmZTpeZaSlQ6OedoVYxnOSXe893vnPvzcml/o+V4WGJrbOmgm+tVLJN+UqeYL1Zp+TbLpy1qz7ud9m2D+u9tjq+qYTmLmbZuUvZIOsmNTnCauOvlWuX77dHuux/wzQ6sIvrbOziKrPBlqa64ZsrwF8u26Jxl4pg7WppxuSbHa52iuJry9rZgtOwZCdsUpgKC8nXtRqsDQ2SxgxY8pPddZbU2drSarHZdqsjxXTqqNl8MhYCXEkO1j59AFeeD6fFDMcXFazkQseECmxBuugROZMwtXKrQ0KxRdl95mPRMMdFgi3KxYZuEWtjn2FJT4HTTA4YHwN7rgTr8/PkkHFYUhNFrzkhjryssIgyRkWOmYKDYAoLxUr/MziNRmI6DUFzmkxwjI6Ie0tWJpwMA+5KA0whwaJmSkrqpgwSuZqRyGAMjyY3q2BXPgEjkRNkZAZarL56Le4FbfXlAGw9vTAGKETNKA1QUkxolJX28IEhOAJr4xOwPeiBkAswMSfAhMe6c/vTPtgePgbtLRdzY0o6Tem85WrdHl/opYFYffeevGIc+n1+ELR/ETTHt+/gWjug85SKGq0IU1K/5CFvf+71gwDXcQNO+wrMDVfF/F+4ztvYIPMxZOS6taX45BZKn5Z1d8HLf32BCAv+Clifv8A6TYO9cxd0TiEMBaWwkadvsBzY7l4s+MgheH/Igux0Wk4ixdTXe8wdDBvS7JdCYE4WDH1tA5aHR+AwMHDo9eDJ8HTnqzArVYgeAW1QhJKpur5T/EyWnkfHZ8mwpkhBYNpLhpkDIdAoDovMyIIw5envrs8eIcN90BsuNv+JxZor6dOHorWTPnKnmgxpO776HnBoYuJVS7e7ol1tW2O++JxsNiOvcTIkYlBNbp7w8seEtwzfImKhDjzUr8nMq14srtrtspOgqN9wa0YvcwzUuQAAAABJRU5ErkJggg=="],["rectangle-spacer","iVBORw0KGgoAAAANSUhEUgAAAAkAAAAECAYAAABcDxXOAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAOwQAADsEBuJFr7QAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMC41ZYUyZQAAAA1JREFUGFdjGHSAgQEAAJQAAY8LvLEAAAAASUVORK5CYII="],["add-column","iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAOwQAADsEBuJFr7QAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMC41ZYUyZQAAAPVJREFUOE9jUKtncAbi/0RgZwZsACQBUlDwOhwrJtqA3OehyIrBGE0MvwFZj4OwYqjmc9rN7Ft1mtknQ9WLQLUjDEi/749sGxiDxLSb2N6giwMNOwOkIYYAGTjDQLOR5RNME0wMxgcafAxIi+AMA3Q+ugFQ7Iw3DEDiMI3oGMMA9DCA8bFpBmGoOoQBybd8MDBUEYpByGJAjDAg/poniiSIDwzErzA+ugHazWwngDQiEGMuuWHFWk2sH2CaYBiYHs4BadRojDjrjKIITew8UNNO3RbOWUB2LRBjJqTQkw5YMUgOivEn5aCjtlgx0QYQgbEYwMAAAEqqlSGCjw+bAAAAAElFTkSuQmCC"],["checked","iVBORw0KGgoAAAANSUhEUgAAAA0AAAAPCAYAAAA/I0V3AAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAOwgAADsIBFShKgAAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMC41ZYUyZQAAAYJJREFUOE+NkstLglEQxf0fahG0iFrUxm2ElFDYLohCqCDaCAkWPaxIRbFFEJEaGEKLDCoMETRFUAMLyaIHBUG6sSKIMtKFqEhLT818ZUgmDhzu3DPn9z0uV1RrmUwmyGQyqNVqfFvViwBxu5RFPZuLSyGMKhz/qlEsRV19K8xm6y+w7bpBPFnAferjj3bdQX6DpHcAUwavAHUN2RGIZxBJZHH2mC/TUeydwwTZvBegLENNgw7sX6Wh1FswNmPEmjPCDyGRRwCtW9E3tMgdAtQw7GZjYcNX+gza2wJ3ZXsSZUuQ0vWCOV8SHfJJ/uluhbHUj1v8PKNMszIoQNRMHCShD6Wh8zyhrbOPwz8w+STKlCCJ7oRNUzQH63kBs5thBghePXxlj2aUoSxDPcuXPNiLAc5EEZ6HIkbmV2DYiXBPHs0o079+K0DTVj/s11mE00A0L+g4VcDp10qKZMAzytBhMaTRaPmYg885DlcSzSij0eoEiIouoUqlqqqaL2rlEok+Ad4vlfzPoVDsAAAAAElFTkSuQmCC"],["unchecked","iVBORw0KGgoAAAANSUhEUgAAAA0AAAAPCAYAAAA/I0V3AAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAOwgAADsIBFShKgAAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMC41ZYUyZQAAARBJREFUOE+9krtug1AQRPldSio7FQ1tZImOkoKOBomGT0EURC5ino54yTw90WywQhTkIkVWGoF2zuxdrlD+t0zThKZpT0Vmxb8CQRCg6zr0fb8rer7vfwcPxxdcrx+YpgnzPGNZlh9ibxxHlGUJshLSdV0at9tNpg7DIBrX5+OkPM9BVkKGYSBJEtR1jbZrBdiqbVtUVYU0TUFWQq+nE+I4xvvlImGaW7FHjwxZCVmWhbfzGVmWoSgKWXUr9uiRISshx3FkEldomubXauzRI0NWQp7nyUR+NG/rfr/jUXxnjx5vmKyEbNuWox9Xvid6ZMhK6HA4wnVdhGGIKIp2RY8MWQmx+JuoqvpUZFb8L6UonyYL3uOtrFH+AAAAAElFTkSuQmCC"],["up-rectangle","iVBORw0KGgoAAAANSUhEUgAAAAkAAAAECAYAAABcDxXOAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAOwgAADsIBFShKgAAAABp0RVh0U29mdHdhcmUAUGFpbnQuTkVUIHYzLjUuMTFH80I3AAAAHklEQVQYV2PAAv5DaZwApACGsQJkBVgVYlMAxQwMABOrD/GvP+EWAAAAAElFTkSuQmCC"],["down-rectangle","iVBORw0KGgoAAAANSUhEUgAAAAkAAAAECAYAAABcDxXOAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAadEVYdFNvZnR3YXJlAFBhaW50Lk5FVCB2My41LjExR/NCNwAAABpJREFUGFdjgIL/eDAKIKgABggqgAE0BQwMAPTlD/Fpi0JfAAAAAElFTkSuQmCC"],["sortable","iVBORw0KGgoAAAANSUhEUgAAAA4AAAAKCAYAAACE2W/HAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAYdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuNWWFMmUAAAAxSURBVChTY8AD/kNpkgBIEwwTDZA1Ea0ZmyYYHmQAmxNhmCAgSxMMkKUJBvBoYmAAAJCXH+FU1T8+AAAAAElFTkSuQmCC"],["empty","iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAYdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuNWWFMmUAAAANSURBVBhXY/j//z8DAAj8Av6IXwbgAAAAAElFTkSuQmCC"],["filter-off","iVBORw0KGgoAAAANSUhEUgAAAA4AAAAMCAYAAABSgIzaAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAYdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuNWWFMmUAAAChSURBVChTzZHBCoUgFET9TqEiskgyWoutQvRLRIr+cR7XQAjiJW/1BgZmMUevXsY5xy9OoDEGMcYiUzeB67qibVuwQjVNA6311V+WBeM4vsLDMEApde/1fY9pmtI453neHEKAlBJd1z0fXtc16PbjODK07zvmeUZVVd8nooc75zJIOX3Gm6i0bVsGKf8xKIRIuyJTLgJJ3nvQzsjW2geIsQ/pr9hMVrSncAAAAABJRU5ErkJggg=="],["filter-on","iVBORw0KGgoAAAANSUhEUgAAAA4AAAAMCAYAAABSgIzaAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAYdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuNWWFMmUAAACoSURBVChTY3BqfP2fHAzWmDbj7f8p294RhVOBasEa02e+/e/VBmQQCTxaX/9PnvYGoj5ywpv/Qd2ENft3vv4f1gfVBAP+nW/+h/a+ATtn1q73KHjytvdgg3070DTBgHvL6/8g22fsQGiaDmSHA21xaybgIpDHixa8hWssnA8NDEIApCh3LkIjiD2INYJCL2X6W3B8gdhEaQQBUOCA4gyE8+e9xaKJgQEA/74BNE3cElkAAAAASUVORK5CYII="],["up-down","iVBORw0KGgoAAAANSUhEUgAAAA4AAAAPCAYAAADUFP50AAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAOwQAADsEBuJFr7QAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMC41ZYUyZQAAAGFJREFUOE+lkkEKQCEIRD2ZJ3Ph3iN4WD9GflpYhj0YYowpGgJmbikd3gjMDFokwbuT1iAiurG5nomgqo5QaPo9ERQRI6Jf7sfGjudy2je23+i0Wl2oQ85TOdlfrJQOazF8br+rqTXQKn0AAAAASUVORK5CYII="],["up-down-spin","iVBORw0KGgoAAAANSUhEUgAAAA4AAAAPCAYAAADUFP50AAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAOwQAADsEBuJFr7QAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMC41ZYUyZQAAAGJJREFUOE+lkwEKACEIBH2Zb/PnHsoGeaVJDUjGOgRRpKpkiIj+y4MME3eDR7kaKOVNsJyMNjIHzGy9YnW6J7qIcrriQimeCqORNABd0fpRTkt8uVUj7EsxC6vs/q3e/Q6iD2bwnByjPXHNAAAAAElFTkSuQmCC"],["up-arrow","iVBORw0KGgoAAAANSUhEUgAAAAUAAAAKCAYAAAB8OZQwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAYdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuNWWFMmUAAAA9SURBVBhXbYvRCgAgCAOtqP//Y9tElw8NDrcDzd0DBCd7iSL3E0IvGOpf2fKXeZUFKDcYFMwBlDNWS76bXUM5P9In5AzyAAAAAElFTkSuQmCC"],["down-arrow","iVBORw0KGgoAAAANSUhEUgAAAAUAAAAKCAYAAAB8OZQwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAYdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuNWWFMmUAAAA+SURBVBhXhYvRCgAgCAOtqP//4+WWhtBDB1duqBUQ/2W5LLtSMFyW020skuecwOGj6QzfkuExt1LlcqICgG3S7z/SL/jVpgAAAABJRU5ErkJggg=="]];(function(){var each,img;for(var i=0;i<imgData.length;i++){each=imgData[i];img=new Image;img.src="data:image/png;base64,"+each[1];imageCache[each[0]]=img}})();Polymer("fin-hypergrid-behavior-base",{tableState:null,grid:null,editorTypes:["choice","textfield","color","slider","spinner","date"],featureChain:null,dataModel:null,baseModel:null,cellProviderDecorator:null,scrollPositionX:0,scrollPositionY:0,featureMap:{},allColumns:[],columns:[],DataModelDecorator:DataModelDecorator,clearColumns:function(){this.columns=[];this.allColumns=[];this.columns[-1]=this.newColumn(-1,"");this.columns[-2]=this.newColumn(-2,"Tree");this.allColumns[-1]=this.columns[-1];this.allColumns[-2]=this.columns[-2]},getColumn:function(x){return this.columns[x]},newColumn:function(index,label){var properties=this.createColumnProperties();this.getPrivateState().columnProperties[index]=properties;return new Column(this,index,label)},addColumn:function(index,label){var column=this.newColumn(index,label);this.columns.push(column);this.allColumns.push(column);return column},createColumns:function(){},createColumnProperties:function(){var tableState=this.getPrivateState();var properties=Object.create(tableState);properties.rowNumbersProperties=Object.create(properties,{foregroundSelectionColor:{configurable:true,get:function(){return this.columnHeaderForegroundSelectionColor},set:function(value){this.columnHeaderForegroundSelectionColor=value}},backgroundSelectionColor:{configurable:true,get:function(){return this.columnHeaderBackgroundSelectionColor},set:function(value){this.columnHeaderBackgroundSelectionColor=value}}});properties.rowHeader=Object.create(properties,{font:{configurable:true,get:function(){return this.rowHeaderFont},set:function(value){this.rowHeaderFont=value}},color:{configurable:true,get:function(){return this.rowHeaderColor},set:function(value){this.rowHeaderColor=value}},backgroundColor:{configurable:true,get:function(){return this.rowHeaderBackgroundColor},set:function(value){this.rowHeaderBackgroundColor=value}},foregroundSelectionColor:{configurable:true,get:function(){return this.rowHeaderForegroundSelectionColor},set:function(value){this.rowHeaderForegroundSelectionColor=value}},backgroundSelectionColor:{configurable:true,get:function(){return this.rowHeaderBackgroundSelectionColor},set:function(value){this.rowHeaderBackgroundSelectionColor=value}}});properties.columnHeader=Object.create(properties,{font:{configurable:true,get:function(){return this.columnHeaderFont},set:function(value){this.columnHeaderFont=value}},color:{configurable:true,get:function(){return this.columnHeaderColor},set:function(value){this.columnHeaderColor=value}},backgroundColor:{configurable:true,get:function(){return this.columnHeaderBackgroundColor},set:function(value){this.columnHeaderBackgroundColor=value}},foregroundSelectionColor:{configurable:true,get:function(){return this.columnHeaderForegroundSelectionColor},set:function(value){this.columnHeaderForegroundSelectionColor=value}},backgroundSelectionColor:{configurable:true,get:function(){return this.columnHeaderBackgroundSelectionColor},set:function(value){this.columnHeaderBackgroundSelectionColor=value}}});properties.columnHeaderColumnSelection=Object.create(properties.columnHeader,{foregroundSelectionColor:{configurable:true,get:function(){return this.columnHeaderForegroundColumnSelectionColor},set:function(value){this.columnHeaderForegroundColumnSelectionColor=value}},backgroundSelectionColor:{configurable:true,get:function(){return this.columnHeaderBackgroundColumnSelectionColor},set:function(value){this.columnHeaderBackgroundColumnSelectionColor=value}}});properties.rowHeaderRowSelection=Object.create(properties.rowHeader,{foregroundSelectionColor:{configurable:true,get:function(){return this.rowHeaderForegroundRowSelectionColor},set:function(value){this.rowHeaderForegroundRowSelectionColor=value}},backgroundSelectionColor:{configurable:true,get:function(){return this.rowHeaderBackgroundRowSelectionColor},set:function(value){this.rowHeaderBackgroundRowSelectionColor=value}}});properties.filterProperties=Object.create(properties,{font:{configurable:true,get:function(){return this.filterFont},set:function(value){this.filterFont=value}},color:{configurable:true,get:function(){return this.filterColor},set:function(value){this.filterColor=value}},backgroundColor:{configurable:true,get:function(){return this.filterBackgroundColor},set:function(value){this.filterBackgroundColor=value}},foregroundSelectionColor:{configurable:true,get:function(){return this.filterForegroundSelectionColor},set:function(value){this.filterForegroundSelectionColor=value}},backgroundSelectionColor:{configurable:true,get:function(){return this.filterBackgroundSelectionColor},set:function(value){this.filterBackgroundSelectionColor=value}},cellBorderStyle:{configurable:true,get:function(){return this.filterCellBorderStyle},set:function(value){this.filterCellBorderStyle=value}},cellBorderThickness:{configurable:true,get:function(){return this.filterCellBorderThickness;
},set:function(value){this.filterCellBorderThickness=value}}});properties.treeColumnProperties=Object.create(properties,{font:{configurable:true,get:function(){return this.treeColumnFont},set:function(value){this.treeColumnFont=value}},color:{configurable:true,get:function(){return this.treeColumnColor},set:function(value){this.treeColumnColor=value}},backgroundColor:{configurable:true,get:function(){return this.treeColumnBackgroundColor},set:function(value){this.treeColumnBackgroundColor=value}},foregroundSelectionColor:{configurable:true,get:function(){return this.treeColumnForegroundSelectionColor},set:function(value){this.treeColumnForegroundSelectionColor=value}},backgroundSelectionColor:{configurable:true,get:function(){return this.treeColumnBackgroundSelectionColor},set:function(value){this.treeColumnBackgroundSelectionColor=value}}});properties.treeColumnPropertiesColumnSelection=Object.create(properties.treeColumnProperties,{foregroundSelectionColor:{configurable:true,get:function(){return this.treeColumnForegroundColumnSelectionColor},set:function(value){this.treeColumnForegroundColumnSelectionColor=value}},backgroundSelectionColor:{configurable:true,get:function(){return this.treeColumnBackgroundColumnSelectionColor},set:function(value){this.treeColumnBackgroundColumnSelectionColor=value}}});return properties},getColumnWidth:function(x){var col=this.getColumn(x);if(!col){return this.resolveProperty("defaultColumnWidth")}var width=col.getWidth();return width},setColumnWidth:function(x,width){this.getColumn(x).setWidth(width);this.stateChanged()},getDataModel:function(){if(this.dataModel===null){var dataModel=this.getDefaultDataModel();this.setDataModel(dataModel)}return this.dataModel},getCellRenderer:function(config,x,y){return this.getColumn(x).getCellRenderer(config,y)},setDataModel:function(newDataModel){this.dataModel=newDataModel},clearObjectProperties:function(obj){for(var prop in obj){if(obj.hasOwnProperty(prop)){delete obj[prop]}}},ready:function(){this.readyInit()},readyInit:function(){this.getDataModel();this.cellProvider=this.createCellProvider();this.renderedColumnCount=30;this.renderedRowCount=60;this.dataUpdates={}},getPrivateState:function(){if(!this.tableState){this.tableState=this.getDefaultState()}return this.tableState},getState:function(){var copy=JSON.parse(JSON.stringify(this.getPrivateState()));noExportProperties.forEach(function(name){copy.columnProperties.forEach(function(e){delete e[name]})});return copy},clearState:function(){this.tableState=null},getDefaultState:function(){var tableProperties=this.getGrid()._getProperties();var state=Object.create(tableProperties);merge(state,{rowHeights:{},cellProperties:{},columnProperties:[]});return state},setState:function(memento){if(!memento.columnIndexes){var fields=this.getFields();memento.columnIndexes=[];for(var i=0;i<fields.length;i++){memento.columnIndexes[i]=i}}var colProperties=memento.columnProperties;delete memento.columnProperties;this.tableState=null;var state=this.getPrivateState();this.createColumns();this.setColumnOrder(memento.columnIndexes);merge(state,memento);this.setAllColumnProperties(colProperties);memento.columnProperties=colProperties;this.setColumnWidth(-1,24.193359375);this.getDataModel().applyState()},setAllColumnProperties:function(properties){properties=properties||[];for(var i=0;i<properties.length;i++){var current=this.getPrivateState().columnProperties[i];clearObjectProperties(current,noExportProperties);merge(current,properties[i])}},setColumnOrder:function(indexes){if(!indexes){this.columns.length=0;return}this.columns.length=indexes.length;for(var i=0;i<indexes.length;i++){this.columns[i]=this.allColumns[indexes[i]]}},applySorts:function(){},resolveProperty:function(key){return this.grid.resolveProperty(key)},cellClicked:function(cell,event){this.getDataModel().cellClicked(cell,event)},cellDoubleClicked:function(){},setNextFeature:function(nextFeature){this.featureMap[nextFeature.alias]=nextFeature;if(this.featureChain){this.featureChain.setNext(nextFeature)}else{this.featureChain=nextFeature}},lookupFeature:function(key){return this.featureMap[key]},installOn:function(grid){grid.setBehavior(this);this.initializeFeatureChain(grid)},initializeFeatureChain:function(grid){this.setNextFeature(new features.KeyPaging);this.setNextFeature(new features.Overlay);this.setNextFeature(new features.ColumnResizing);this.setNextFeature(new features.RowResizing);this.setNextFeature(new features.Filters);this.setNextFeature(new features.RowSelection);this.setNextFeature(new features.ColumnSelection);this.setNextFeature(new features.CellSelection);this.setNextFeature(new features.ColumnMoving);this.setNextFeature(new features.ColumnSorting);this.setNextFeature(new features.CellEditing);this.setNextFeature(new features.CellClick);this.setNextFeature(new features.OnHover);this.featureChain.initializeOn(grid)},getCellProvider:function(){return this.cellProvider},setGrid:function(finGrid){this.grid=finGrid;this.getDataModel().setGrid(finGrid);this.clearColumns()},getGrid:function(){return this.grid},createCellProvider:function(){var provider=new hypergrid.CellProvider;return provider},getValue:function(x,y){var column=this.getColumn(x);if(!column){return undefined}var result=column.getValue(y);return result},setValue:function(x,y,value){var column=this.getColumn(x);if(!column){return}var result=column.setValue(y,value);return result},getDataValue:function(x,y){return this.getDataModel().getValue(x,y)},setDataValue:function(x,y,value){this.getDataModel().setValue(x,y,value)},getCellProperties:function(x,y){var col=this.getColumn(x);return col.getCellProperties(y)},setCellProperties:function(x,y,value){var col=this.getColumn(x);if(col){col.setCellProperties(y,value)}},getRowCount:function(){return this.getDataModel().getRowCount()},getFixedRowsHeight:function(){var count=this.getFixedRowCount();var total=0;for(var i=0;i<count;i++){total=total+this.getRowHeight(i)}return total},getRowHeight:function(rowNum){var tableState=this.getPrivateState();if(tableState.rowHeights){var override=tableState.rowHeights[rowNum];if(override){return override}}return this.getDefaultRowHeight()},getDefaultRowHeight:function(){if(!this.defaultRowHeight){this.defaultRowHeight=this.resolveProperty("defaultRowHeight")}return this.defaultRowHeight},setRowHeight:function(rowNum,height){var tableState=this.getPrivateState();tableState.rowHeights[rowNum]=Math.max(5,height);this.stateChanged()},getFixedRowsMaxHeight:function(){var height=this.getFixedRowsHeight();return height},getFixedColumnsWidth:function(){var count=this.getFixedColumnCount();var total=0;if(this.getGrid().isShowRowNumbers()){total=this.getColumnWidth(-1)}for(var i=0;i<count;i++){total=total+this.getColumnWidth(i)}return total},getFixedColumnsMaxWidth:function(){var width=this.getFixedColumnsWidth();return width},_setScrollPositionY:function(y){this.setScrollPositionY(y);this.changed()},_setScrollPositionX:function(x){this.setScrollPositionX(x);this.changed()},setRenderedColumnCount:function(count){this.renderedColumnCount=count},setRenderedRowCount:function(count){this.renderedRowCount=count},_fixedRowClicked:function(grid,mouse){var x=this.translateColumnIndex(this.getScrollPositionX()+mouse.gridCell.x-this.getFixedColumnCount());var translatedPoint=this.grid.rectangles.point.create(x,mouse.gridCell.y);mouse.gridCell=translatedPoint;this.fixedRowClicked(grid,mouse)},_fixedColumnClicked:function(grid,mouse){var translatedPoint=this.grid.rectangles.point.create(mouse.gridCell.x,this.getScrollPositionY()+mouse.gridCell.y-this.getFixedRowCount());mouse.gridCell=translatedPoint;this.fixedColumnClicked(grid,mouse)},moveSingleSelect:function(grid,x,y){if(this.featureChain){this.featureChain.moveSingleSelect(grid,x,y);this.setCursor(grid)}},setCursor:function(grid){grid.updateCursor();this.featureChain.setCursor(grid)},onMouseMove:function(grid,event){if(this.featureChain){this.featureChain.handleMouseMove(grid,event);this.setCursor(grid)}},onTap:function(grid,event){if(event.gridCell.x===-1&&event.gridCell.y===0){grid.toggleSelectAllRows()}if(this.featureChain){this.featureChain.handleTap(grid,event);this.setCursor(grid)}},onContextMenu:function(grid,event){var proceed=grid.fireSyntheticContextMenuEvent(event);if(proceed&&this.featureChain){this.featureChain.handleContextMenu(grid,event);this.setCursor(grid)}},onWheelMoved:function(grid,event){if(this.featureChain){this.featureChain.handleWheelMoved(grid,event);this.setCursor(grid)}},onMouseUp:function(grid,event){if(this.featureChain){this.featureChain.handleMouseUp(grid,event);this.setCursor(grid)}},onMouseDrag:function(grid,event){if(this.featureChain){this.featureChain.handleMouseDrag(grid,event);this.setCursor(grid)}},onKeyDown:function(grid,event){if(this.featureChain){this.featureChain.handleKeyDown(grid,event);this.setCursor(grid)}},onKeyUp:function(grid,event){if(this.featureChain){this.featureChain.handleKeyUp(grid,event);this.setCursor(grid)}},onDoubleClick:function(grid,event){if(this.featureChain){this.featureChain.handleDoubleClick(grid,event);this.setCursor(grid)}},onHoldPulse:function(grid,event){if(this.featureChain){this.featureChain.handleHoldPulse(grid,event);this.setCursor(grid)}},toggleColumnPicker:function(){if(this.featureChain){this.featureChain.toggleColumnPicker(this.getGrid())}},handleMouseDown:function(grid,event){if(this.featureChain){this.featureChain.handleMouseDown(grid,event);this.setCursor(grid)}},handleMouseExit:function(grid,event){if(this.featureChain){this.featureChain.handleMouseExit(grid,event);this.setCursor(grid)}},changed:function(){},shapeChanged:function(){},isColumnReorderable:function(){return true},getColumnProperties:function(columnIndex){var col=this.columns[columnIndex];if(!col){return{isNull:true}}var properties=col.getProperties();return properties},setColumnProperties:function(columnIndex,properties){var columnProperties=this.getColumnProperties(columnIndex);merge(columnProperties,properties);this.changed()},getColumnDescriptors:function(){this.insureColumnIndexesAreInitialized();var tableState=this.getPrivateState();var columnCount=tableState.columnIndexes.length;var labels=[];for(var i=0;i<columnCount;i++){var id=tableState.columnIndexes[i];labels.push({id:id,label:this.getHeader(id),field:this.getField(id)})}return labels},getField:function(colIndex){if(colIndex===-1){return"tree"}var col=this.getColumn(colIndex);return col.getField()},getHeader:function(colIndex){if(colIndex===-1){return"Tree"}var col=this.getColumn(colIndex);return col.getHeader()},setColumnDescriptors:function(lists){var visible=lists.visible;var tableState=this.getPrivateState();var columnCount=visible.length;var indexes=[];var i;for(i=0;i<columnCount;i++){indexes.push(visible[i].id)}tableState.columnIndexes=indexes;this.changed()},getHiddenColumnDescriptors:function(){var tableState=this.getPrivateState();var indexes=tableState.columnIndexes;var labels=[];var columnCount=this.getColumnCount();for(var i=0;i<columnCount;i++){if(indexes.indexOf(i)===-1){labels.push({id:i,label:this.getHeader(i),field:this.getField(i)})}}return labels},hideColumns:function(arrayOfIndexes){var tableState=this.getPrivateState();var order=tableState.columnIndexes;for(var i=0;i<arrayOfIndexes.length;i++){var each=arrayOfIndexes[i];if(order.indexOf(each)!==-1){order.splice(order.indexOf(each),1)}}},getFixedColumnCount:function(){var tableState=this.getPrivateState();return tableState.fixedColumnCount||0},setFixedColumnCount:function(numberOfFixedColumns){var tableState=this.getPrivateState();tableState.fixedColumnCount=numberOfFixedColumns},getFixedRowCount:function(){if(!this.tableState){return 0}var usersSize=this.tableState.fixedRowCount||0;var headers=this.getGrid().getHeaderRowCount();var total=usersSize+headers;return total},setFixedRowCount:function(numberOfFixedRows){this.tableState.fixedRowCount=numberOfFixedRows},getHeaderRowCount:function(){var grid=this.getGrid();var header=grid.isShowHeaderRow()?1:0;var filter=grid.isShowFilterRow()?1:0;var totals=this.getTopTotals().length;var count=header+filter+totals;return count},setHeaderRowCount:function(numberOfHeaderRows){this.tableState.headerRowCount=numberOfHeaderRows},getHeaderColumnCount:function(){var grid=this.getGrid();var count=grid.resolveProperty("headerColumnCount");return count},setHeaderColumnCount:function(numberOfHeaderColumns){this.tableState.headerColumnCount=numberOfHeaderColumns},openEditor:function(div){var container=document.createElement("div");var hidden=document.createElement("fin-hypergrid-dnd-list");var visible=document.createElement("fin-hypergrid-dnd-list");container.appendChild(hidden);container.appendChild(visible);this.beColumnStyle(hidden.style);hidden.title="hidden columns";hidden.list=this.getHiddenColumnDescriptors();this.beColumnStyle(visible.style);visible.style.left="50%";visible.title="visible columns";visible.list=this.getColumnDescriptors();div.lists={hidden:hidden.list,visible:visible.list};div.appendChild(container);return true},closeEditor:function(div){noop(div);var lists=div.lists;this.setColumnDescriptors(lists);return true},endDragColumnNotification:function(){},beColumnStyle:function(style){style.top="5%";style.position="absolute";style.width="50%";style.height="100%";style.whiteSpace="nowrap"},getCursorAt:function(){return null},getColumnCount:function(){return this.columns.length},getColumnAlignment:function(){return"center"},setScrollPositionX:function(x){this.scrollPositionX=x},getScrollPositionX:function(){return this.scrollPositionX},setScrollPositionY:function(y){this.scrollPositionY=y},getScrollPositionY:function(){return this.scrollPositionY},getCellEditorAt:function(x,y){return this.getColumn(x).getCellEditorAt(x,y)},toggleSort:function(x,keys){this.getColumn(x).toggleSort(keys)},highlightCellOnHover:function(isColumnHovered,isRowHovered){return isColumnHovered&&isRowHovered},getColumnId:function(x){var col=this.getFixedRowValue(x,0);return col},getImage:function(key){var image=imageCache[key];return image},setImage:function(key,image){imageCache[key]=image},cellPropertiesPrePaintNotification:function(cellProperties){var row=this.getRow(cellProperties.y);var columnId=this.getHeader(cellProperties.x);cellProperties.row=row;cellProperties.columnId=columnId},cellFixedRowPrePaintNotification:function(){},cellFixedColumnPrePaintNotification:function(){},cellTopLeftPrePaintNotification:function(){},enhanceDoubleClickEvent:function(){},swapColumns:function(source,target){var columns=this.columns;var tmp=columns[source];columns[source]=columns[target];columns[target]=tmp;this.changed()},getColumnEdge:function(c,renderer){return this.getDataModel().getColumnEdge(c,renderer)},setTotalsValue:function(x,y,value){this.getGrid().setTotalsValueNotification(x,y,value)},getRow:function(y){return this.getDataModel().getRow(y)},convertViewPointToDataPoint:function(viewPoint){var newX=this.getColumn(viewPoint.x);var newPoint=this.getGrid().rectangles.point.create(newX,viewPoint.y);return newPoint},setGroups:function(arrayOfColumnIndexes){this.getDataModel().setGroups(arrayOfColumnIndexes);this.createColumns();this.changed()},setAggregates:function(mapOfKeysToFunctions){var self=this;this.getDataModel().setAggregates(mapOfKeysToFunctions);this.createColumns();setTimeout(function(){self.changed()},100)},hasHierarchyColumn:function(){return false},getRowContextFunction:function(){return function(){return null}},getSelectionMatrixFunction:function(){return function(){return null}},getFieldName:function(index){return this.getFields()[index]},getColumnIndex:function(fieldName){return this.getFields().indexOf(fieldName)},getComputedRow:function(y){return this.getDataModel().getComputedRow(y)},autosizeAllColumns:function(){this.checkColumnAutosizing(true);this.changed()},checkColumnAutosizing:function(force){force=force===true;this.allColumns[-2].checkColumnAutosizing(force);this.allColumns.forEach(function(column){column.checkColumnAutosizing(force)})},autoSizeRowNumberColumn:function(){this.allColumns[-1].checkColumnAutosizing(true)},setGlobalFilter:function(string){this.getDataModel().setGlobalFilter(string)},getSelectedRows:function(){return this.getGrid().getSelectionModel().getSelectedRows()},getSelectedColumns:function(){return this.getGrid().getSelectionModel().getSelectedColumns()},getSelections:function(){return this.getGrid().getSelectionModel().getSelections()}})})();</script></polymer-element><polymer-element name="fin-hypergrid-behavior-default" extends="fin-hypergrid-behavior-base" assetpath="/dev/fin-hypergrid/polymer/html/behaviors/"><template><style type="text/css">:host{display:block;position:relative}</style></template><script>"use strict";(function(){var dataModels=fin.hypergrid.dataModels;Polymer("fin-hypergrid-behavior-default",{getDefaultDataModel:function(){var model=new dataModels.Default;return model},getFixedColumnCount:function(){return 3},getFixedRowCount:function(){return 3}})})();</script></polymer-element><polymer-element name="fin-hypergrid-behavior-gol" extends="fin-hypergrid-behavior-base" assetpath="/dev/fin-hypergrid/polymer/html/behaviors/"><template><style type="text/css">:host{display:block;position:relative}</style></template><script>"use strict";(function(){var noop=function(){};var patterns=[[[false,true,true,true,false],[true,false,true,false,true],[false,false,true,false,false]],[[false,true,false],[true,false,false],[true,true,true]]];var colors=["#ffffff","#ffffff","#efefef","#00e7e7","#00dfdf","#00d7d7","#00cfcf","#00c7c7"];Polymer("fin-hypergrid-behavior-gol",{rows:45,columns:75,data:[],buffer:[],running:false,ready:function(){this.readyInit();this.rows=this.getAttribute("rows")||this.rows;this.columns=this.getAttribute("columns")||this.columns;this.resetPetriDish();this.running=false},createCellProvider:function(){var provider=document.createElement("fin-hypergrid-cell-provider");provider.cellCache.simpleCellRenderer.paint=function(gc,x,y,width,height){var weight=this.config.value[1];if(weight===0){return}var color=colors[weight];if(this.config.value[0]){color=this.config.fgColor}gc.fillStyle=color;gc.fillRect(x,y,width,height)};return provider},resetPetriDish:function(){this.data=[];this.buffer=[];this.initializeData(this.data);this.initializeData(this.buffer);this.populate();this.changed()},populate:function(){var x=0;var y=0;for(var i=0;i<15;i++){y=Math.round(Math.random()*this.rows*.6);x=Math.round(Math.random()*this.columns*.6);this.applyPatternAt(this.data,x,y,patterns[i%2],i%4)}},initializeData:function(array2D){for(var c=0;c<this.columns;c++){var col=[];array2D.push(col);for(var r=0;r<this.rows;r++){col.push([false,0])}}},toggleRunning:function(){this.running=!this.running;if(this.running){this.startLife()}},startLife:function(){if(!this.running){return}for(var c=1;c<this.columns-2;c++){for(var r=1;r<this.rows-2;r++){this.computeLifeAt(c,r)}}var temp=this.buffer;this.buffer=this.data;this.data=temp;this.changed();setTimeout(this.startLife.bind(this),125)},computeLifeAt:function(x,y){var me=this._getValue(x,y);var total=this.getNeighborCount(x,y);me[1]=total;if(me[0]){if(total<2){this.buffer[x][y]=[false,0]}else if(total<4){this.buffer[x][y]=[true,1]}else{this.buffer[x][y]=[false,0]}}else{this.buffer[x][y]=[total===3,total]}},getNeighborCount:function(x,y){var data=this.data;var total=0;if(data[x-1][y-1][0]){total++}if(data[x-1][y][0]){total++}if(data[x-1][y+1][0]){total++}if(data[x][y-1][0]){total++}if(data[x][y+1][0]){total++}if(data[x+1][y-1][0]){total++}if(data[x+1][y][0]){total++}if(data[x+1][y+1][0]){total++}return total},getValue:function(x,y){return this.data[x][y]},setValue:function(x,y,value){this.data[x][y]=value},getFixedColumnValue:function(x,y){return y},getFixedRowValue:function(x,y){noop(x,y);return""},getFixedColumnCount:function(){return 0},getFixedRowCount:function(){return 0},getColumnCount:function(){return this.data.length},getRowCount:function(){return this.data[0].length},getRowHeight:function(y){noop(y);return 10},getColumnWidth:function(x){noop(x);return 10},getNextState:function(){if(this.running){return"pause"}else{return"play"}},onTap:function(grid,mouse){var mX=this.getScrollPositionX()+mouse.gridCell.x;var mY=this.getScrollPositionY()+mouse.gridCell.y;var v=this._getValue(mX,mY)[0];this._setValue(mX,mY,[!v,1]);this.changed()},applyPatternAt:function(array,c,r,pattern,dir){var w=pattern.length;var h=pattern[0].length;var x=0;var y=0;if(dir===0){for(x=0;x<w;x++){for(y=0;y<h;y++){array[x+c][y+r]=[pattern[w-x-1][y],1]}}}else if(dir===1){for(x=0;x<w;x++){for(y=0;y<h;y++){array[x+c][y+r]=[pattern[x][y],1]}}}else if(dir===2){for(x=0;x<w;x++){for(y=0;y<h;y++){array[y+c][x+r]=[pattern[x][y],1]}}}else{for(x=0;x<w;x++){for(y=0;y<h;y++){array[y+c][x+r]=[pattern[w-x-1][y],1]}}}}})})();</script></polymer-element><polymer-element name="fin-hypergrid-behavior-in-memory" extends="fin-hypergrid-behavior-base" assetpath="/dev/fin-hypergrid/polymer/html/behaviors/"><template><style type="text/css">:host{display:block;position:relative}</style></template><script>"use strict";(function(){var alphaFor=function(i){var quo=Math.floor(i/26);var rem=i%26;var code="";if(quo>0){code+=String.fromCharCode("A".charCodeAt(0)+quo-1)}code+=String.fromCharCode("A".charCodeAt(0)+rem);return code};function rnd(max){return Math.floor(Math.random()*max)}var barRandomOffsets=[];for(var i=0;i<20;i++){barRandomOffsets.push([]);for(var r=0;r<10;r++){barRandomOffsets[i].push(10-rnd(20))}}Polymer("fin-hypergrid-behavior-in-memory",{ready:function(){this.rows=5e3;this.columns=100;this.readyInit();this.sortStates=[" -"," ↑"," ↓"];this.permuteInterval=50;this.values=new Array(this.rows*this.columns);this.order=[];this.createSort(0,2);this.createSort(0,14);this.createSort(0,22);this.initOrder();this.initialize();this.permute();this.reorder()},getDefaultState:function(){return{columnIndexes:[],rowHeights:{},columnProperties:[],fixedColumnCount:0,fixedRowCount:1,sortLookup:{},sorted:{}}},createCellProvider:function(){var provider=document.createElement("fin-hypergrid-cell-provider");provider.getCell=function(config){var renderer=provider.cellCache.simpleCellRenderer;config.halign="left";var x=config.x;if(x===41){renderer=provider.cellCache.sliderCellRenderer}else if(x===23){renderer=provider.cellCache.sparkbarCellRenderer}else if(x===3){renderer=provider.cellCache.sparklineCellRenderer}else if(x===2){var hex=Math.floor(Math.max(config.value,30)*255/100).toString(16);if(hex.length<1){hex="0"+hex}var bgColor="#"+"00"+hex+"00";config.bgColor=bgColor}renderer.config=config;return renderer};return provider},setValues:function(c){var self=this;for(var x=c.xstart;x<c.xstop;x=x+c.xinc){for(var y=c.ystart;y<c.ystop;y=y+c.yinc){this.setRandomValue(x,y,c.cutoff)}}self.changed()},initialize:function(){var config={xstart:0,xstop:this.getColumnCount(),xinc:1,ystart:0,ystop:this.getRowCount(),yinc:1,cutoff:2};this.setValues(config)},permute:function(){var self=this;var x=this.getScrollPositionX();var y=this.getScrollPositionY();var config={xstart:x,xstop:x+this.renderedColumnCount,xinc:1,ystart:y,ystop:y+this.renderedRowCount,yinc:1,cutoff:.05};this.setValues(config);setTimeout(function(){self.permute()},self.permuteInterval)},getCellEditorAt:function(x,y){var type=x!==9?"textfield":this.editorTypes[y%this.editorTypes.length];var cellEditor=this.grid.resolveCellEditor(type);return cellEditor},getColumnCount:function(){return this.columns},setRandomValue:function(col,row,cutoff){var rand=Math.random();var val=this.getValue(col,row);var rndV;if(rand>cutoff){return}if(col===13){val=rand<.1?true:false;this.setValue(col,row,val)}else if(col===23){if(!val){val=[rnd(100),rnd(100),rnd(100),rnd(100),rnd(100),rnd(100),rnd(100),rnd(100),rnd(100),rnd(100)]}else{rndV=Math.floor(60*rand);if(rndV>19){return}var rndOffsets=barRandomOffsets[rndV];for(var i=0;i<rndOffsets.length;i++){val[i]=Math.min(Math.max(0,val[i]+rndOffsets[i]),100)}}this.setValue(col,row,val)}else if(col===3){if(!val){val=[rnd(100),rnd(100),rnd(100),rnd(100),rnd(100),rnd(100),rnd(100),rnd(100),rnd(100),rnd(100)]}else{rndV=Math.floor(8e3*rand);if(rndV>99){return}if(val.shift){val.shift();val.push(rndV)}}this.setValue(col,row,val)}else if(col%10===0){val=rand<.1?false:true;this.setValue(col,row,val)}else if(col===9){if(val){return}var hex=row.toString(16).toUpperCase();while(hex.length<6){hex="0"+hex}val="0x"+hex;this.setValue(col,row,val)}else if(col%6===0){if(val){return}var profound="Quidquid latine dictum sit, altum sonatur.";this.setValue(col,row,profound)}else if(col%4===0){var ipsum="Lorem ipsum dolor sit amet, malis repudiare mei in. Cu munere expetendis mea, affert aliquid definiebas at nam. Te scripta delectus singulis mel, et vidit error legere eum, ea latine feugait ponderum vix. Ius ei electram patrioque, et eum propriae deseruisse necessitatibus. Epicurei adipisci ex duo. Quidam iudicabit ullamcorper ex vel, per quot ipsum ad, libris quaeque iudicabit et usu. Ut postea nominavi cum, id eius porro mundi qui. Nec ex altera dolorum definiebas, consul viderer ex est. ";var index=Math.max(0,rand*ipsum.length-20);val=ipsum.slice(index,index+20).toUpperCase();this.setValue(col,row,val)}else if(col===2||col===14||col===22){var v=Math.min(Math.floor(rand*2e3),100);this.setValue(col,row,Math.max(v))}else if(col===41){this.setValue(col,row,Math.random())}else{this.setValue(col,row,rand)}},indexOf:function(row,col){var index=col*this.rows+row;return index},createSort:function(type,col){var self=this;var that={};var tableState=this.getPrivateState();that.type=type;that.col=col;that.value=function(array,index){return array[self.indexOf(self.order[index],col)]};that.compare=function(array,first,last){var x=that.value(array,first),y=that.value(array,last);if(typeof x==="number"){if(that.type===1){if(!y){return-1}return x-y}else{if(!y){return 1}return y-x}}else{if(that.type===1){if(!y){return-1}return x<y?-1:1}else{if(!y){return 1}return y<x?-1:1}}return 0};tableState.sorts.push(that);tableState.sortLookup[col]=that},swap:function(array,x,y){var tmp=this.order[x];this.order[x]=this.order[y];this.order[y]=tmp},compare:function(array,first,last){var comp=0;var tableState=this.getPrivateState();for(var i=0;i<tableState.sorts.length;++i){var sort=tableState.sorts[i];if(sort.type!==0){comp=sort.compare(array,first,last);if(comp===0){continue}break}}return comp},initOrder:function(){this.order=[];for(var i=0;i<this.rows;++i){this.order[i]=i}},quicksort:function(array,first,last,depth){var tableState=this.getPrivateState();if(depth>1e3){console.log("sort aborted!");return}var pivot=0;if(depth===0){if(tableState.sorts.length<=0){return}var sort=tableState.sorts[0];while(!sort.value(array,last)&&last>first){--last}var sorted=true;for(pivot=first;pivot<last;++pivot){if(this.compare(array,pivot,pivot+1)>0){sorted=false;break}}if(sorted){return}}while(first<last){var right=last;var left=first;pivot=first+last>>1;if(pivot<0||pivot>=last){break}while(right>=left){while(left<=right&&this.compare(array,left,pivot)<=0){++left}while(left<=right&&this.compare(array,right,pivot)>0){--right}if(left>right){break}this.swap(array,left,right);if(pivot===right){pivot=left}left++;right--}this.swap(array,pivot,right);right--;if(Math.abs(right-first)>Math.abs(last-left)){if(left<last){this.quicksort(array,left,last,depth+1)}last=right}else{if(first<right){this.quicksort(array,first,right,depth+1)}first=left}}},reorder:function(){this.initOrder();this.quicksort(this.values,0,this.rows-1,0)},orderOf:function(y){var row=this.order[y];return row},setValue:function(x,y,value){var row=this.orderOf(y);var index=this.indexOf(row,x);this.values[index]=value},getValue:function(x,y){var row=this.orderOf(y);var index=this.indexOf(row,x);return this.values[index]},getRowCount:function(){return this.rows},getFixedRowValue:function(x){var sortIndicator="";var tableState=this.getPrivateState();if(tableState.sortLookup[x]&&!tableState.sorted[x]){tableState.sorted[x]=0;sortIndicator=this.sortStates[tableState.sorted[x]]}if(tableState.sorted[x]){sortIndicator=this.sortStates[tableState.sorted[x]]}return alphaFor(x)+sortIndicator},fixedRowClicked:function(grid,mouse){if([2,14,22].indexOf(mouse.gridCell.x)===-1){return}this.toggleSort(mouse.gridCell.x)},toggleSort:function(columnIndex){var tableState=this.getPrivateState();var current=tableState.sorted[columnIndex];var stateCount=this.sortStates.length;var sortStateIndex=(current+1)%stateCount;tableState.sorted[columnIndex]=sortStateIndex;tableState.sortLookup[columnIndex].type=sortStateIndex;this.reorder();this.changed()},getFixedColumnCount:function(){return 1}})})();</script></polymer-element><polymer-element name="fin-hypergrid-behavior-json" extends="fin-hypergrid-behavior-base" assetpath="/dev/fin-hypergrid/polymer/html/behaviors/"><template><style type="text/css">:host{display:block;position:relative}</style></template><script>"use strict";(function(){var noop=function(){};var dataModels=fin.hypergrid.dataModels;Polymer("fin-hypergrid-behavior-json",{createColumns:function(){var dataModel=this.getDataModel();var columnCount=dataModel.getColumnCount();var headers=dataModel.getHeaders();var fields=dataModel.getFields();this.clearColumns();for(var i=0;i<columnCount;i++){var header=headers[i];var column=this.addColumn(i,header);var properties=column.getProperties();properties.field=fields[i];properties.header=header}},getDefaultDataModel:function(){var model=new dataModels.JSON;var wrapper=new this.DataModelDecorator(this.getGrid(),model);wrapper.setComponent(model);return wrapper},setHeaders:function(headerLabels){this.getDataModel().setHeaders(headerLabels)},getHeaders:function(){return this.getDataModel().getHeaders()},setFields:function(fieldNames){this.getDataModel().setFields(fieldNames);this.createColumns()},getFields:function(){return this.getDataModel().getFields()},setData:function(arrayOfUniformObjects){this.getDataModel().setData(arrayOfUniformObjects);this.createColumns();var self=this;if(this.getGrid().isColumnAutosizing()){setTimeout(function(){self.autosizeAllColumns()},100)}else{this.changed()}},getData:function(){return this.getDataModel().getData()},setTopTotals:function(nestedArray){this.getDataModel().setTopTotals(nestedArray)},getTopTotals:function(){return this.getDataModel().getTopTotals()},setColumns:function(columnDefinitions){this.getDataModel().setColumns(columnDefinitions)},enhanceDoubleClickEvent:function(event){event.row=this.getRow(event.gridCell.y)},setDataProvider:function(dataProvider){this.getDataModel().setDataProvider(dataProvider)},hasHierarchyColumn:function(){return this.getDataModel().hasHierarchyColumn()},getColumnAlignment:function(x){if(x===0&&this.hasHierarchyColumn()){return"left"}else{return"center"}},getRowSelectionMatrix:function(selectedRows){return this.getDataModel().getRowSelectionMatrix(selectedRows)},getColumnSelectionMatrix:function(selectedColumns){return this.getDataModel().getColumnSelectionMatrix(selectedColumns)},getSelectionMatrix:function(selections){return this.getDataModel().getSelectionMatrix(selections)},getRowSelection:function(){var selectedRows=this.getSelectedRows();return this.getDataModel().getRowSelection(selectedRows)},getColumnSelection:function(){var selectedColumns=this.getSelectedColumns();return this.getDataModel().getColumnSelection(selectedColumns)},getSelection:function(){var selections=this.getSelections();return this.getDataModel().getSelection(selections)},openEditor:function(div){if(!this.isColumnReorderable()){return false}var container=document.createElement("div");var group=document.createElement("fin-hypergrid-dnd-list");var availableGroups=document.createElement("fin-hypergrid-dnd-list");var hidden=document.createElement("fin-hypergrid-dnd-list");var visible=document.createElement("fin-hypergrid-dnd-list");container.appendChild(group);container.appendChild(availableGroups);container.appendChild(hidden);container.appendChild(visible);this.beColumnStyle(group.style);group.style.left="0%";group.style.width="24%";group.title="groups";group.list=this.getGroups();group.canDropItem=function(sourceList,myList,sourceIndex,item,e){noop(sourceList,myList,sourceIndex,e);return sourceList===group.list||sourceList===availableGroups.list};this.beColumnStyle(availableGroups.style);availableGroups.style.left="25%";availableGroups.style.width="24%";availableGroups.title="Available Groups";availableGroups.list=this.getAvailableGroups();availableGroups.canDropItem=function(sourceList,myList,sourceIndex,item,e){noop(sourceList,myList,sourceIndex,e);return sourceList===group.list||sourceList===availableGroups.list};this.beColumnStyle(hidden.style);hidden.style.left="50%";hidden.style.width="24%";hidden.title="hidden columns";hidden.list=this.getHiddenColumns();hidden.canDropItem=function(sourceList,myList,sourceIndex,item,e){noop(sourceList,myList,sourceIndex,e);return sourceList===hidden.list||sourceList===visible.list};this.beColumnStyle(visible.style);visible.style.left="75%";visible.style.width="24%";visible.title="visible columns";visible.list=this.getVisibleColumns();visible.canDropItem=function(sourceList,myList,sourceIndex,item,e){noop(sourceList,myList,sourceIndex,e);return sourceList===hidden.list||sourceList===visible.list};div.lists={group:group.list,availableGroups:availableGroups.list,hidden:hidden.list,visible:visible.list};div.appendChild(container);return true},getGroups:function(){return this.getDataModel().getGroups()},getAvailableGroups:function(){return this.getDataModel().getAvailableGroups()},getHiddenColumns:function(){return this.getDataModel().getHiddenColumns()},getVisibleColumns:function(){return this.getDataModel().getVisibleColumns()},setColumnDescriptors:function(lists){var tree=this.columns[0];this.columns.length=0;if(tree&&tree.label==="Tree"){this.columns.push(tree)}for(var i=0;i<lists.visible.length;i++){this.columns.push(lists.visible[i])}var groupBys=lists.group.map(function(e){return e.id});this.getDataModel().setGroups(groupBys);this.changed()},getSelectedRows:function(){var offset=-this.getGrid().getHeaderRowCount();var selections=this.getGrid().getSelectionModel().getSelectedRows();var result=selections.map(function(each){return each+offset});return result},getSelectedColumns:function(){return this.getGrid().getSelectionModel().getSelectedColumns()},getSelections:function(){return this.getGrid().getSelectionModel().getSelections()}})})();</script></polymer-element><polymer-element name="fin-hypergrid-behavior-q" extends="fin-hypergrid-behavior-base" attributes="url" assetpath="/dev/fin-hypergrid/polymer/html/behaviors/"><template><style type="text/css">:host{display:block;position:relative}</style></template><script>"use strict";(function(){var typeAlignmentMap={j:"right",s:"left",t:"center",f:"right",d:"center"};Polymer("fin-hypergrid-behavior-q",{ready:function(){this.block={data:[],headers:[],rows:0};this.readyInit();this.sorted={};this.sortStates=[""," ^"," v"," |^|"," |v|"];this.ws=null;this.reconnect()},attributeChanged:function(attrName,oldVal,newVal){console.log(attrName,"old: "+oldVal,"new:",newVal);if(attrName==="url"){this.reconnect()}if(attrName==="table"){this.setScrollPositionY(0)}},connectTo:function(newUrl){this.setAttribute("url",newUrl);this.reconnect()},reconnect:function(){this.url=this.getAttribute("url");if(!this.url){return}this.connect();this.setScrollPositionY(0);this.scrolled=false},getValue:function(x,y){var override=this.dataUpdates["p_"+x+"_"+y];if(override){return override}var normalized=Math.floor(y-this.getScrollPositionY());if(this.block&&normalized<this.block.data.length){return this.block.data[normalized][x+1]}else{return""}},clearData:function(){this.block.rows=[];this.changed()},getRowCount:function(){return this.block.rows},getColumnCount:function(){return Math.max(0,this.block.headers.length-1)},getFixedColumnCount:function(){return 1},setScrollPositionY:function(y){if(this.scrollPositionY===y){return}this.scrollPositionY=y;if(!this.isConnected()){return}var tableName=this.getAttribute("table");if(!tableName){console.log("you must provide a table attribute for the q behavior");return}this.ws.send(JSON.stringify({cmd:"fetchTableData",data:{table:tableName,start:this.getScrollPositionY(),num:60}}))},isConnected:function(){if(!this.ws){return false}return this.ws.readyState===this.ws.OPEN},getFixedRowValue:function(x){if(!this.sorted[x+1]){this.sorted[x+1]=0}var sortIndicator=this.sortStates[this.sorted[x+1]];return this.block.headers[x+1][0]+sortIndicator},getHeader:function(x){return this.block.headers[x+1][0]},getFixedColumnValue:function(x,y){return y},getCanSort:function(){var canSort=this.block.features.sorting===true;return canSort},toggleSort:function(columnIndex){if(!this.getCanSort()){return}columnIndex++;var current=this.sorted[columnIndex];var stateCount=this.sortStates.length;this.sorted={};this.sorted[columnIndex]=(current+1)%stateCount;var state=this.sortStates[this.sorted[columnIndex]];var message={cmd:"sortTable",data:{table:this.getAttribute("table")||"trade",sort:current===stateCount-1?"":this.block.headers[columnIndex][0],asc:state.indexOf("^")>0,abs:state.indexOf("|")>0,start:this.getScrollPositionY(),num:60}};this.ws.send(JSON.stringify(message))},getColumnAlignment:function(x){var alignment=typeAlignmentMap[this.block.headers[x+1][1]];return alignment},connect:function(){var d;var oldSize;var self=this;var tableName=this.getAttribute("table");if(!tableName){console.log("you must provide a table attribute for the q behavior");return}if("WebSocket"in window){try{this.ws=new WebSocket(this.url)}catch(e){console.log("could not connect to "+this.url+", trying to reconnect in a moment...");return}console.log("connecting...");this.ws.onopen=function(){console.log("connected");self.ws.send(JSON.stringify({cmd:"fetchTableData",data:{table:tableName,start:self.getScrollPositionY()||0,num:60}}))};this.ws.onclose=function(){self.clearData();console.log("disconnected from "+this.url+", trying to reconnect in a moment...");setTimeout(function(){},2e3)};this.ws.onmessage=function(e){d=JSON.parse(e.data);oldSize=self.block.rows;self.block=d;if(d.rows!==oldSize){if(self.changed){self.changed()}}self.changed()};this.ws.onerror=function(e){self.clearData();console.error("problem with connection to q at "+this.url+", trying again in a moment...",e.data);setTimeout(function(){},2e3)}}else{console.error("WebSockets not supported on your browser.")}}})})();</script></polymer-element><polymer-element name="fin-hypergrid-behavior-qtree" extends="fin-hypergrid-behavior-base" attributes="url" assetpath="/dev/fin-hypergrid/polymer/html/behaviors/"><template><style type="text/css">:host{display:block;position:relative}</style></template><script>"use strict";(function(){var hypergrid=fin.hypergrid;var noop=function(){};var logMessages=false;var hierarchyColumn="g_";var typeAlignmentMap={j:"right",s:"left",t:"center",f:"right",i:"right",e:"right",d:"center"};var iCache=new hypergrid.LRUCache(1e4);iCache.set(0,"0");var fCache=new hypergrid.LRUCache(1e4);fCache.set(0,"0.00");var icommify=function(v){var result;if(v){result=iCache.get(v);if(result){return result}else{result=numeral(v).format("0,0");iCache.set(v,result);return result}}else{return""}};var fcommify=function(v){var result;if(v){result=iCache.get(v);if(result){return result}else{result=numeral(v).format("0,0.00");iCache.set(v,result);return result}}else{return""}};var typeFormatMap={J:function(v){return v},j:icommify,s:function(v){return v},t:function(v){return v},e:fcommify,i:icommify,f:fcommify,d:function(v){return v}};var propertiesMap={columns:{TEST:{formatter:fcommify,alignment:"right",modifyConfig:function(cell){noop(cell)}},USD:{formatter:fcommify,alignment:"right",modifyConfig:function(cell){cell.config.fgColor="green";if(cell.config.value<0){cell.config.fgColor="red"}}},QTY:{formatter:icommify,alignment:"right",modifyConfig:function(cell){cell.config.fgColor="green";if(cell.config.value<0){cell.config.fgColor="red"}}}}};var sortMap={a:"-up",d:"-down",A:"-abs-up",D:"-abs-down"};var sortStates={n:"a",a:"d",d:"A",A:"D"};var imageMap={u:"up-rectangle",d:"down-rectangle","":"rectangle-spacer"};Polymer("fin-hypergrid-behavior-qtree",{ready:function(){this.block={properties:{columns:{}},count:0,visible:[],groups:[],sorts:{cols:[],rows:[]},hypertree:[{g_:[""]}]};this.readyInit();this.sorted={};this.ws=null;this.reconnect();this.msgCounter=Date.now();this.msgResponsesActions={};var cursorChanger=function(grid,event){if(this.isTopLeft(grid,event)){this.cursor="pointer"}else{this.cursor=null}if(this.next){this.next.handleMouseMove(grid,event)}};var self=this;setTimeout(function(){self.featureChain.handleMouseMove=cursorChanger;cursorChanger.bind(self.featureChain)},500)},getFixedRowCount:function(){return 2},createCellProvider:function(){var self=this;var provider=document.createElement("fin-hypergrid-cell-provider");var columns=propertiesMap.columns;provider.getCell=function(config){var cell=provider.cellCache.simpleCellRenderer;cell.config=config;var colId=self.block.visible[config.x];var type=self.block.qtypes[colId];var colProps;var colPropertyAlias=self.block.properties.columns[colId];if(colPropertyAlias){colProps=columns[colPropertyAlias];colProps.modifyConfig(cell)}var formatter=colProps?colProps.formatter:typeFormatMap[type]||function(v){return v};config.value=formatter(config.value);return cell};provider.getFixedColumnCell=function(config){var cell=provider.cellCache.treeCellRenderer;cell.config=config;return cell};provider.getFixedRowCell=function(config){var label=provider.cellCache.simpleCellRenderer;label.config=config;if(config.y===1){config.value=config.value[0];return provider.getCell(config)}config.value=config.value||"";return label};provider.getTopLeftCell=function(config){var label=provider.cellCache.simpleCellRenderer;label.config=config;if(config.y===0){return label}else{return label}};return provider},connectTo:function(newUrl){noop(newUrl)},reconnect:function(){this.url=this.getAttribute("url");if(!this.url){return}this.connect();this.setScrollPositionY(0);this.scrolled=false},getTopLeftValue:function(x,y){if(y===0){var image=this.getClickIndicator(hierarchyColumn);var clone=[image,"Hierarchy",this.getSortIndicator(hierarchyColumn)];return clone}else{return""}},getValue:function(x,y){var col=this.getColumnId(x);var normalized=Math.floor(y-this.getScrollPositionY());if(this.block&&typeof col==="string"){var val=this.block.hypertree[1][col][normalized];if(val||val===0){return val}}return""},clearData:function(){this.block.rows=[];this.changed()},getRowCount:function(){return Math.max(0,this.block.count-1)},getColumnCount:function(){return this.block.visible.length},setScrollPositionY:function(y){if(this.scrollPositionY===y){return}this.scrollPositionY=y;if(!this.isConnected()){return}var startY=this.getScrollPositionY()||0;var stopY=startY+60;this.sendMessage({id:this.getNextMessageId(),fn:"get",start:startY,end:stopY})},isConnected:function(){if(!this.ws){return false}return this.ws.readyState===this.ws.OPEN},getFixedRowValue:function(x,y){var colId=this.getColumnId(x);if(y<1){var sortIndicator=this.getSortIndicator(colId);var clickIndicator=this.getClickIndicator(colId);return[clickIndicator,colId,sortIndicator]}var total=this.block.hypertree[0][colId];return total},getClickIndicator:function(colId){if(!this.block.icons){return this.getImage("rectangle-spacer")}var direction=this.block.icons[colId];var image=this.getImage(imageMap[direction]);return image},getSortIndicator:function(colId){var sortIndex=this.block.sorts.cols.indexOf(colId);if(sortIndex<0){return this.getImage("sortable")}var sortState=this.block.sorts.sorts[sortIndex];var symbol=sortIndex+1+sortMap[sortState];var state=this.getImage(symbol);return state},getFixedColumnValue:function(x,y){var indentPixels=10;var blob=this.block.hypertree[1];var transY=Math.max(0,y-this.getScrollPositionY());var data=blob.g_[transY];var level=blob.l_[transY];var indent=5+indentPixels+(level-1)*indentPixels;var icon="";if(!blob.e_[transY]){icon=blob.o_[transY]?"▾ ":"▸ "}return{data:data,indent:indent,icon:icon}},getCanSort:function(){return true},toggleSort:function(columnIndex){var colId=this.getColumnId(columnIndex);this._toggleSort(colId)},_toggleSort:function(colId){if(!this.getCanSort()){return}var sortBlob=this.block.sorts;var sortIndex=sortBlob.cols.indexOf(colId);var currentState=sortBlob.sorts[sortIndex]||"n";var newState=sortStates[currentState];if(sortIndex>-1){sortBlob.cols.splice(sortIndex,1);sortBlob.sorts.splice(sortIndex,1)}if(newState){sortBlob.cols.unshift(colId);sortBlob.sorts.unshift(newState)}sortBlob.cols.length=sortBlob.sorts.length=Math.min(3,sortBlob.cols.length);var msg={id:this.getNextMessageId(),fn:"sorts",cols:sortBlob.cols,sorts:sortBlob.sorts};this.sendMessage(msg)},getFixedRowAlignment:function(x,y){if(y>0){return this.getColumnAlignment(x)}return this.resolveProperty("fixedRowAlign")},getColumnAlignment:function(x){var colId=this.getColumnId(x);var type=this.block.qtypes[colId];var colProps;var colPropertyAlias=this.block.properties.columns[colId];if(colPropertyAlias){colProps=propertiesMap.columns[colPropertyAlias]}var alignment=colProps?colProps.alignment:typeAlignmentMap[type];return alignment},getColumnId:function(x){var headers=this.block.visible;var col=headers[x];return col},getFixedColumnAlignment:function(){return"left"},topLeftClicked:function(grid,mouse){var gridY=mouse.gridCell.y;if(gridY<1){this.hierarchyCellClicked(grid,mouse)}else{this.controlCellClick(grid,mouse)}},hierarchyCellClicked:function(grid,mouse){var colId=hierarchyColumn;var colWidth=this.getFixedColumnWidth(0);var mouseX=mouse.mousePoint.x;var direction=this.block.icons[hierarchyColumn];if(mouseX<colWidth/2){if(direction){var colClick={id:this.getNextMessageId(),fn:"col",col:colId};this.sendMessage(colClick)}else{return}}else{this._toggleSort(colId)}},controlCellClick:function(grid,mouse){var colWidth=this.getFixedColumnWidth(0);var mouseX=mouse.mousePoint.x;var fn="expand";if(mouseX<colWidth/3){fn="collapse"}else if(mouseX<2*colWidth/3){fn="reset"}if(!this.isColumnReorderable()){fn="reset"}var msg={id:this.getNextMessageId(),fn:fn};this.sendMessage(msg)},fixedColumnClicked:function(grid,mouse){var rowNum=mouse.gridCell.y-this.getScrollPositionY();var rows=this.block.hypertree[1].n_[rowNum];if(rows.length===this.block.groups.length+1){return}var rowClick={id:this.getNextMessageId(),fn:"row",row:rows};this.sendMessage(rowClick)},fixedRowClicked:function(grid,mouse){var x=mouse.gridCell.x;var y=mouse.gridCell.y;if(y>0){return}var colId=this.getColumnId(x);var direction=this.block.icons[colId];var colWidth=this.getColumnWidth(x);var mousePoint=mouse.mousePoint.x;if(mousePoint<colWidth/2){if(direction){var colClick={id:this.getNextMessageId(),fn:"col",col:colId};this.sendMessage(colClick)}}else{this.toggleSort(x)}},cellDoubleClicked:function(cell){if(!this.isCellClickEnabled()){return}if(cell.x<=this.getFixedColumnCount()||cell.y<=this.getFixedRowCount()){return}var rowNum=cell.y-this.getScrollPositionY();var rows=this.block.hypertree[1].n_[rowNum];var colId=this.getColumnId(cell.x);var colClick={id:this.getNextMessageId(),fn:"cell",col:colId,row:rows};this.sendMessage(colClick)},sendMessage:function(message){if(logMessages){console.log("out-"+Date.now(),message)}this.ws.send(JSON.stringify(message))},isCellClickEnabled:function(){return this.block.cell},isColumnReorderable:function(){return this.block.reorderable},openEditor:function(div){if(!this.isColumnReorderable()){return false}var self=this;var container=document.createElement("div");var group=document.createElement("fin-hypergrid-dnd-list");var hidden=document.createElement("fin-hypergrid-dnd-list");var visible=document.createElement("fin-hypergrid-dnd-list");container.appendChild(group);container.appendChild(hidden);container.appendChild(visible);this.beColumnStyle(group.style);group.style.left="0%";group.title="groups";group.list=this.block.groups.slice(0);group.canDragItem=function(list,item,index,e){noop(item,index,e);if(self.block.ungrouped){return true}else{return list.length>1}};group.canDropItem=function(sourceList,myList,sourceIndex,item,e){noop(sourceList,myList,sourceIndex,e);return self.block.groupable.indexOf(item)>-1};this.beColumnStyle(hidden.style);hidden.style.left="33.3333%";hidden.title="hidden columns";hidden.list=this.block.invisible.slice(0);this.beColumnStyle(visible.style);visible.style.left="66.6666%";visible.title="visible columns";visible.list=this.block.visible.slice(0);visible.canDragItem=function(list,item,index,e){noop(item,index,e);return list.length>1};div.lists={group:group.list,hidden:hidden.list,visible:visible.list};div.appendChild(container);return true},closeEditor:function(div){var lists=div.lists;var changeCols={id:this.getNextMessageId(),fn:"groups",groups:lists.group,visible:lists.visible};this.sendMessage(changeCols);return true},getNextMessageId:function(onResponseDo){var id="js_"+this.msgCounter++;if(onResponseDo){this.msgResponsesActions[id]=onResponseDo}return id},endDragColumnNotification:function(){var self=this;var visible=this.block.visible.slice(0);for(var i=0;i<visible.length;i++){var transX=this.translateColumnIndex(i);visible[i]=this.getColumnId(transX)}var msgId=this.getNextMessageId(function(message){var colCount=self.getColumnCount();var widths=[];for(var i=0;i<colCount;i++){widths[i]=self._getColumnWidth(i)}self.initColumnIndexes(self.getPrivateState());for(i=0;i<colCount;i++){widths[i]=self._setColumnWidth(i,widths[i])}self.handleMessage(message)});var changeCols={id:msgId,fn:"groups",groups:this.block.groups,visible:visible};this.sendMessage(changeCols);return true},handleMessage:function(d){var tableState=this.getPrivateState();if(d.properties&&!d.properties.columns){d.properties.columns={}}this.block=d;if(!tableState.columnIndexes||tableState.columnIndexes.length===0||d.visible.length!==tableState.columnIndexes.length){this.initColumnIndexes(tableState)}this.changed()},connect:function(){var d={};var self=this;if("WebSocket"in window){try{this.ws=new WebSocket(this.url)}catch(e){console.log("could not connect to "+this.url+", trying to reconnect in a moment...");return}console.log("connecting...");this.ws.onopen=function(){self.setColumnWidth(0,160);var startY=self.getScrollPositionY()||0;var stopY=startY+60;self.sendMessage({id:self.getNextMessageId(),fn:"get",start:startY,end:stopY})};this.ws.onclose=function(){console.log("disconnected from "+this.url+", trying to reconnect in a moment...")};this.ws.onmessage=function(e){d=JSON.parse(e.data);if(logMessages){console.log("in-"+Date.now(),d)}var msgId=d.id;var action=self.msgResponsesActions[msgId];if(action){action(d);self.msgResponsesActions[msgId]=undefined}else{self.handleMessage(d)}self.initButtonBar();self.autosizeColumns()};this.ws.onerror=function(e){self.clearData();console.error("problem with connection to q at "+this.url+", trying again in a moment...",e.data);setTimeout(function(){},2e3)}}else{console.error("WebSockets not supported on your browser.")}},beColumnStyle:function(style){style.top="5%";style.position="absolute";style.width="33.3333%";style.height="99%";style.whiteSpace="nowrap"},highlightCellOnHover:function(isColumnHovered,isRowHovered){return isRowHovered},getCellEditorAt:function(x,y){noop(x,y);return null},getFixedColumnCount:function(){return 1},getTreeStateDescription:function(){var object=this.block.message;var result='<table class="qtreedescription">\n';var data="<tr>";for(var property in object){if(object.hasOwnProperty(property)){result=result+"<col><col>";data=data+"<td>"+property+":</td><td>"+object[property]+"</td>\n"}}result=result+"\n"+data+"</tr></table>";return result},setButtonBarHolder:function(buttonBarHolder){this.buttonBarHolder=buttonBarHolder;this.initButtonBar()},initButtonBar:function(){var self=this;var image;var bbh=this.buttonBarHolder;if(!bbh){return}bbh.innerHTML="";var action=function(name){return function(){self.buttonBarIconClick(name)}};var imageNames=[];if(this.block.buttons){imageNames=Object.keys(this.block.buttons)}for(var i=0;i<imageNames.length;i++){var name=imageNames[i];image=this.getImage(name.toLowerCase()).cloneNode();bbh.appendChild(image);if(!this.block.buttons[name]){image.style.opacity=.4;image.style.cursor="default"}else{image.onclick=action(name)}image.setAttribute("title",name)}image=this.getImage("add-column").cloneNode();bbh.appendChild(image);image.setAttribute("title","open/close column editor");if(this.isColumnReorderable()){image.onclick=function(){self.toggleColumnPicker()}}else{image.style.opacity=.4;image.style.cursor="default"}},buttonBarIconClick:function(buttonLabel){var bbClick={id:this.getNextMessageId(),fn:buttonLabel};this.sendMessage(bbClick)}})})();</script></polymer-element><polymer-element name="fin-hypergrid-behavior-web-worker" extends="fin-hypergrid-behavior-base" assetpath="/dev/fin-hypergrid/polymer/html/behaviors/"><template><style type="text/css">:host{display:block;position:relative}</style></template><script>"use strict";(function(){Polymer("fin-hypergrid-behavior-web-worker",{ready:function(){this.readyInit();var self=this;this.block={data:[],headers:[],rows:0};this.sortStates=[" "," ↑"," ↓"];this.worker=new Worker("js/json-web-worker.js");this.worker.onmessage=function(e){self.block=e.data;self.changed()}},getDefaultState:function(){return{columnIndexes:[],rowHeights:{},columnProperties:[],fixedColumnCount:1,fixedRowCount:1}},postMessage:function(message){this.worker.postMessage(message)},setData:function(jsonData){this.postMessage({cmd:"setData",data:jsonData});this.initialize()},initialize:function(){this.changed();this.postMessage({cmd:"fetchTableData",data:{start:this.getScrollPositionY()||0,num:60}})},getValue:function(x,y){var override=this.dataUpdates["p_"+x+"_"+y];if(override){return override}var fields=this.getFields();return this.block.data[y-this.getScrollPositionY()][fields[x]]},clearData:function(){this.block.rows=[];this.changed()},getRowCount:function(){return this.block.rows},getColumnCount:function(){return this.block.headers.length},setScrollPositionY:function(y){if(this.scrollPositionY===y){return}this.scrollPositionY=y;this.postMessage({cmd:"fetchTableData",data:{start:this.getScrollPositionY(),num:60}})},getFixedRowValue:function(x){if(!this.tableState.sorted[x]){this.tableState.sorted[x]=0}var sortIndicator=this.sortStates[this.tableState.sorted[x]];return this.block.headers[x]+sortIndicator},getFields:function(){return this.block.fields},getHeader:function(x){return this.block.headers[x]},getFixedColumnValue:function(x,y){return y},getCanSort:function(){var canSort=this.block.features.sorting===true;return canSort},toggleSort:function(columnIndex){if(!this.getCanSort()){return}this.grid.clearSelections();var current=this.tableState.sorted[columnIndex];var stateCount=this.sortStates.length;this.tableState.sorted={};this.tableState.sorted[columnIndex]=(current+1)%stateCount;var state=this.tableState.sorted[columnIndex];var message={cmd:"sortTable",data:{table:"trade",sortIndex:current===stateCount-1?-1:columnIndex,state:state,start:this.getScrollPositionY(),num:60}};this.postMessage(message)},getColumnAlignment:function(){return"center"},getFixedColumnCount:function(){return 1}})})();</script></polymer-element></div><polymer-element name="fin-hypergrid" assetpath="polymer/html/"><template><style type="text/css">:host{position:relative;display:inline-block;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;overflow:hidden}.visible{opacity:.75}.hidden{opacity:0}.editor{position:absolute;display:none;border:solid 2px #000;outline:0;padding:0;z-index:1000}</style><fin-plugins></fin-plugins><div style="top:0px;right:0px;bottom:0px;left:0px;position:absolute" id="scrollbars"><style>div.finbar-horizontal,div.finbar-vertical{z-index:5;background-color:rgba(255,255,255,.5);box-shadow:0 0 3px #000,0 0 3px #000,0 0 3px #000}div.finbar-horizontal>.thumb,div.finbar-vertical>.thumb{opacity:.85;box-shadow:0 0 3px #000,0 0 3px #000,0 0 3px #000}</style></div><fin-canvas></fin-canvas><input class="editor"><content></content></template><script>"use strict";(function(){var hypergrid=fin.hypergrid;var rectangles;var globalCellEditors={};var propertiesInitialized=false;var noop=function(){};var initializeBasicCellEditors=function(){initializeCellEditor(new fin.hypergrid.cellEditors.Textfield);initializeCellEditor(new fin.hypergrid.cellEditors.Choice);initializeCellEditor(new fin.hypergrid.cellEditors.Color);initializeCellEditor(new fin.hypergrid.cellEditors.Date);initializeCellEditor(new fin.hypergrid.cellEditors.Slider);initializeCellEditor(new fin.hypergrid.cellEditors.Spinner)};var initializeCellEditor=function(cellEditor){globalCellEditors[cellEditor.alias]=cellEditor};var fontData={};var textWidthCache=new hypergrid.LRUCache(2e3);var getTextWidth=function(gc,string){if(string===null||string===undefined){return 0}string=string+"";if(string.length===0){return 0}var key=gc.font+string;var width=textWidthCache.get(key);if(!width){width=gc.measureText(string).width;textWidthCache.set(key,width)}return width};var getTextHeight=function(font){var result=fontData[font];if(result){return result}result={};var text=document.createElement("span");text.textContent="Hg";text.style.font=font;var block=document.createElement("div");block.style.display="inline-block";block.style.width="1px";block.style.height="0px";var div=document.createElement("div");div.appendChild(text);div.appendChild(block);div.style.position="absolute";document.body.appendChild(div);try{block.style.verticalAlign="baseline";var blockRect=block.getBoundingClientRect();var textRect=text.getBoundingClientRect();result.ascent=blockRect.top-textRect.top;block.style.verticalAlign="bottom";result.height=blockRect.top-textRect.top;result.descent=result.height-result.ascent}finally{document.body.removeChild(div)}if(result.height!==0){fontData[font]=result}return result};var defaultProperties=function(){var properties={font:"13px Tahoma, Geneva, sans-serif",color:"rgb(25, 25, 25)",backgroundColor:"rgb(241, 241, 241)",foregroundSelectionColor:"rgb(25, 25, 25)",backgroundSelectionColor:"rgb(183, 219, 255)",columnHeaderFont:"12px Tahoma, Geneva, sans-serif",columnHeaderColor:"rgb(25, 25, 25)",columnHeaderBackgroundColor:"rgb(223, 227, 232)",columnHeaderForegroundSelectionColor:"rgb(25, 25, 25)",columnHeaderBackgroundSelectionColor:"rgb(255, 220, 97)",columnHeaderForegroundColumnSelectionColor:"rgb(25, 25, 25)",columnHeaderBackgroundColumnSelectionColor:"rgb(255, 180, 0)",rowHeaderFont:"12px Tahoma, Geneva, sans-serif",rowHeaderColor:"rgb(25, 25, 25)",rowHeaderBackgroundColor:"rgb(223, 227, 232)",rowHeaderForegroundSelectionColor:"rgb(25, 25, 25)",rowHeaderBackgroundSelectionColor:"rgb(255, 220, 97)",rowHeaderForegroundRowSelectionColor:"rgb(25, 25, 25)",rowHeaderBackgroundRowSelectionColor:"rgb(255, 180, 0)",filterFont:"12px Tahoma, Geneva, sans-serif",filterColor:"rgb(25, 25, 25)",filterBackgroundColor:"white",filterForegroundSelectionColor:"rgb(25, 25, 25)",filterBackgroundSelectionColor:"rgb(255, 220, 97)",filterCellBorderStyle:"rgba(0,0,0,0.8)",filterCellBorderThickness:"0.4",treeColumnFont:"12px Tahoma, Geneva, sans-serif",treeColumnColor:"rgb(25, 25, 25)",treeColumnBackgroundColor:"rgb(223, 227, 232)",treeColumnForegroundSelectionColor:"rgb(25, 25, 25)",treeColumnBackgroundSelectionColor:"rgb(255, 220, 97)",treeColumnForegroundColumnSelectionColor:"rgb(25, 25, 25)",treeColumnBackgroundColumnSelectionColor:"rgb(255, 180, 0)",backgroundColor2:"rgb(201, 201, 201)",voffset:0,scrollbarHoverOver:"visible",scrollbarHoverOff:"hidden",scrollingEnabled:true,vScrollbarClassPrefix:"fin-sb-user",hScrollbarClassPrefix:"fin-sb-user",fixedRowAlign:"center",fixedColAlign:"center",cellPadding:5,gridLinesH:true,gridLinesV:true,lineColor:"rgb(199, 199, 199)",lineWidth:.4,defaultRowHeight:15,defaultColumnWidth:100,repaintIntervalRate:60,repaintImmediately:false,useBitBlit:false,useHiDPI:true,editorActivationKeys:["alt","esc"],readOnly:false,getTextWidth:getTextWidth,getTextHeight:getTextHeight,fixedColumnCount:0,fixedRowCount:0,headerColumnCount:0,showRowNumbers:true,showHeaderRow:true,showFilterRow:true,cellSelection:true,columnSelection:true,rowSelection:true,singleRowSelectionMode:true,columnAutosizing:true,rowResize:false};return properties};var normalizeRect=function(rect){var o=rect.origin;var c=rect.corner;var ox=Math.min(o.x,c.x);var oy=Math.min(o.y,c.y);var cx=Math.max(o.x,c.x);var cy=Math.max(o.y,c.y);var result=rectangles.rectangle.create(ox,oy,cx-ox,cy-oy);return result};var buildPolymerTheme=function(){clearObjectProperties(polymerTheme);var pb=document.createElement("paper-button");pb.style.display="none";pb.setAttribute("disabled",true);document.body.appendChild(pb);var p=window.getComputedStyle(pb);var section=document.createElement("section");section.style.display="none";section.setAttribute("hero",true);document.body.appendChild(section);var h=window.getComputedStyle(document.querySelector("html"));var hb=window.getComputedStyle(document.querySelector("html, body"));var s=window.getComputedStyle(section);polymerTheme.columnHeaderBackgroundColor=p.color;polymerTheme.rowHeaderBackgroundColor=p.color;polymerTheme.topLeftBackgroundColor=p.color;polymerTheme.lineColor=p.backgroundColor;polymerTheme.backgroundColor2=hb.backgroundColor;polymerTheme.color=h.color;polymerTheme.fontFamily=h.fontFamily;polymerTheme.backgroundColor=s.backgroundColor;pb.setAttribute("disabled",false);pb.setAttribute("secondary",true);pb.setAttribute("raised",true);p=window.getComputedStyle(pb);polymerTheme.columnHeaderColor=p.color;polymerTheme.rowHeaderColor=p.color;polymerTheme.topLeftColor=p.color;polymerTheme.backgroundSelectionColor=p.backgroundColor;polymerTheme.foregroundSelectionColor=p.color;pb.setAttribute("secondary",false);pb.setAttribute("warning",true);polymerTheme.columnHeaderForegroundSelectionColor=p.color;polymerTheme.columnHeaderBackgroundSelectionColor=p.backgroundColor;polymerTheme.rowHeaderForegroundSelectionColor=p.color;polymerTheme.fixedColumnBackgroundSelectionColor=p.backgroundColor;if(polymerTheme.columnHeaderBackgroundSelectionColor==="rgba(0, 0, 0, 0)"||polymerTheme.lineColor==="transparent"){clearObjectProperties(polymerTheme)}document.body.removeChild(pb);document.body.removeChild(section)};var clearObjectProperties=function(obj){for(var prop in obj){if(obj.hasOwnProperty(prop)){delete obj[prop]}}};var valueOrFunctionExecute=function(valueOrFunction){var isFunction=(typeof valueOrFunction)[0]==="f";var result=isFunction?valueOrFunction():valueOrFunction;if(!result&&result!==0){return""}return result};var defaults,polymerTheme,globalProperties;(function(){defaults=defaultProperties();polymerTheme=Object.create(defaults);globalProperties=Object.create(polymerTheme)})();Polymer("fin-hypergrid",{behavior:{setScrollPositionY:noop,setScrollPositionX:noop,getColumnCount:function(){return 0},getFixedColumnCount:function(){return 0},getFixedColumnsWidth:function(){return 0},getFixedColumnsMaxWidth:function(){return 0},setRenderedWidth:function(){return 0},getRowCount:function(){return 0},getFixedRowCount:function(){return 0},getFixedRowsHeight:function(){return 0},getFixedRowsMaxHeight:function(){return 0},setRenderedHeight:function(){return 0},getCellProvider:noop,click:noop,doubleClick:noop},isWebkit:true,mouseDown:[],dragExtent:null,vScrollValue:0,hScrollValue:0,rectangles:null,selectionModel:null,cellEditor:null,sbMouseIsDown:false,sbHScroller:null,sbVScroller:null,sbHScrollConfig:{},sbVScrollConfig:{},sbPrevVScrollValue:null,sbPrevHScrollValue:null,sbHValueHolder:{},sbVValueHolder:{},cellEditors:null,renderOverridesCache:{},hoverCell:null,isScrollButtonClick:false,scrollingNow:false,lastEdgeSelection:null,domReady:function(){if(!propertiesInitialized){propertiesInitialized=true;buildPolymerTheme();initializeBasicCellEditors()}this.lastEdgeSelection=[0,0];var self=this;rectangles=rectangles||document.createElement("fin-rectangle");this.rectangles=rectangles;this.lnfProperties=Object.create(globalProperties);this.isWebkit=navigator.userAgent.toLowerCase().indexOf("webkit")>-1;this.selectionModel=new hypergrid.SelectionModel;this.selectionModel.getGrid=function(){return self};this.cellEditors=Object.create(globalCellEditors);this.renderOverridesCache={};this.oncontextmenu=function(event){event.preventDefault();return false};this.clearMouseDown();this.dragExtent=rectangles.point.create(0,0);this.pluginsDo(function(each){if(each.installOn){each.installOn(self)}});this.numRows=0;this.numColumns=0;this.initCanvas();this.initRenderer();this.initScrollbars();this.checkScrollbarVisibility();document.body.addEventListener("copy",function(evt){self.checkClipboardCopy(evt)});this.getCanvas().resize();this.fire("load");this.isScrollButtonClick=false},resetTextWidthCache:function(){textWidthCache=hypergrid.LRUCache(2e3)},getProperties:function(){return this.getPrivateState()},_getProperties:function(){return this.lnfProperties},computeCellsBounds:function(){this.getRenderer().computeCellsBounds()},initializeCellEditor:function(cellEditorName){initializeCellEditor(cellEditorName)},toggleColumnPicker:function(){this.getBehavior().toggleColumnPicker()},isHovered:function(x,y){var p=this.getHoverCell();if(!p){return false}return p.x===x&&p.y===y},isColumnHovered:function(x){var p=this.getHoverCell();if(!p){return false}return p.x===x},isRowResizeable:function(){return this.resolveProperty("rowResize")},isRowHovered:function(y){var p=this.getHoverCell();if(!p){return false}return p.y===y},getHoverCell:function(){return this.hoverCell},setHoverCell:function(point){var me=this.hoverCell;var newPoint=rectangles.point.create(point.x,point.y);if(me&&me.equals(newPoint)){return}this.hoverCell=newPoint;this.fireSyntheticOnCellEnterEvent(newPoint);this.repaint()},addGlobalProperties:function(properties){if(!globalProperties){var self=this;setTimeout(function(){self.addGlobalProperties(properties)},10)}else{this._addGlobalProperties(properties)}},_addGlobalProperties:function(properties){for(var key in properties){if(properties.hasOwnProperty(key)){globalProperties[key]=properties[key]}}},addProperties:function(moreProperties){var properties=this.getProperties();for(var key in moreProperties){if(moreProperties.hasOwnProperty(key)){properties[key]=moreProperties[key]}}this.refreshProperties()},refreshProperties:function(){var interval=this.resolveProperty("repaintIntervalRate");var useBitBlit=this.resolveProperty("useBitBlit");this.canvas=this.shadowRoot.querySelector("fin-canvas");interval=interval===undefined?15:interval;console.log("refresh rate = "+interval);this.canvas.setAttribute("fps",interval);this.canvas.setAttribute("bitblit",useBitBlit===true);this.checkScrollbarVisibility();this.getBehavior().defaultRowHeight=null;if(this.isColumnAutosizing()){this.getBehavior().autosizeAllColumns()}},getPrivateState:function(){var state=this.getBehavior().getPrivateState();return state},setState:function(state){var self=this;this.getBehavior().setState(state);setTimeout(function(){self.behaviorChanged();self.synchronizeScrollingBoundries()},100)},getState:function(){var state=this.getBehavior().getState();return state},getMouseDown:function(){var last=this.mouseDown.length-1;if(last<0){return null}return this.mouseDown[last]},popMouseDown:function(){if(this.mouseDown.length===0){return}this.mouseDown.length=this.mouseDown.length-1},clearMouseDown:function(){this.mouseDown=[rectangles.point.create(-1,-1)];this.dragExtent=null},setMouseDown:function(point){this.mouseDown.push(point)},getDragExtent:function(){return this.dragExtent},setDragExtent:function(point){this.dragExtent=point},pluginsDo:function(func){var userPlugins=this.children.array();var pluginsTag=this.shadowRoot.querySelector("fin-plugins");var plugins=userPlugins;if(pluginsTag){var systemPlugins=pluginsTag.children.array();plugins=systemPlugins.concat(plugins)}for(var i=0;i<plugins.length;i++){var plugin=plugins[i];func(plugin)}},getCellProvider:function(){var provider=this.getBehavior().getCellProvider();return provider},gridRenderedNotification:function(){this.updateRenderedSizes();if(this.cellEditor){this.cellEditor.gridRenderedNotification()}this.checkColumnAutosizing();this.fireSyntheticGridRenderedEvent()},checkColumnAutosizing:function(){var behavior=this.getBehavior();behavior.autoSizeRowNumberColumn();if(this.isColumnAutosizing()){behavior.checkColumnAutosizing(false)}},updateRenderedSizes:function(){var behavior=this.getBehavior();behavior.setRenderedColumnCount(this.getVisibleColumns()+1);behavior.setRenderedRowCount(this.getVisibleRows()+1)},checkClipboardCopy:function(event){if(!this.hasFocus()){return}event.preventDefault();var csvData=this.getSelectionAsTSV();event.clipboardData.setData("text/plain",csvData)},hasSelections:function(){if(!this.getSelectionModel){return}return this.getSelectionModel().hasSelections()},getSelectionAsTSV:function(){var sm=this.getSelectionModel();if(sm.hasSelections()){var selections=this.getSelectionMatrix();selections=selections[selections.length-1];return this.getMatrixSelectionAsTSV(selections)}else if(sm.hasRowSelections()){return this.getMatrixSelectionAsTSV(this.getRowSelectionMatrix())}else if(sm.hasColumnSelections()){return this.getMatrixSelectionAsTSV(this.getColumnSelectionMatrix())}},getMatrixSelectionAsTSV:function(selections){if(selections.length===0){return}var width=selections.length;var height=selections[0].length;var area=width*height;if(area>2e4){alert("selection size is too big to copy to the paste buffer");return""}var collector=[];for(var y=0;y<height;y++){for(var x=0;x<width;x++){var data=selections[x][y];collector.push(data);if(x!==width-1){collector.push("	")}}if(y!==height-1){collector.push("\n")}}var text=collector.join("");return text},hasFocus:function(){return this.getCanvas().hasFocus()},clearSelections:function(){this.getSelectionModel().clear();this.clearMouseDown()},clearMostRecentSelection:function(){this.getSelectionModel().clearMostRecentSelection()},clearMostRecentColumnSelection:function(){this.getSelectionModel().clearMostRecentColumnSelection()},clearMostRecentRowSelection:function(){this.getSelectionModel().clearMostRecentRowSelection()},select:function(ox,oy,ex,ey){if(ox<0||oy<0){return}this.getSelectionModel().select(ox,oy,ex,ey)},isSelected:function(x,y){return this.getSelectionModel().isSelected(x,y)},isCellSelectedInRow:function(col){var selectionModel=this.getSelectionModel();var isSelected=selectionModel.isCellSelectedInRow(col);return isSelected},isCellSelectedInColumn:function(row){var selectionModel=this.getSelectionModel();var isSelected=selectionModel.isCellSelectedInColumn(row);return isSelected},getSelectionModel:function(){return this.selectionModel},getBehavior:function(){return this.behavior},setBehavior:function(newBehavior){this.behavior=newBehavior;this.behavior.setGrid(this);this.behavior.changed=this.behaviorChanged.bind(this);this.behavior.shapeChanged=this.behaviorShapeChanged.bind(this);this.behavior.stateChanged=this.behaviorStateChanged.bind(this)},behaviorChanged:function(){if(this.numColumns!==this.getColumnCount()||this.numRows!==this.getRowCount()){this.numColumns=this.getColumnCount();this.numRows=this.getRowCount();this.behaviorShapeChanged()}this.computeCellsBounds();this.repaint()},getBounds:function(){var canvas=this.getCanvas();if(canvas){return canvas.getBounds()}else{return null}},resolveProperty:function(key){return this.getProperties()[key]},behaviorShapeChanged:function(){this.synchronizeScrollingBoundries()},behaviorStateChanged:function(){this.getRenderer().computeCellsBounds();this.repaint()},repaint:function(){var now=this.resolveProperty("repaintImmediately");var canvas=this.getCanvas();if(canvas){if(now===true){canvas.paintNow()}else{canvas.repaint()}}},paintNow:function(){var canvas=this.getCanvas();canvas.paintNow()},isHiDPI:function(){return this.resolveProperty("useHiDPI")!==false},initCanvas:function(){var self=this;var interval=this.resolveProperty("repaintIntervalRate");var useBitBlit=this.resolveProperty("useBitBlit");this.canvas=this.shadowRoot.querySelector("fin-canvas");interval=interval===undefined?15:interval;this.canvas.setAttribute("fps",interval);this.canvas.setAttribute("bitblit",useBitBlit===true);this.canvas.isHiDPI=function(){return self.isHiDPI()};this.canvas.style.position="absolute";this.canvas.style.top=0;this.canvas.style.right="-200px";this.canvas.style.bottom=0;this.canvas.style.left=0;this.canvas.resizeNotification=function(){self.resized()};this.addFinEventListener("fin-canvas-mousemove",function(e){if(self.resolveProperty("readOnly")){return}var mouse=e.detail.mouse;var mouseEvent=self.getGridCellFromMousePoint(mouse);mouseEvent.primitiveEvent=e;self.delegateMouseMove(mouseEvent)});this.addFinEventListener("fin-canvas-mousedown",function(e){if(self.resolveProperty("readOnly")){return}var mouse=e.detail.mouse;var mouseEvent=self.getGridCellFromMousePoint(mouse);mouseEvent.keys=e.detail.keys;mouseEvent.primitiveEvent=e;self.mouseDownState=mouseEvent;self.delegateMouseDown(mouseEvent);self.fireSyntheticMouseDownEvent(mouseEvent);self.repaint()});this.addFinEventListener("fin-canvas-mouseup",function(e){if(self.resolveProperty("readOnly")){return}self.dragging=false;if(self.isScrollingNow()){self.setScrollingNow(false)}if(self.columnDragAutoScrolling){self.columnDragAutoScrolling=false}var mouse=e.detail.mouse;var mouseEvent=self.getGridCellFromMousePoint(mouse);mouseEvent.primitiveEvent=e;self.delegateMouseUp(mouseEvent);if(self.mouseDownState){self.fireSyntheticButtonPressedEvent(self.mouseDownState)}self.mouseDownState=null;self.fireSyntheticMouseUpEvent(mouseEvent)});this.addFinEventListener("fin-canvas-tap",function(e){if(self.resolveProperty("readOnly")){return}var mouse=e.detail.mouse;var tapEvent=self.getGridCellFromMousePoint(mouse);tapEvent.primitiveEvent=e;tapEvent.keys=e.detail.keys;self.fireSyntheticClickEvent(tapEvent);self.delegateTap(tapEvent)});this.addFinEventListener("fin-canvas-drag",function(e){if(self.resolveProperty("readOnly")){return}self.dragging=true;var mouse=e.detail.mouse;var mouseEvent=self.getGridCellFromMousePoint(mouse);mouseEvent.primitiveEvent=e;self.delegateMouseDrag(mouseEvent)});this.addFinEventListener("fin-canvas-keydown",function(e){if(self.resolveProperty("readOnly")){return}self.fireSyntheticKeydownEvent(e);self.delegateKeyDown(e)});this.addFinEventListener("fin-canvas-keyup",function(e){if(self.resolveProperty("readOnly")){return}self.fireSyntheticKeyupEvent(e);self.delegateKeyUp(e)});this.addFinEventListener("fin-canvas-track",function(e){if(self.resolveProperty("readOnly")){return}if(self.dragging){return}var primEvent=e.detail.primitiveEvent;if(Math.abs(primEvent.dy)>Math.abs(primEvent.dx)){if(primEvent.yDirection>0){self.scrollVBy(-2)}else if(primEvent.yDirection<-0){self.scrollVBy(2)}}else{if(primEvent.xDirection>0){self.scrollHBy(-1)}else if(primEvent.xDirection<-0){self.scrollHBy(1)}}});this.addFinEventListener("fin-canvas-dblclick",function(e){if(self.resolveProperty("readOnly")){return}var mouse=e.detail.mouse;var mouseEvent=self.getGridCellFromMousePoint(mouse);mouseEvent.primitiveEvent=e;self.fireSyntheticDoubleClickEvent(mouseEvent,e);self.delegateDoubleClick(mouseEvent)});this.addFinEventListener("fin-canvas-wheelmoved",function(e){var mouse=e.detail.mouse;var mouseEvent=self.getGridCellFromMousePoint(mouse);mouseEvent.primitiveEvent=e.detail.primitiveEvent;self.delegateWheelMoved(mouseEvent)});this.addFinEventListener("fin-canvas-mouseout",function(e){if(self.resolveProperty("readOnly")){return}var mouse=e.detail.mouse;var mouseEvent=self.getGridCellFromMousePoint(mouse);mouseEvent.primitiveEvent=e.detail.primitiveEvent;self.delegateMouseExit(mouseEvent)});this.addFinEventListener("fin-canvas-context-menu",function(e){var mouse=e.detail.mouse;var mouseEvent=self.getGridCellFromMousePoint(mouse);mouseEvent.primitiveEvent=e.detail.primitiveEvent;self.delegateContextMenu(mouseEvent)});this.canvas.removeAttribute("tabindex")},convertViewPointToDataPoint:function(viewPoint){return this.getBehavior().convertViewPointToDataPoint(viewPoint)},convertDataPointToViewPoint:function(dataPoint){return this.getBehavior().convertDataPointToViewPoint(dataPoint)},addFinEventListener:function(eventName,callback){this.canvas.addEventListener(eventName,callback)},setScrollingNow:function(isItNow){this.scrollingNow=isItNow},isScrollingNow:function(){return this.scrollingNow},overColumnDivider:function(mouseEvent){var x=mouseEvent.primitiveEvent.detail.mouse.x;var whichCol=this.getRenderer().overColumnDivider(x);return whichCol},overRowDivider:function(mouseEvent){var y=mouseEvent.primitiveEvent.detail.mouse.y;var which=this.getRenderer().overRowDivider(y);return which},beCursor:function(cursorName){this.style.cursor=cursorName},delegateWheelMoved:function(event){var behavior=this.getBehavior();behavior.onWheelMoved(this,event)},delegateMouseExit:function(event){var behavior=this.getBehavior();behavior.handleMouseExit(this,event)},delegateContextMenu:function(event){var behavior=this.getBehavior();behavior.onContextMenu(this,event)},delegateMouseMove:function(mouseDetails){var behavior=this.getBehavior();behavior.onMouseMove(this,mouseDetails)},delegateMouseDown:function(mouseDetails){var behavior=this.getBehavior();behavior.handleMouseDown(this,mouseDetails)},delegateMouseUp:function(mouseDetails){var behavior=this.getBehavior();behavior.onMouseUp(this,mouseDetails)},delegateTap:function(mouseDetails){var behavior=this.getBehavior();behavior.onTap(this,mouseDetails)},delegateMouseDrag:function(mouseDetails){var behavior=this.getBehavior();behavior.onMouseDrag(this,mouseDetails)},delegateDoubleClick:function(mouseDetails){var behavior=this.getBehavior();behavior.onDoubleClick(this,mouseDetails)},delegateHoldPulse:function(mouseDetails){var behavior=this.getBehavior();behavior.onHoldPulse(this,mouseDetails)},delegateKeyDown:function(event){var behavior=this.getBehavior();behavior.onKeyDown(this,event)},delegateKeyUp:function(event){var behavior=this.getBehavior();behavior.onKeyUp(this,event)},stopEditing:function(){if(this.cellEditor){if(this.cellEditor.stopEditing){this.cellEditor.stopEditing()}this.cellEditor=null}},registerCellEditor:function(alias,cellEditor){this.cellEditors[alias]=cellEditor},getDataBounds:function(){var colDNDHackWidth=200;var b=this.canvas.bounds;var result=rectangles.rectangle.create(0,0,b.origin.x+b.extent.x-colDNDHackWidth,b.origin.y+b.extent.y);return result},getRowNumbersWidth:function(){if(this.isShowRowNumbers()){return this.getRenderer().getRowNumbersWidth()}else{return 0}},getCanvas:function(){return this.canvas},editAt:function(cellEditor,coordinates){this.cellEditor=cellEditor;var cell=coordinates.gridCell;var x=cell.x;var y=cell.y;if(x<0||y<0){return}var editPoint=rectangles.point.create(x,y);this.setMouseDown(editPoint);this.setDragExtent(rectangles.point.create(0,0));if(!cellEditor.isAdded){cellEditor.isAdded=true;this.shadowRoot.appendChild(cellEditor.getInput())}cellEditor.grid=this;cellEditor.beginEditAt(editPoint)},isColumnVisible:function(columnIndex){var isVisible=this.getRenderer().isColumnVisible(columnIndex);return isVisible},isDataRowVisible:function(rowIndex){var isVisible=this.getRenderer().isRowVisible(rowIndex);return isVisible},isDataVisible:function(columnIndex,rowIndex){var isVisible=this.isDataRowVisible(rowIndex)&&this.isColumnVisible(columnIndex);return isVisible},insureModelColIsVisible:function(colIndex,offsetX){var maxCols=this.getColumnCount()-1;var indexToCheck=colIndex;if(offsetX>0){indexToCheck++}if(!this.isColumnVisible(indexToCheck)||colIndex===maxCols){this.scrollBy(offsetX,0);return true}return false},insureModelRowIsVisible:function(rowIndex,offsetY){var maxRows=this.getRowCount()-1;var indexToCheck=rowIndex;if(offsetY>0){indexToCheck++}if(!this.isDataRowVisible(indexToCheck)||rowIndex===maxRows){this.scrollBy(0,offsetY);return true}return false},scrollBy:function(offsetX,offsetY){this.scrollHBy(offsetX);this.scrollVBy(offsetY)},scrollVBy:function(offsetY){var max=this.sbVScroller.range.max;var oldValue=this.getVScrollValue();var newValue=Math.min(max,Math.max(0,oldValue+offsetY));if(newValue===oldValue){return}this.setVScrollValue(newValue)},scrollHBy:function(offsetX){var max=this.sbHScroller.range.max;var oldValue=this.getHScrollValue();var newValue=Math.min(max,Math.max(0,oldValue+offsetX));if(newValue===oldValue){return}this.setHScrollValue(newValue)},getGridCellFromMousePoint:function(mouse){var cell=this.getRenderer().getGridCellFromMousePoint(mouse);return cell},getBoundsOfCell:function(cell){var b=this.getRenderer().getBoundsOfCell(cell);var newBounds=rectangles.rectangle.create(b.x,b.y,b.width,b.height);return newBounds},resized:function(){this.synchronizeScrollingBoundries()},cellClicked:function(event){var cell=event.gridCell;var colCount=this.getColumnCount();var rowCount=this.getRowCount();if(cell.x>colCount||cell.y>rowCount){return}var hovered=this.getHoverCell();var sy=this.getVScrollValue();var x=hovered.x;if(hovered.y<0){sy=0}hovered=rectangles.point.create(x,hovered.y+sy);this.getBehavior().cellClicked(hovered,event)},setTotalsValueNotification:function(x,y,value){this.fireSyntheticSetTotalsValue(x,y,value)},fireSyntheticSetTotalsValue:function(x,y,value){var clickEvent=new CustomEvent("fin-set-totals-value",{detail:{x:x,y:y,value:value}});this.canvas.dispatchEvent(clickEvent)},fireSyntheticEditorKeyUpEvent:function(inputControl,keyEvent){var clickEvent=new CustomEvent("fin-editor-key-up",{detail:{input:inputControl,keyEvent:keyEvent}});this.canvas.dispatchEvent(clickEvent)},fireSyntheticEditorKeyDownEvent:function(inputControl,keyEvent){var clickEvent=new CustomEvent("fin-editor-key-down",{detail:{input:inputControl,keyEvent:keyEvent}});this.canvas.dispatchEvent(clickEvent)},fireSyntheticEditorKeyPressEvent:function(inputControl,keyEvent){var clickEvent=new CustomEvent("fin-editor-key-press",{detail:{input:inputControl,keyEvent:keyEvent}});this.canvas.dispatchEvent(clickEvent)},fireSyntheticEditorDataChangeEvent:function(inputControl,oldValue,newValue){var clickEvent=new CustomEvent("fin-editor-data-change",{detail:{input:inputControl,oldValue:oldValue,newValue:newValue},cancelable:true});return this.canvas.dispatchEvent(clickEvent)},fireSyntheticRowSelectionChangedEvent:function(){var selectionEvent=new CustomEvent("fin-row-selection-changed",{detail:{rows:this.getSelectedRows(),columns:this.getSelectedColumns(),selections:this.getSelectionModel().getSelections()}});this.canvas.dispatchEvent(selectionEvent)},fireSyntheticColumnSelectionChangedEvent:function(){var selectionEvent=new CustomEvent("fin-column-selection-changed",{detail:{rows:this.getSelectedRows(),columns:this.getSelectedColumns(),selections:this.getSelectionModel().getSelections()}});this.canvas.dispatchEvent(selectionEvent)},selectionChanged:function(){var selectedRows=this.getSelectedRows();var selectionEvent=new CustomEvent("fin-selection-changed",{detail:{rows:selectedRows,columns:this.getSelectedColumns(),selections:this.getSelectionModel().getSelections()}});this.canvas.dispatchEvent(selectionEvent)},getRowSelection:function(){var selectedRows=this.getSelectionModel().getSelectedRows();var numCols=this.getColumnCount();var result={};for(var c=0;c<numCols;c++){var column=new Array(selectedRows.length);result[this.getField(c)]=column;for(var r=0;r<selectedRows.length;r++){var rowIndex=selectedRows[r];column[r]=valueOrFunctionExecute(this.getValue(c,rowIndex))}}return result},getRowSelectionMatrix:function(){var selectedRows=this.getSelectionModel().getSelectedRows();var numCols=this.getColumnCount();var result=new Array(numCols);for(var c=0;c<numCols;c++){result[c]=new Array(selectedRows.length);for(var r=0;r<selectedRows.length;r++){var rowIndex=selectedRows[r];result[c][r]=valueOrFunctionExecute(this.getValue(c,rowIndex))}}return result},getColumnSelectionMatrix:function(){var selectedColumns=this.getSelectedColumns();var numRows=this.getRowCount();var result=new Array(selectedColumns.length);for(var c=0;c<selectedColumns.length;c++){result[c]=new Array(numRows);var colIndex=selectedColumns[c];for(var r=0;r<numRows;r++){result[c][r]=valueOrFunctionExecute(this.getValue(colIndex,r))}}return result},getColumnSelection:function(){var selectedColumns=this.getSelectedColumns();var result={};var rowCount=this.getRowCount();for(var c=0;c<selectedColumns.length;c++){var column=new Array(rowCount);var columnIndex=selectedColumns[c];result[this.getField(columnIndex)]=column;for(var r=0;r<rowCount;r++){column[r]=valueOrFunctionExecute(this.getValue(columnIndex,r))}}return result},getSelection:function(){var selections=this.getSelections();var result=new Array(selections.length);for(var i=0;i<selections.length;i++){var rect=selections[i];result[i]=this._getSelection(rect)}return result},_getSelection:function(rect){rect=normalizeRect(rect);var colCount=rect.extent.x+1;var rowCount=rect.extent.y+1;var ox=rect.origin.x;var oy=rect.origin.y;var result={};var r;for(var c=0;c<colCount;c++){var column=new Array(rowCount);result[this.getField(c+ox)]=column;for(r=0;r<rowCount;r++){column[r]=valueOrFunctionExecute(this.getValue(ox+c,oy+r))}}return result},getSelectionMatrix:function(){var selections=this.getSelections();var result=new Array(selections.length);for(var i=0;i<selections.length;i++){var rect=selections[i];result[i]=this._getSelectionMatrix(rect)}return result},_getSelectionMatrix:function(rect){rect=normalizeRect(rect);var colCount=rect.extent.x+1;var rowCount=rect.extent.y+1;var ox=rect.origin.x;var oy=rect.origin.y;var result=[];for(var c=0;c<colCount;c++){var column=new Array(rowCount);result[c]=column;for(var r=0;r<rowCount;r++){column[r]=valueOrFunctionExecute(this.getValue(ox+c,oy+r))}}return result},fireSyntheticContextMenuEvent:function(e){e.gridCell=this.convertViewPointToDataPoint(e.gridCell);var event=new CustomEvent("fin-context-menu",{detail:{gridCell:e.gridCell,mousePoint:e.mousePoint,viewPoint:e.viewPoint,primitiveEvent:e.primitiveEvent,rows:this.getSelectedRows(),columns:this.getSelectedColumns(),selections:this.getSelectionModel().getSelections()}});this.canvas.dispatchEvent(event)},fireSyntheticMouseUpEvent:function(e){var event=new CustomEvent("fin-mouseup",{detail:{gridCell:e.gridCell,mousePoint:e.mousePoint,viewPoint:e.viewPoint,primitiveEvent:e.primitiveEvent,rows:this.getSelectedRows(),columns:this.getSelectedColumns(),selections:this.getSelectionModel().getSelections()}});this.canvas.dispatchEvent(event)},fireSyntheticMouseDownEvent:function(e){var event=new CustomEvent("fin-mousedown",{detail:{gridCell:e.gridCell,mousePoint:e.mousePoint,viewPoint:e.viewPoint,primitiveEvent:e.primitiveEvent,rows:this.getSelectedRows(),columns:this.getSelectedColumns(),selections:this.getSelectionModel().getSelections()}});this.canvas.dispatchEvent(event)},isViewableButton:function(c,r){return this.getRenderer().isViewableButton(c,r)},fireSyntheticButtonPressedEvent:function(evt){var dataCell=evt.dataCell;var gridCell=evt.gridCell;if(!this.isViewableButton(dataCell.x,dataCell.y)){return}var event=new CustomEvent("fin-button-pressed",{detail:{gridCell:gridCell}});this.canvas.dispatchEvent(event)},fireSyntheticKeydownEvent:function(keyEvent){var clickEvent=new CustomEvent("fin-keydown",{detail:keyEvent.detail});this.canvas.dispatchEvent(clickEvent)},fireSyntheticKeyupEvent:function(keyEvent){var clickEvent=new CustomEvent("fin-keyup",{detail:keyEvent.detail});this.canvas.dispatchEvent(clickEvent)},fireSyntheticOnCellEnterEvent:function(cell){var detail={gridCell:cell,time:Date.now(),grid:this};var clickEvent=new CustomEvent("fin-cell-enter",{detail:detail});this.canvas.dispatchEvent(clickEvent)},fireSyntheticGroupsChangedEvent:function(groups){var detail={groups:groups,time:Date.now(),grid:this};var clickEvent=new CustomEvent("fin-groups-changed",{detail:detail});this.canvas.dispatchEvent(clickEvent)},fireSyntheticOnCellExitEvent:function(cell){var detail={gridCell:cell,time:Date.now(),grid:this
};var clickEvent=new CustomEvent("fin-cell-exit",{detail:detail});this.canvas.dispatchEvent(clickEvent)},fireSyntheticClickEvent:function(mouseEvent){var cell=mouseEvent.gridCell;var detail={gridCell:cell,mousePoint:mouseEvent.mousePoint,keys:mouseEvent.keys,primitiveEvent:mouseEvent,time:Date.now(),grid:this};this.getBehavior().enhanceDoubleClickEvent(detail);var clickEvent=new CustomEvent("fin-click",{detail:detail});this.canvas.dispatchEvent(clickEvent)},fireSyntheticDoubleClickEvent:function(mouseEvent){var cell=mouseEvent.gridCell;var behavior=this.getBehavior();var detail={gridCell:cell,mousePoint:mouseEvent.mousePoint,time:Date.now(),grid:this};behavior.enhanceDoubleClickEvent(mouseEvent);var clickEvent=new CustomEvent("fin-double-click",{detail:detail});behavior.cellDoubleClicked(cell,mouseEvent);this.canvas.dispatchEvent(clickEvent)},fireSyntheticGridRenderedEvent:function(){var event=new CustomEvent("fin-grid-rendered",{detail:{source:this,time:Date.now()}});this.canvas.dispatchEvent(event)},fireScrollEvent:function(type,oldValue,newValue){var event=new CustomEvent(type,{detail:{oldValue:oldValue,value:newValue,time:Date.now()}});this.canvas.dispatchEvent(event)},setVScrollValue:function(y){y=Math.round(y);var max=this.sbVScroller.range.max;y=Math.min(max,Math.max(0,y));var self=this;if(y===this.vScrollValue){return}this.getBehavior()._setScrollPositionY(y);var oldY=this.vScrollValue;this.vScrollValue=y;this.scrollValueChangedNotification();setTimeout(function(){self.fireScrollEvent("fin-scroll-y",oldY,y)})},getVScrollValue:function(){return this.vScrollValue},setHScrollValue:function(x){x=Math.round(x);var max=this.sbHScroller.range.max;x=Math.min(max,Math.max(0,x));var self=this;if(x===this.hScrollValue){return}this.getBehavior()._setScrollPositionX(x);var oldX=this.hScrollValue;this.hScrollValue=x;this.scrollValueChangedNotification();setTimeout(function(){self.fireScrollEvent("fin-scroll-x",oldX,x)})},getHScrollValue:function(){return this.hScrollValue},takeFocus:function(){if(this.isEditing()){this.stopEditing()}else{this.getCanvas().takeFocus()}},editorTakeFocus:function(){if(this.cellEditor){return this.cellEditor.takeFocus()}},isEditing:function(){if(this.cellEditor){return this.cellEditor.isEditing}return false},initScrollbars:function(){var self=this;var scrollbarHolder=this.shadowRoot.querySelector("#scrollbars");var horzBar=new FinBar({orientation:"horizontal",onchange:function(idx){self.setHScrollValue(idx)},cssStylesheetReferenceElement:scrollbarHolder,container:this.canvas});var vertBar=new FinBar({orientation:"vertical",onchange:function(idx){self.setVScrollValue(idx)},paging:{up:function(){return self.pageUp()},down:function(){return self.pageDown()}},container:this.canvas});this.sbHScroller=horzBar;this.sbVScroller=vertBar;this.sbHScroller.classPrefix=this.resolveProperty("hScrollbarClassPrefix");this.sbVScroller.classPrefix=this.resolveProperty("vScrollbarClassPrefix");scrollbarHolder.appendChild(horzBar.bar);scrollbarHolder.appendChild(vertBar.bar);this.resizeScrollbars()},resizeScrollbars:function(){this.sbHScroller.shortenBy(this.sbVScroller).resize();this.sbVScroller.shortenBy(this.sbHScroller).resize()},setVScrollbarValues:function(max){this.sbVScroller.range={min:0,max:max}},setHScrollbarValues:function(max){this.sbHScroller.range={min:0,max:max}},scrollValueChangedNotification:function(){if(this.hScrollValue===this.sbPrevHScrollValue&&this.vScrollValue===this.sbPrevVScrollValue){return}this.sbHValueHolder.changed=!this.sbHValueHolder.changed;this.sbVValueHolder.changed=!this.sbVValueHolder.changed;this.sbPrevHScrollValue=this.hScrollValue;this.sbPrevVScrollValue=this.vScrollValue;if(this.cellEditor){this.cellEditor.scrollValueChangedNotification()}this.computeCellsBounds()},getValue:function(x,y){return this.getBehavior().getValue(x,y)},setValue:function(x,y,value){this.getBehavior().setValue(x,y,value)},getColumnAlignment:function(c){return this.getBehavior().getColumnAlignment(c)},synchronizeScrollingBoundries:function(){var behavior=this.getBehavior();var numFixedColumns=this.getFixedColumnCount();var numFixedRows=this.getFixedRowCount();var numColumns=this.getColumnCount();var numRows=this.getRowCount();var bounds=this.getBounds();if(!bounds){return}var scrollableHeight=bounds.height()-behavior.getFixedRowsMaxHeight()-15;var scrollableWidth=bounds.width()-200-behavior.getFixedColumnsMaxWidth()-15;var lastPageColumnCount=0;var columnsWidth=0;for(;lastPageColumnCount<numColumns;lastPageColumnCount++){var eachWidth=this.getColumnWidth(numColumns-lastPageColumnCount-1);columnsWidth=columnsWidth+eachWidth;if(columnsWidth>scrollableWidth){break}}var lastPageRowCount=0;var rowsHeight=0;for(;lastPageRowCount<numRows;lastPageRowCount++){var eachHeight=this.getRowHeight(numRows-lastPageRowCount-1);rowsHeight=rowsHeight+eachHeight;if(rowsHeight>scrollableHeight){break}}var hMax=Math.max(0,numColumns-numFixedColumns-lastPageColumnCount);this.setHScrollbarValues(hMax);var vMax=Math.max(0,numRows-numFixedRows-lastPageRowCount);this.setVScrollbarValues(vMax);this.setHScrollValue(Math.min(this.getHScrollValue(),hMax));this.setVScrollValue(Math.min(this.getVScrollValue(),vMax));this.computeCellsBounds();this.repaint();this.resizeScrollbars()},getVisibleRows:function(){return this.getRenderer().getVisibleRows()},getVisibleColumns:function(){return this.getRenderer().getVisibleColumns()},initRenderer:function(){this.renderer=new hypergrid.Renderer;this.renderer.setGrid(this)},getRenderer:function(){return this.renderer},getColumnWidth:function(columnIndex){return this.getBehavior().getColumnWidth(columnIndex)},setColumnWidth:function(columnIndex,columnWidth){this.getBehavior().setColumnWidth(columnIndex,columnWidth)},getColumnEdge:function(c){return this.getBehavior().getColumnEdge(c,this.getRenderer())},getFixedColumnsWidth:function(){return this.getBehavior().getFixedColumnsWidth()},getRowHeight:function(rowIndex){return this.getBehavior().getRowHeight(rowIndex)},setRowHeight:function(rowIndex,rowHeight){this.getBehavior().setRowHeight(rowIndex,rowHeight)},getFixedRowsHeight:function(){return this.getBehavior().getFixedRowsHeight()},getColumnCount:function(){return this.getBehavior().getColumnCount()},getRowCount:function(){return this.getBehavior().getRowCount()},getFixedColumnCount:function(){return this.getBehavior().getFixedColumnCount()},getFixedRowCount:function(){return this.getBehavior().getFixedRowCount()},topLeftClicked:function(mouse){this.getBehavior().topLeftClicked(this,mouse)},rowHeaderClicked:function(mouse){this.getBehavior().rowHeaderClicked(this,mouse)},columnHeaderClicked:function(mouse){this.getBehavior().columnHeaderClicked(this,mouse)},_activateEditor:function(event){var gridCell=event.gridCell;this.activateEditor(gridCell.x,gridCell.y)},activateEditor:function(x,y){if(!this.isEditable()&&!this.isFilterRow(y)){return}var editor=this.getCellEditorAt(x,y);if(!editor){return}var point=editor.editorPoint;if(editor){if(point.x===x&&point.y===y&&editor.isEditing){return}else if(this.isEditing()){this.stopEditing()}event.gridCell={x:x,y:y};this.editAt(editor,event)}},getCellEditorAt:function(x,y){return this.getBehavior().getCellEditorAt(x,y)},toggleHiDPI:function(){if(this.canvas.isHiDPI()){this.removeAttribute("hidpi")}else{this.setAttribute("hidpi",null)}this.canvas.resize()},getHiDPI:function(ctx){if(window.devicePixelRatio&&this.canvas.isHiDPI()){var devicePixelRatio=window.devicePixelRatio||1;var backingStoreRatio=ctx.webkitBackingStorePixelRatio||ctx.mozBackingStorePixelRatio||ctx.msBackingStorePixelRatio||ctx.oBackingStorePixelRatio||ctx.backingStorePixelRatio||1;var ratio=devicePixelRatio/backingStoreRatio;return ratio}else{return 1}},getRenderedWidth:function(colIndex){return this.renderer.getRenderedWidth(colIndex)},getRenderedHeight:function(rowIndex){return this.renderer.getRenderedHeight(rowIndex)},resolveCellEditor:function(name){return this.cellEditors[name]},updateCursor:function(){var translate=this.getBehavior();var cursor=translate.getCursorAt(-1,-1);var hoverCell=this.getHoverCell();if(hoverCell&&hoverCell.x>-1&&hoverCell.y>-1){var x=hoverCell.x+this.getHScrollValue();cursor=translate.getCursorAt(x,hoverCell.y+this.getVScrollValue())}this.beCursor(cursor)},repaintCell:function(x,y){this.getRenderer().repaintCell(x,y)},isDraggingColumn:function(){if(this.renderOverridesCache.dragger){return true}else{return false}},pageUp:function(){var rowNum=this.getRenderer().getPageUpRow();this.setVScrollValue(rowNum);return rowNum},pageDown:function(){var rowNum=this.getRenderer().getPageDownRow();this.setVScrollValue(rowNum);return rowNum},pageLeft:function(){console.log("page left")},pageRight:function(){console.log("page right")},getRenderedData:function(){var behavior=this.getBehavior();var renderer=this.getRenderer();var colCount=this.getColumnCount();var rowCount=renderer.getVisibleRows();var headers=[];var result=[];var r,c;for(c=0;c<colCount;c++){headers[c]=behavior.getColumnId(c,0)}for(r=0;r<rowCount;r++){var row={};row.hierarchy=behavior.getFixedColumnValue(0,r);for(c=0;c<colCount;c++){var field=headers[c];row[field]=behavior.getValue(c,r)}result[r]=row}return result},getSelectedRow:function(){var sels=this.getSelectionModel().getSelections();if(sels.length<1){return}var behavior=this.getBehavior();var colCount=this.getColumnCount();var headers=[];var topRow=sels[0].origin.y;var c;for(c=0;c<colCount;c++){headers[c]=behavior.getColumnId(c,0)}var row={};row.hierarchy=behavior.getFixedColumnValue(0,topRow);for(c=0;c<colCount;c++){var field=headers[c];row[field]=behavior.getValue(c,topRow)}return row},fireRequestCellEdit:function(cell,value){var clickEvent=new CustomEvent("fin-request-cell-edit",{cancelable:true,detail:{value:value,gridCell:cell,time:Date.now()}});var proceed=this.canvas.dispatchEvent(clickEvent);return proceed},fireBeforeCellEdit:function(cell,oldValue,newValue,control){var clickEvent=new CustomEvent("fin-before-cell-edit",{cancelable:true,detail:{oldValue:oldValue,newValue:newValue,gridCell:cell,time:Date.now(),input:control}});var proceed=this.canvas.dispatchEvent(clickEvent);return proceed},fireAfterCellEdit:function(cell,oldValue,newValue,control){var clickEvent=new CustomEvent("fin-after-cell-edit",{detail:{newValue:newValue,oldValue:oldValue,gridCell:cell,time:Date.now(),input:control}});this.canvas.dispatchEvent(clickEvent)},autosizeColumn:function(colIndex){var column=this.getBehavior().getColumn(colIndex);column.checkColumnAutosizing(true);this.computeCellsBounds()},setFocusable:function(boolean){this.getCanvas().setFocusable(boolean)},getVisibleColumnsCount:function(){return this.getRenderer().getVisibleColumnsCount()},getVisibleRowsCount:function(){return this.getRenderer().getVisibleRowsCount()},updateSize:function(){this.canvas.checksize()},stopPaintThread:function(){this.canvas.stopPaintThread()},stopResizeThread:function(){this.canvas.stopResizeThread()},restartResizeThread:function(){this.canvas.restartResizeThread()},restartPaintThread:function(){this.canvas.restartPaintThread()},swapColumns:function(source,target){this.getBehavior().swapColumns(source,target)},endDragColumnNotification:function(){this.getBehavior().endDragColumnNotification()},getFixedColumnsMaxWidth:function(){return this.getBehavior().getFixedColumnsMaxWidth()},isMouseDownInHeaderArea:function(){var numHeaderColumns=this.getHeaderColumnCount();var numHeaderRows=this.getHeaderRowCount();var mouseDown=this.getMouseDown();return mouseDown.x<numHeaderColumns||mouseDown.y<numHeaderRows},_getBoundsOfCell:function(x,y){var bounds=this.getRenderer()._getBoundsOfCell(x,y);return bounds},getColumnProperties:function(columnIndex){var properties=this.getBehavior().getColumnProperties(columnIndex);return properties},setColumnProperties:function(columnIndex,properties){this.getBehavior().setColumnProperties(columnIndex,properties)},moveSingleSelect:function(x,y){this.getBehavior().moveSingleSelect(this,x,y)},selectCell:function(x,y){this.getSelectionModel().clear();this.getSelectionModel().select(x,y,0,0)},getHeaderColumnCount:function(){return this.getBehavior().getHeaderColumnCount()},toggleSort:function(x,keys){this.stopEditing();var behavior=this.getBehavior();var self=this;behavior.toggleSort(x,keys);setTimeout(function(){self.synchronizeScrollingBoundries();if(self.isColumnAutosizing()){behavior.autosizeAllColumns()}self.repaint()},10)},toggleSelectColumn:function(x,keys){keys=keys||[];var model=this.getSelectionModel();var alreadySelected=model.isColumnSelected(x);var hasCTRL=keys.indexOf("CTRL")>-1;var hasSHIFT=keys.indexOf("SHIFT")>-1;if(!hasCTRL&&!hasSHIFT){model.clear();if(!alreadySelected){model.selectColumn(x)}}else{if(hasCTRL){if(alreadySelected){model.deselectColumn(x)}else{model.selectColumn(x)}}if(hasSHIFT){model.clear();model.selectColumn(this.lastEdgeSelection[0],x)}}if(!alreadySelected&&!hasSHIFT){this.lastEdgeSelection[0]=x}this.repaint();this.fireSyntheticColumnSelectionChangedEvent()},toggleSelectRow:function(y,keys){var selectionEdge=this.getFilterRowIndex()+1;if(y<selectionEdge){return}keys=keys||[];var isSingleRowSelection=this.isSingleRowSelectionMode();var model=this.getSelectionModel();var alreadySelected=model.isRowSelected(y);var hasCTRL=keys.indexOf("CTRL")>-1;var hasSHIFT=keys.indexOf("SHIFT")>-1;if(!hasCTRL&&!hasSHIFT){model.clear();if(!alreadySelected){model.selectRow(y)}}else{if(hasCTRL){if(alreadySelected){model.deselectRow(y)}else{if(isSingleRowSelection){model.clearRowSelection()}model.selectRow(y)}}if(hasSHIFT){model.clear();model.selectRow(this.lastEdgeSelection[1],y)}}if(!alreadySelected&&!hasSHIFT){this.lastEdgeSelection[1]=y}this.repaint()},isShowRowNumbers:function(){return this.resolveProperty("showRowNumbers")},isEditable:function(){return this.resolveProperty("editable")===true},isShowFilterRow:function(){return this.resolveProperty("showFilterRow")},isShowHeaderRow:function(){return this.resolveProperty("showHeaderRow")},getHeaderRowCount:function(){return this.getBehavior().getHeaderRowCount()},isFilterRow:function(y){return y===this.getFilterRowIndex()},getFilterRowIndex:function(){if(!this.isShowFilterRow()){return-1}if(this.isShowHeaderRow()){return 1}else{return 0}},setGroups:function(arrayOfColumnIndexes){this.getBehavior().setGroups(arrayOfColumnIndexes)},filterClicked:function(event){this.activateEditor(event.gridCell.x,event.gridCell.y)},hasHierarchyColumn:function(){return this.getBehavior().hasHierarchyColumn()},isHierarchyColumn:function(x){if(!this.hasHierarchyColumn()){return false}return x===0},checkScrollbarVisibility:function(){},isColumnOrRowSelected:function(){return this.getSelectionModel().isColumnOrRowSelected()},selectColumn:function(x1,x2){this.getSelectionModel().selectColumn(x1,x2)},selectRow:function(y1,y2){if(this.isSingleRowSelectionMode()){this.getSelectionModel().clearRowSelection();y1=y2}else{y2=y2||y1}var min=Math.min(y1,y2);var max=Math.max(y1,y2);var selectionEdge=this.getFilterRowIndex()+1;if(min<selectionEdge){return}this.getSelectionModel().selectRow(min,max)},isRowSelected:function(r){return this.getSelectionModel().isRowSelected(r)},isColumnSelected:function(c){return this.getSelectionModel().isColumnSelected(c)},lookupFeature:function(key){return this.getBehavior().lookupFeature(key)},getRow:function(y){return this.getBehavior().getRow(y)},getFieldName:function(index){return this.getBehavior().getFieldName(index)},getColumnIndex:function(fieldName){return this.getBehavior().getColumnIndex(fieldName)},isCellSelection:function(){return this.resolveProperty("cellSelection")===true},isRowSelection:function(){return this.resolveProperty("rowSelection")===true},isColumnSelection:function(){return this.resolveProperty("columnSelection")===true},getComputedRow:function(y){return this.getBehavior().getComputedRow(y)},isColumnAutosizing:function(){return this.resolveProperty("columnAutosizing")===true},setGlobalFilter:function(string){this.getBehavior().setGlobalFilter(string)},selectRowsFromCells:function(){var sm=this.getSelectionModel();if(this.isSingleRowSelectionMode()){var last=sm.getLastSelection();if(!last){sm.clearRowSelection()}else{this.selectRow(null,last.corner.y)}}else{sm.selectRowsFromCells()}},selectColumnsFromCells:function(){this.getSelectionModel().selectColumnsFromCells()},getSelectedRows:function(){return this.getBehavior().getSelectedRows()},getSelectedColumns:function(){return this.getBehavior().getSelectedColumns()},getSelections:function(){return this.getBehavior().getSelections()},getLastSelectionType:function(){return this.getSelectionModel().getLastSelectionType()},isCellSelected:function(x,y){return this.getSelectionModel().isCellSelected(x,y)},isInCurrentSelectionRectangle:function(x,y){return this.getSelectionModel().isInCurrentSelectionRectangle(x,y)},selectAllRows:function(){this.getSelectionModel().selectAllRows()},areAllRowsSelected:function(){return this.getSelectionModel().areAllRowsSelected()},toggleSelectAllRows:function(){if(this.areAllRowsSelected()){this.getSelectionModel().clear()}else{this.selectAllRows()}this.repaint()},getField:function(x){return this.getBehavior().getField(x)},isSingleRowSelectionMode:function(){return this.resolveProperty("singleRowSelectionMode")},newPoint:function(x,y){return this.rectangles.point.create(x,y)},newRectangle:function(x,y,width,height){return this.rectangles.rectangle.create(x,y,width,height)}})})();</script></polymer-element></body></html>